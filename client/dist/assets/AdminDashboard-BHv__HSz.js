import{_ as R,r,o as A,c as i,a as s,g as b,t,b as f,w as _,d as c,e as L,F as D,i as S,v as B,x as N,K as I,n as M,J as w,k as d}from"./index-DY9xsVSO.js";const P={class:"admin-dashboard"},V={class:"stats-grid"},E={class:"stat-card"},F={class:"stat-info"},G={class:"stat-value"},$={class:"stat-card"},H={class:"stat-info"},J={class:"stat-value"},q={class:"stat-card"},z={class:"stat-info"},K={class:"stat-value"},Q={class:"stat-card"},j={class:"stat-info"},O={class:"stat-value"},W={class:"stat-card warning"},X={class:"stat-info"},Y={class:"stat-value"},Z={class:"content-grid"},ss={class:"content-card"},as={class:"card-body"},ts={class:"item-rank"},ls={class:"item-info"},ns={class:"item-value"},os={key:0,class:"empty-state"},es={class:"content-card"},is={class:"card-body"},ds={class:"item-info"},rs={class:"item-date"},us={key:0,class:"empty-state"},cs={class:"quick-actions"},vs={class:"actions-grid"},ps={class:"modal-content"},bs={class:"modal-header"},ms={class:"modal-body"},fs={class:"form-check mb-3"},_s={class:"mb-0"},ys={class:"modal-footer"},gs=["disabled"],ks={__name:"AdminDashboard",setup(hs){const n=r({}),y=r(!0),u=r(!1),v=r(!1),p=r(!0),e=r(null),g=async()=>{y.value=!0;try{const o=await w.getDashboard();n.value=o.data.data||{}}catch(o){console.error(o)}finally{y.value=!1}},U=o=>new Date(o).toLocaleDateString("id-ID",{day:"numeric",month:"short"}),T=()=>{e.value=null,u.value=!0},x=async()=>{v.value=!0,e.value=null;try{const o=await w.scanSongs(null,p.value);e.value=o.data.data,!p.value&&e.value.added>0&&g()}catch(o){console.error(o)}finally{v.value=!1}};return A(g),(o,a)=>{var k,h;const m=L("router-link");return d(),i("div",P,[a[27]||(a[27]=s("h1",{class:"page-title"},"Dashboard Admin",-1)),s("div",V,[s("div",E,[a[5]||(a[5]=s("div",{class:"stat-icon users"},[s("i",{class:"bi bi-people-fill"})],-1)),s("div",F,[s("span",G,t(n.value.totalUsers||0),1),a[4]||(a[4]=s("span",{class:"stat-label"},"Total Users",-1))])]),s("div",$,[a[7]||(a[7]=s("div",{class:"stat-icon songs"},[s("i",{class:"bi bi-music-note-list"})],-1)),s("div",H,[s("span",J,t(n.value.totalSongs||0),1),a[6]||(a[6]=s("span",{class:"stat-label"},"Total Lagu",-1))])]),s("div",q,[a[9]||(a[9]=s("div",{class:"stat-icon plays"},[s("i",{class:"bi bi-play-circle-fill"})],-1)),s("div",z,[s("span",K,t(n.value.totalPlays||0),1),a[8]||(a[8]=s("span",{class:"stat-label"},"Total Play",-1))])]),s("div",Q,[a[11]||(a[11]=s("div",{class:"stat-icon today"},[s("i",{class:"bi bi-graph-up"})],-1)),s("div",j,[s("span",O,t(n.value.playsToday||0),1),a[10]||(a[10]=s("span",{class:"stat-label"},"Play Hari Ini",-1))])]),s("div",W,[a[14]||(a[14]=s("div",{class:"stat-icon pending"},[s("i",{class:"bi bi-clock-fill"})],-1)),s("div",X,[s("span",Y,t(n.value.pendingUploads||0),1),a[12]||(a[12]=s("span",{class:"stat-label"},"Pending Upload",-1))]),f(m,{to:"/admin/uploads",class:"stat-link"},{default:_(()=>[...a[13]||(a[13]=[c("Review â†’",-1)])]),_:1})])]),s("div",Z,[s("div",ss,[a[15]||(a[15]=s("div",{class:"card-header"},[s("h3",null,[s("i",{class:"bi bi-fire me-2"}),c("Lagu Terpopuler")])],-1)),s("div",as,[(d(!0),i(D,null,S(n.value.topSongs,(l,C)=>(d(),i("div",{key:l.id,class:"list-item"},[s("span",ts,t(C+1),1),s("div",ls,[s("h4",null,t(l.title),1),s("p",null,t(l.artist),1)]),s("span",ns,t(l.play_count)+" plays",1)]))),128)),(k=n.value.topSongs)!=null&&k.length?b("",!0):(d(),i("div",os,"Belum ada data"))])]),s("div",es,[a[17]||(a[17]=s("div",{class:"card-header"},[s("h3",null,[s("i",{class:"bi bi-person-plus me-2"}),c("User Terbaru")])],-1)),s("div",is,[(d(!0),i(D,null,S(n.value.recentUsers,l=>(d(),i("div",{key:l.id,class:"list-item"},[a[16]||(a[16]=s("div",{class:"item-avatar"},[s("i",{class:"bi bi-person-circle"})],-1)),s("div",ds,[s("h4",null,t(l.name),1),s("p",null,t(l.email),1)]),s("span",rs,t(U(l.created_at)),1)]))),128)),(h=n.value.recentUsers)!=null&&h.length?b("",!0):(d(),i("div",us,"Belum ada data"))])])]),s("div",cs,[a[21]||(a[21]=s("h3",null,"Quick Actions",-1)),s("div",vs,[s("button",{class:"action-btn",onClick:T},[...a[18]||(a[18]=[s("i",{class:"bi bi-folder-plus"},null,-1),s("span",null,"Scan Lagu Baru",-1)])]),f(m,{to:"/admin/songs",class:"action-btn"},{default:_(()=>[...a[19]||(a[19]=[s("i",{class:"bi bi-plus-circle"},null,-1),s("span",null,"Tambah Lagu",-1)])]),_:1}),f(m,{to:"/admin/uploads",class:"action-btn"},{default:_(()=>[...a[20]||(a[20]=[s("i",{class:"bi bi-check-circle"},null,-1),s("span",null,"Review Upload",-1)])]),_:1})])]),u.value?(d(),i("div",{key:0,class:"modal-overlay",onClick:a[3]||(a[3]=B(l=>u.value=!1,["self"]))},[s("div",ps,[s("div",bs,[a[23]||(a[23]=s("h3",null,"Scan Lagu dari Folder",-1)),s("button",{onClick:a[0]||(a[0]=l=>u.value=!1)},[...a[22]||(a[22]=[s("i",{class:"bi bi-x-lg"},null,-1)])])]),s("div",ms,[a[26]||(a[26]=s("p",{class:"text-muted mb-3"},[c(" Scan folder "),s("code",null,"./uploads/videos"),c(" untuk file dengan format:"),s("br"),s("code",null,"JUDUL-LAGU#ARTIS#GENRE#NEGARA.mp4")],-1)),s("div",fs,[N(s("input",{type:"checkbox",class:"form-check-input",id:"dryRun","onUpdate:modelValue":a[1]||(a[1]=l=>p.value=l)},null,512),[[I,p.value]]),a[24]||(a[24]=s("label",{class:"form-check-label",for:"dryRun"},"Dry Run (preview tanpa menambah ke database)",-1))]),e.value?(d(),i("div",{key:0,class:M(["alert",e.value.success?"alert-success":"alert-info"])},[a[25]||(a[25]=s("p",{class:"mb-1"},[s("strong",null,"Hasil Scan:")],-1)),s("p",_s,"Total: "+t(e.value.total)+", Ditambahkan: "+t(e.value.added)+", Dilewati: "+t(e.value.skipped),1)],2)):b("",!0)]),s("div",ys,[s("button",{class:"btn btn-ghost",onClick:a[2]||(a[2]=l=>u.value=!1)},"Tutup"),s("button",{class:"btn btn-primary",onClick:x,disabled:v.value},t(v.value?"Scanning...":"Mulai Scan"),9,gs)])])])):b("",!0)])}}},Ss=R(ks,[["__scopeId","data-v-7393f490"]]);export{Ss as default};
