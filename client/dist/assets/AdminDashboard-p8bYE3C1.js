import{_ as V,r as v,c as T,o as G,N as K,a as l,d as a,i as b,e as _,t as i,f as r,F as m,k,n as f,h as H,w as g,b as y,g as Q,m as z,B as J,P as O,T as $,O as I,v as e}from"./index-Btw_uZyE.js";const q={class:"admin-dashboard"},W={class:"page-header reveal",style:{"--d":"0ms"}},X={class:"page-header__copy"},Y={class:"page-meta text-muted"},Z={class:"page-header__actions"},aa=["disabled"],ta={key:0,class:"alert-card alert-card--danger reveal",style:{"--d":"60ms"},role:"status"},sa={class:"alert-body"},ea={class:"alert-text text-muted"},la={class:"stats-grid reveal",style:{"--d":"90ms"},"aria-label":"Ringkasan statistik"},ia={class:"stat-icon","aria-hidden":"true"},na={class:"stat-body"},da={class:"stat-label"},oa={class:"stat-value"},ca={key:0,class:"stat-hint text-muted"},ra={class:"content-grid"},ua={class:"panel reveal",style:{"--d":"120ms"}},va={class:"panel-header"},ba={class:"panel-body"},pa={key:0,class:"list-skeleton","aria-hidden":"true"},ma={key:1,class:"list"},ka={class:"rank-pill","aria-hidden":"true"},ga={class:"item-info"},ya=["title"],ha=["title"],_a={class:"item-metric"},fa={class:"metric-pill"},wa={key:0,class:"empty-state"},xa={class:"side-panel"},Da={class:"panel reveal",style:{"--d":"150ms"}},Sa={class:"panel-header"},Aa={class:"panel-body"},Ta={key:0,class:"list-skeleton","aria-hidden":"true"},Ua={key:1,class:"list"},Ca={class:"item-info"},La=["title"],Ma=["title"],Ra={class:"item-metric"},Na={class:"metric-pill metric-pill--soft"},Ia={key:0,class:"empty-state empty-state--compact"},Ba={class:"panel reveal",style:{"--d":"180ms"}},Pa={class:"panel-body"},Fa={class:"actions-grid"},ja={class:"modal-body"},Ea={class:"toggle-row"},Va=["disabled"],Ga={key:0,class:"status-banner is-danger",role:"status","aria-live":"polite"},Ka={class:"status-banner__copy"},Ha={class:"status-text text-muted"},Qa={key:2,class:"scan-loading","aria-live":"polite"},za={class:"modal-footer"},Ja=["disabled"],Oa=["disabled"],$a={__name:"AdminDashboard",setup(qa){const o=v({}),p=v(!0),w=v(""),C=v(Date.now()),x=v(!1),u=v(!1),D=v(!0),c=v(null),h=v(""),U=d=>{const t=Number(d)||0;return new Intl.NumberFormat("id-ID").format(t)},B=T(()=>{const d=new Date(C.value||Date.now());return new Intl.DateTimeFormat("id-ID",{hour:"2-digit",minute:"2-digit"}).format(d)}),P=T(()=>[{key:"users",label:"Total Users",value:o.value.totalUsers||0,icon:"bi bi-people-fill",tone:"tone-blue"},{key:"songs",label:"Total Lagu",value:o.value.totalSongs||0,icon:"bi bi-music-note-list",tone:"tone-cyan",hint:`${U(o.value.activeSongs||0)} aktif`},{key:"plays",label:"Total Play",value:o.value.totalPlays||0,icon:"bi bi-play-circle-fill",tone:"tone-green"},{key:"today",label:"Play Hari Ini",value:o.value.playsToday||0,icon:"bi bi-graph-up-arrow",tone:"tone-cyan"},{key:"pending",label:"Pending Upload",value:o.value.pendingUploads||0,icon:"bi bi-clock-fill",tone:"tone-blue",to:"/admin/uploads",linkLabel:"Review"}]),L=T(()=>Array.isArray(o.value.topSongs)?o.value.topSongs:[]),M=T(()=>Array.isArray(o.value.recentUsers)?o.value.recentUsers:[]),S=async()=>{var d,t;p.value=!0,w.value="";try{const n=await I.getDashboard();o.value=n.data.data||{},C.value=Date.now()}catch(n){console.error(n),w.value=((t=(d=n.response)==null?void 0:d.data)==null?void 0:t.message)||"Terjadi kesalahan saat mengambil data."}finally{p.value=!1}},F=d=>new Date(d).toLocaleDateString("id-ID",{day:"numeric",month:"short"}),R=()=>{c.value=null,h.value="",x.value=!0},A=()=>{u.value||(x.value=!1)},j=async()=>{var d,t;u.value=!0,c.value=null,h.value="";try{const n=await I.scanSongs(null,D.value);c.value=n.data.data,!D.value&&c.value.added>0&&S()}catch(n){console.error(n),h.value=((t=(d=n.response)==null?void 0:d.data)==null?void 0:t.message)||"Gagal melakukan scan lagu."}finally{u.value=!1}},N=d=>{d.key==="Escape"&&x.value&&A()};return G(()=>{S(),window.addEventListener("keydown",N)}),K(()=>{window.removeEventListener("keydown",N)}),(d,t)=>{const n=Q("router-link");return e(),l("div",q,[a("header",W,[a("div",X,[t[2]||(t[2]=a("div",{class:"page-badge"},[a("i",{class:"bi bi-speedometer2","aria-hidden":"true"}),a("span",null,"Admin Dashboard")],-1)),t[3]||(t[3]=a("h1",null,"Ringkasan admin yang cepat & jelas",-1)),t[4]||(t[4]=a("p",{class:"text-muted"}," Pantau statistik utama, cek aktivitas terbaru, dan jalankan aksi penting hanya dalam beberapa klik. ",-1)),a("div",Y,[t[1]||(t[1]=a("i",{class:"bi bi-clock","aria-hidden":"true"},null,-1)),a("span",null,"Terakhir update: "+i(B.value),1)])]),a("div",Z,[a("button",{class:"btn btn-ghost",type:"button",onClick:S,disabled:p.value},[t[5]||(t[5]=a("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1)),r(" "+i(p.value?"Memuat…":"Refresh"),1)],8,aa),a("button",{class:"btn btn-primary",type:"button",onClick:R},[...t[6]||(t[6]=[a("i",{class:"bi bi-folder-plus","aria-hidden":"true"},null,-1),r(" Scan Lagu Baru ",-1)])])])]),w.value&&!p.value?(e(),l("div",ta,[t[9]||(t[9]=a("div",{class:"alert-icon","aria-hidden":"true"},[a("i",{class:"bi bi-exclamation-triangle-fill"})],-1)),a("div",sa,[t[7]||(t[7]=a("div",{class:"alert-title"},"Gagal memuat dashboard",-1)),a("div",ea,i(w.value),1)]),a("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:S},[...t[8]||(t[8]=[a("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1),r(" Coba lagi ",-1)])])])):b("",!0),a("section",la,[p.value?(e(),l(m,{key:0},k(5,s=>a("div",{key:s,class:"stat-card stat-card--skeleton"},[...t[10]||(t[10]=[a("div",{class:"stat-icon loading-skeleton","aria-hidden":"true"},null,-1),a("div",{class:"stat-body"},[a("div",{class:"skeleton-line loading-skeleton"}),a("div",{class:"skeleton-line skeleton-line--lg loading-skeleton"})],-1)])])),64)):(e(!0),l(m,{key:1},k(P.value,s=>(e(),l("div",{key:s.key,class:f(["stat-card",s.tone])},[a("div",ia,[a("i",{class:f(s.icon)},null,2)]),a("div",na,[a("div",da,i(s.label),1),a("div",oa,i(U(s.value)),1),s.hint?(e(),l("div",ca,i(s.hint),1)):b("",!0)]),s.to?(e(),H(n,{key:0,to:s.to,class:"stat-link"},{default:g(()=>[a("span",null,i(s.linkLabel),1),t[11]||(t[11]=a("i",{class:"bi bi-arrow-right","aria-hidden":"true"},null,-1))]),_:2},1032,["to"])):b("",!0)],2))),128))]),a("section",ra,[a("div",ua,[a("div",va,[t[13]||(t[13]=y('<div class="panel-title" data-v-6c1b2cb4><div class="panel-icon" aria-hidden="true" data-v-6c1b2cb4><i class="bi bi-fire" data-v-6c1b2cb4></i></div><div class="panel-title__copy" data-v-6c1b2cb4><h2 data-v-6c1b2cb4>Lagu Terpopuler</h2><p class="text-muted" data-v-6c1b2cb4>Top 5 berdasarkan jumlah play.</p></div></div>',1)),_(n,{to:"/admin/songs",class:"btn btn-ghost btn-sm"},{default:g(()=>[...t[12]||(t[12]=[a("i",{class:"bi bi-music-note-list","aria-hidden":"true"},null,-1),r(" Kelola lagu ",-1)])]),_:1})]),a("div",ba,[p.value?(e(),l("div",pa,[(e(),l(m,null,k(5,s=>a("div",{key:s,class:"list-row"},[...t[14]||(t[14]=[y('<div class="rank-pill loading-skeleton" data-v-6c1b2cb4></div><div class="list-main" data-v-6c1b2cb4><div class="skeleton-line loading-skeleton" data-v-6c1b2cb4></div><div class="skeleton-line skeleton-line--sm loading-skeleton" data-v-6c1b2cb4></div></div><div class="value-pill loading-skeleton" data-v-6c1b2cb4></div>',3)])])),64))])):(e(),l("div",ma,[(e(!0),l(m,null,k(L.value,(s,E)=>(e(),l("div",{key:s.id,class:"list-item"},[a("div",ka,i(E+1),1),a("div",ga,[a("div",{class:"item-title",title:s.title},i(s.title),9,ya),a("div",{class:"item-sub text-muted",title:s.artist},i(s.artist),9,ha)]),a("div",_a,[a("span",fa,[t[15]||(t[15]=a("i",{class:"bi bi-play-fill","aria-hidden":"true"},null,-1)),r(" "+i(U(s.play_count)),1)])])]))),128)),L.value.length?b("",!0):(e(),l("div",wa,[...t[16]||(t[16]=[a("div",{class:"empty-icon","aria-hidden":"true"},[a("i",{class:"bi bi-emoji-neutral"})],-1),a("h3",null,"Belum ada data",-1),a("p",{class:"text-muted"},"Play count akan muncul setelah ada aktivitas pemutaran lagu.",-1)])]))]))])]),a("aside",xa,[a("div",Da,[a("div",Sa,[t[18]||(t[18]=y('<div class="panel-title" data-v-6c1b2cb4><div class="panel-icon panel-icon--soft" aria-hidden="true" data-v-6c1b2cb4><i class="bi bi-person-plus" data-v-6c1b2cb4></i></div><div class="panel-title__copy" data-v-6c1b2cb4><h2 data-v-6c1b2cb4>User Terbaru</h2><p class="text-muted" data-v-6c1b2cb4>5 user yang baru mendaftar.</p></div></div>',1)),_(n,{to:"/admin/users",class:"btn btn-ghost btn-sm"},{default:g(()=>[...t[17]||(t[17]=[a("i",{class:"bi bi-people-fill","aria-hidden":"true"},null,-1),r(" Lihat semua ",-1)])]),_:1})]),a("div",Aa,[p.value?(e(),l("div",Ta,[(e(),l(m,null,k(5,s=>a("div",{key:s,class:"list-row"},[...t[19]||(t[19]=[y('<div class="avatar-skeleton loading-skeleton" data-v-6c1b2cb4></div><div class="list-main" data-v-6c1b2cb4><div class="skeleton-line loading-skeleton" data-v-6c1b2cb4></div><div class="skeleton-line skeleton-line--sm loading-skeleton" data-v-6c1b2cb4></div></div><div class="value-pill loading-skeleton" data-v-6c1b2cb4></div>',3)])])),64))])):(e(),l("div",Ua,[(e(!0),l(m,null,k(M.value,s=>(e(),l("div",{key:s.id,class:"list-item"},[t[20]||(t[20]=a("div",{class:"avatar-pill","aria-hidden":"true"},[a("i",{class:"bi bi-person-circle"})],-1)),a("div",Ca,[a("div",{class:"item-title",title:s.name},i(s.name),9,La),a("div",{class:"item-sub text-muted",title:s.email},i(s.email),9,Ma)]),a("div",Ra,[a("span",Na,i(F(s.created_at)),1)])]))),128)),M.value.length?b("",!0):(e(),l("div",Ia,[...t[21]||(t[21]=[a("div",{class:"empty-icon","aria-hidden":"true"},[a("i",{class:"bi bi-person"})],-1),a("h3",null,"Belum ada user",-1),a("p",{class:"text-muted"},"User baru akan muncul di sini.",-1)])]))]))])]),a("div",Ba,[t[25]||(t[25]=y('<div class="panel-header panel-header--compact" data-v-6c1b2cb4><div class="panel-title" data-v-6c1b2cb4><div class="panel-icon" aria-hidden="true" data-v-6c1b2cb4><i class="bi bi-lightning-charge-fill" data-v-6c1b2cb4></i></div><div class="panel-title__copy" data-v-6c1b2cb4><h2 data-v-6c1b2cb4>Quick Actions</h2><p class="text-muted" data-v-6c1b2cb4>Aksi yang paling sering dipakai.</p></div></div></div>',1)),a("div",Pa,[a("div",Fa,[a("button",{class:"action-card",type:"button",onClick:R},[...t[22]||(t[22]=[y('<div class="action-icon" aria-hidden="true" data-v-6c1b2cb4><i class="bi bi-folder-plus" data-v-6c1b2cb4></i></div><div class="action-copy" data-v-6c1b2cb4><div class="action-title" data-v-6c1b2cb4>Scan lagu</div><div class="action-sub text-muted" data-v-6c1b2cb4>Ambil lagu baru dari folder (rekursif).</div></div><i class="bi bi-chevron-right action-arrow" aria-hidden="true" data-v-6c1b2cb4></i>',3)])]),_(n,{to:"/admin/uploads",class:"action-card action-card--link"},{default:g(()=>[...t[23]||(t[23]=[a("div",{class:"action-icon","aria-hidden":"true"},[a("i",{class:"bi bi-cloud-check-fill"})],-1),a("div",{class:"action-copy"},[a("div",{class:"action-title"},"Review upload"),a("div",{class:"action-sub text-muted"},"Approve/Reject upload yang pending.")],-1),a("i",{class:"bi bi-chevron-right action-arrow","aria-hidden":"true"},null,-1)])]),_:1}),_(n,{to:"/admin/payment-methods",class:"action-card action-card--link"},{default:g(()=>[...t[24]||(t[24]=[a("div",{class:"action-icon","aria-hidden":"true"},[a("i",{class:"bi bi-credit-card-2-front-fill"})],-1),a("div",{class:"action-copy"},[a("div",{class:"action-title"},"Metode pembayaran"),a("div",{class:"action-sub text-muted"},"Kelola QRIS, e-wallet, dan bank.")],-1),a("i",{class:"bi bi-chevron-right action-arrow","aria-hidden":"true"},null,-1)])]),_:1})])])])])]),_($,{name:"ad-modal"},{default:g(()=>[x.value?(e(),l("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Scan lagu dari folder",onClick:z(A,["self"])},[a("div",{class:f(["modal-content",{"is-loading":u.value}])},[a("div",{class:"modal-header"},[t[27]||(t[27]=a("div",{class:"modal-title"},[a("div",{class:"modal-icon","aria-hidden":"true"},[a("i",{class:"bi bi-folder2-open"})]),a("div",{class:"modal-title__copy"},[a("h3",null,"Scan Lagu dari Folder"),a("p",{class:"text-muted"},[r("Mendeteksi lagu baru dari "),a("code",null,"./uploads/videos"),r(" (termasuk subfolder).")])])],-1)),a("button",{class:"icon-close",type:"button",onClick:A,"aria-label":"Tutup modal"},[...t[26]||(t[26]=[a("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])])]),a("div",ja,[t[33]||(t[33]=a("div",{class:"modal-note"},[a("i",{class:"bi bi-info-circle-fill","aria-hidden":"true"}),a("div",{class:"modal-note__copy"},[a("div",{class:"modal-note__title"},"Format file yang di-scan"),a("div",{class:"modal-note__text text-muted"},[a("code",null,"JUDUL LAGU#NAMA ARTIS#NEGARA.mp4"),r(" atau "),a("code",null,".mpg"),r(". File lain akan diabaikan. ")])])],-1)),a("label",Ea,[J(a("input",{class:"toggle",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>D.value=s),disabled:u.value},null,8,Va),[[O,D.value]]),t[28]||(t[28]=a("span",{class:"toggle-ui","aria-hidden":"true"},null,-1)),t[29]||(t[29]=a("span",{class:"toggle-copy"},[a("span",{class:"toggle-title"},"Dry Run"),a("span",{class:"toggle-sub text-muted"},"Preview dulu tanpa menambah ke database.")],-1))]),h.value?(e(),l("div",Ga,[t[30]||(t[30]=a("i",{class:"bi bi-exclamation-triangle-fill","aria-hidden":"true"},null,-1)),a("span",null,i(h.value),1)])):b("",!0),c.value?(e(),l("div",{key:1,class:f(["status-banner",c.value.success?"is-success":"is-info"]),role:"status","aria-live":"polite"},[a("i",{class:f(c.value.success?"bi bi-check-circle-fill":"bi bi-info-circle-fill"),"aria-hidden":"true"},null,2),a("div",Ka,[t[31]||(t[31]=a("div",{class:"status-title"},"Hasil scan",-1)),a("div",Ha," Total: "+i(c.value.total)+" · Ditambahkan: "+i(c.value.added)+" · Dilewati: "+i(c.value.skipped)+" · Diabaikan: "+i(c.value.ignored||0),1)])],2)):b("",!0),u.value?(e(),l("div",Qa,[...t[32]||(t[32]=[a("span",{class:"spinner","aria-hidden":"true"},null,-1),a("span",{class:"text-muted"},"Scanning… mohon tunggu",-1)])])):b("",!0)]),a("div",za,[a("button",{class:"btn btn-ghost",type:"button",onClick:A,disabled:u.value}," Tutup ",8,Ja),a("button",{class:"btn btn-primary",type:"button",onClick:j,disabled:u.value},[t[34]||(t[34]=a("i",{class:"bi bi-search","aria-hidden":"true"},null,-1)),r(" "+i(u.value?"Scanning…":"Mulai Scan"),1)],8,Oa)])],2)])):b("",!0)]),_:1})])}}},Xa=V($a,[["__scopeId","data-v-6c1b2cb4"]]);export{Xa as default};
