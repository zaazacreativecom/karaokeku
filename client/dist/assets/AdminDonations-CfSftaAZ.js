import{_ as Ae,r as p,c as F,y as ye,o as Pe,N as Me,a as n,d as e,i as m,e as Q,t as l,f as r,w as X,g as Ve,F as _,k as S,n as v,b as _e,B as Y,D as Ce,C as we,m as De,T as ne,L as Z,v as o}from"./index-Btw_uZyE.js";const je={class:"admin-donations"},Be={class:"page-header reveal",style:{"--d":"0ms"}},Fe={class:"page-header__copy"},Ie={class:"page-meta text-muted"},Re={class:"page-header__actions"},Ue=["disabled"],Ee={key:0,class:"alert-card alert-card--danger reveal",style:{"--d":"60ms"},role:"status"},He={class:"alert-body"},Ge={class:"alert-text text-muted"},We={class:"stats-grid reveal",style:{"--d":"90ms"},"aria-label":"Ringkasan donasi"},qe={class:"stat-icon","aria-hidden":"true"},ze={class:"stat-body"},Je={class:"stat-label"},Ke={class:"stat-value"},Oe={key:0,class:"stat-hint text-muted"},Qe=["onClick"],Xe={class:"panel filters-panel reveal",style:{"--d":"120ms"},"aria-label":"Filter donasi"},Ye={class:"panel-body"},Ze={class:"filters-row"},et={class:"field"},tt=["disabled"],st={class:"field field--grow"},at={class:"search-control"},lt={class:"field"},it=["disabled"],nt={class:"chips-row","aria-label":"Shortcut filter"},ot={class:"chip-count"},dt={class:"chip-count"},rt={class:"chip-count"},ut={class:"chip-count"},ct={class:"panel donations-panel reveal",style:{"--d":"150ms"},"aria-label":"Daftar donasi"},vt={class:"panel-header"},bt={class:"panel-title"},mt={class:"panel-title__copy"},pt={class:"text-muted"},kt={class:"panel-actions"},ft=["disabled"],gt={class:"panel-body"},ht={class:"table-wrap","aria-label":"Tabel donasi"},yt={class:"donations-table"},_t={class:"td-date"},Ct=["title"],wt=["title"],Dt={class:"td-amount"},xt={class:"amount-value"},Tt=["title"],$t={class:"td-actions"},Lt={class:"row-actions"},Nt=["onClick"],St=["onClick"],At=["onClick"],Pt=["onClick"],Mt={key:0,class:"tr-empty"},Vt={class:"donation-cards","aria-label":"Daftar donasi (mobile)"},jt={class:"donation-card__top"},Bt={class:"donation-card__who"},Ft=["title"],It=["title"],Rt={class:"donation-card__amount"},Ut={class:"donation-card__meta"},Et={class:"pill pill--soft"},Ht={key:0,class:"donation-card__message"},Gt={class:"message-text"},Wt={class:"donation-card__actions"},qt=["onClick"],zt=["onClick"],Jt=["onClick"],Kt=["onClick"],Ot={key:0,class:"empty-state"},Qt={key:0,class:"pagination-row"},Xt=["disabled"],Yt={class:"page-indicator text-muted"},Zt=["disabled"],es={class:"modal-content"},ts={class:"modal-body"},ss={class:"detail-grid"},as={class:"detail-card"},ls={class:"detail-value"},is={class:"detail-sub text-muted"},ns={class:"detail-card detail-card--amount"},os={class:"detail-value detail-value--amount"},ds={class:"detail-sub text-muted"},rs={class:"detail-card"},us={class:"detail-value"},cs={class:"detail-sub text-muted"},vs={key:0,class:"detail-section"},bs={class:"message-box"},ms={key:1,class:"detail-section"},ps={class:"proof-box"},ks=["href"],fs={class:"proof-preview"},gs=["src"],hs={class:"detail-section"},ys={class:"modal-footer"},_s={class:"modal-content modal-content--confirm"},Cs={class:"modal-header"},ws={class:"modal-title"},Ds={class:"modal-icon","aria-hidden":"true"},xs={class:"modal-title__copy"},Ts={class:"text-muted"},$s={class:"modal-body"},Ls={class:"confirm-summary"},Ns={class:"confirm-item"},Ss={class:"confirm-value"},As={class:"confirm-item"},Ps={class:"confirm-value"},Ms={class:"confirm-item"},Vs={class:"confirm-value"},js={class:"modal-footer"},Bs=["disabled"],Fs=["disabled"],Is={key:0,class:"spinner","aria-hidden":"true"},Rs={__name:"AdminDonations",setup(Us){const C="/api",I=p([]),u=p({total:0,page:1,limit:20,totalPages:1}),k=p({total:0,pending:0,verified:0,rejected:0,totalAmount:0}),f=p(!0),R=p(!0),x=p(""),ee=p(Date.now()),g=p(""),A=p(""),T=p(!1),b=p(null),U=p(""),h=p(!1),c=p({open:!1,action:"",status:"",donation:null,title:"",message:"",confirmLabel:"",icon:"bi bi-exclamation-triangle-fill",variant:"btn-primary",useNotes:!1}),te=p(!1),oe=p(""),E=p("success");let P=null;const de=F({get:()=>u.value.limit||20,set:a=>{u.value.page=1,u.value.limit=Number(a)||20}}),H=F(()=>f.value||R.value),w=a=>{const t=Number(a)||0;return new Intl.NumberFormat("id-ID").format(t)},M=a=>new Intl.NumberFormat("id-ID").format(Number(a)||0),xe=F(()=>{const a=new Date(ee.value||Date.now());return new Intl.DateTimeFormat("id-ID",{hour:"2-digit",minute:"2-digit"}).format(a)}),se=a=>a?new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-",G=a=>({pending:"Pending",verified:"Terverifikasi",rejected:"Ditolak"})[a]||a||"-",ae=a=>a==="verified"?"pill--success":a==="rejected"?"pill--danger":"pill--warning",le=a=>a==="verified"?"bi bi-check-circle-fill":a==="rejected"?"bi bi-x-circle-fill":"bi bi-hourglass-split",y=a=>{const t=String(a||"").toLowerCase();return{qris:{label:"QRIS",icon:"bi bi-qr-code-scan",tone:"pill--cyan"},gopay:{label:"GoPay",icon:"bi bi-wallet2",tone:"pill--green"},ovo:{label:"OVO",icon:"bi bi-wallet2",tone:"pill--blue"},dana:{label:"DANA",icon:"bi bi-wallet2",tone:"pill--cyan"},shopeepay:{label:"ShopeePay",icon:"bi bi-wallet2",tone:"pill--blue"},bca:{label:"BCA",icon:"bi bi-bank2",tone:"pill--blue"},bni:{label:"BNI",icon:"bi bi-bank2",tone:"pill--green"},mandiri:{label:"Mandiri",icon:"bi bi-bank2",tone:"pill--cyan"},other:{label:"Lainnya",icon:"bi bi-credit-card-2-front-fill",tone:"pill--soft"}}[t]||{label:a||"-",icon:"bi bi-credit-card-2-front-fill",tone:"pill--soft"}},D=a=>{var t;return((t=a==null?void 0:a.donor)==null?void 0:t.name)||(a==null?void 0:a.donor_name)||"Anonim"},$=a=>{var t;return((t=a==null?void 0:a.donor)==null?void 0:t.email)||"-"},Te=F(()=>[{key:"total",label:"Total Donasi",value:k.value.total||0,icon:"bi bi-collection",tone:"tone-cyan",statusFilter:"",linkLabel:"Lihat"},{key:"pending",label:"Pending",value:k.value.pending||0,icon:"bi bi-hourglass-split",tone:"tone-blue",statusFilter:"pending",linkLabel:"Review"},{key:"verified",label:"Terverifikasi",value:k.value.verified||0,icon:"bi bi-check-circle-fill",tone:"tone-green",statusFilter:"verified",linkLabel:"Lihat"},{key:"rejected",label:"Ditolak",value:k.value.rejected||0,icon:"bi bi-x-circle-fill",tone:"tone-blue",statusFilter:"rejected",linkLabel:"Lihat"},{key:"totalAmount",label:"Terkumpul",value:k.value.totalAmount||0,icon:"bi bi-cash-coin",tone:"tone-green",format:"currency",hint:"Hanya donasi terverifikasi"}]),V=F(()=>{const a=Array.isArray(I.value)?I.value:[],t=String(A.value||"").trim().toLowerCase();return t?a.filter(i=>[D(i),$(i),i==null?void 0:i.method,G(i==null?void 0:i.status),String((i==null?void 0:i.amount)??""),i==null?void 0:i.message,i==null?void 0:i.admin_notes].filter(Boolean).join(" ").toLowerCase().includes(t)):a}),W=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),q=async()=>{var a,t;f.value=!0,x.value="";try{const i={status:g.value||void 0,page:u.value.page||1,limit:u.value.limit||20},s=await Z.get(`${C}/donations`,{...W(),params:i});I.value=s.data.data||[];const d=s.data.meta||{};u.value={total:Number(d.total)||0,page:Number(d.page)||1,limit:Number(d.limit)||u.value.limit||20,totalPages:Number(d.totalPages)||1},ee.value=Date.now()}catch(i){console.error("Error fetching donations:",i),x.value=((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||"Gagal memuat daftar donasi",I.value=[]}finally{f.value=!1}},$e=async()=>{var a,t;R.value=!0,x.value="";try{const i=await Z.get(`${C}/donations/stats`,W());k.value=i.data.data||{total:0,pending:0,verified:0,rejected:0,totalAmount:0},ee.value=Date.now()}catch(i){console.error("Error fetching stats:",i),x.value=((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)||"Gagal memuat statistik donasi"}finally{R.value=!1}},L=async()=>{await Promise.all([$e(),q()])},j=a=>{g.value=a};ye(g,()=>{u.value.page=1,q()}),ye(()=>u.value.limit,()=>{u.value.page=1,q()});const re=a=>{const t=Math.max(1,Math.min(Number(a)||1,u.value.totalPages||1));t!==u.value.page&&(u.value.page=t,q())},ue=a=>{if(!a)return"";let t=String(a).trim();if(t.includes("localhost")&&(t=t.replace(/^http(s)?:\/\/localhost(:\d+)?/,"")),t.startsWith("http"))return t;const i=C.endsWith("/api")?C.replace("/api",""):C;return i.includes("localhost")?t.startsWith("/")?t:`/${t}`:`${i}${t.startsWith("/")?"":"/"}${t}`},z=(a,t="success")=>{oe.value=a,E.value=t,te.value=!0,P&&clearTimeout(P),P=setTimeout(()=>{te.value=!1},2500)},ce=a=>{b.value=a,U.value=(a==null?void 0:a.admin_notes)||"",T.value=!0},J=()=>{T.value=!1},Le=async(a,t,i)=>{var s,d;if(a!=null&&a.id)try{await Z.put(`${C}/donations/${a.id}/verify`,{status:t,admin_notes:i||""},W()),z(t==="verified"?"Donasi berhasil diverifikasi":"Donasi ditolak","success"),T.value=!1,await L()}catch(B){console.error("Error verifying:",B),z(((d=(s=B.response)==null?void 0:s.data)==null?void 0:d.message)||"Gagal memproses donasi","danger")}},Ne=async a=>{var t,i,s;if(a!=null&&a.id)try{await Z.delete(`${C}/donations/${a.id}`,W()),z("Donasi berhasil dihapus","success"),((t=b.value)==null?void 0:t.id)===a.id&&(T.value=!1),await L()}catch(d){console.error("Error deleting:",d),z(((s=(i=d.response)==null?void 0:i.data)==null?void 0:s.message)||"Gagal menghapus donasi","danger")}},ie=a=>{a&&(c.value={open:!0,action:"delete",status:"",donation:a,title:"Hapus donasi ini?",message:"Tindakan ini tidak bisa dibatalkan.",confirmLabel:"Hapus",icon:"bi bi-trash",variant:"btn-danger",useNotes:!1})},N=(a,t,i)=>{if(!a)return;const s=t==="verified";c.value={open:!0,action:"verify",status:t,donation:a,title:s?"Verifikasi donasi?":"Tolak donasi?",message:s?"Pastikan bukti transfer valid sebelum menandai sebagai terverifikasi.":"Donasi akan ditandai sebagai ditolak.",confirmLabel:s?"Verifikasi":"Tolak",icon:s?"bi bi-check-lg":"bi bi-x-lg",variant:s?"btn-success":"btn-danger",useNotes:!!i}},K=()=>{h.value||(c.value.open=!1)},Se=async()=>{if(!(!c.value.open||h.value)){h.value=!0;try{if(c.value.action==="delete")await Ne(c.value.donation);else if(c.value.action==="verify"){const a=c.value.useNotes?U.value:"";await Le(c.value.donation,c.value.status,a)}}finally{h.value=!1,c.value.open=!1}}},ve=a=>{if(a.key==="Escape"){if(c.value.open)return K();if(T.value)return J()}};return Pe(()=>{L(),window.addEventListener("keydown",ve)}),Me(()=>{window.removeEventListener("keydown",ve),P&&clearTimeout(P)}),(a,t)=>{const i=Ve("router-link");return o(),n("div",je,[e("header",Be,[e("div",Fe,[t[15]||(t[15]=e("div",{class:"page-badge"},[e("i",{class:"bi bi-heart-fill","aria-hidden":"true"}),e("span",null,"Donasi")],-1)),t[16]||(t[16]=e("h1",null,"Kelola Donasi",-1)),t[17]||(t[17]=e("p",{class:"text-muted"}," Verifikasi donasi, cek bukti transfer, dan kelola catatan admin dengan cepat. ",-1)),e("div",Ie,[t[14]||(t[14]=e("i",{class:"bi bi-clock","aria-hidden":"true"},null,-1)),e("span",null,"Terakhir update: "+l(xe.value),1)])]),e("div",Re,[e("button",{class:"btn btn-ghost",type:"button",onClick:L,disabled:H.value},[t[18]||(t[18]=e("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1)),r(" "+l(H.value?"Memuat…":"Refresh"),1)],8,Ue),Q(i,{to:"/admin/payment-methods",class:"btn btn-primary"},{default:X(()=>[...t[19]||(t[19]=[e("i",{class:"bi bi-credit-card-2-front-fill","aria-hidden":"true"},null,-1),r(" Metode Pembayaran ",-1)])]),_:1})])]),x.value&&!H.value?(o(),n("div",Ee,[t[22]||(t[22]=e("div",{class:"alert-icon","aria-hidden":"true"},[e("i",{class:"bi bi-exclamation-triangle-fill"})],-1)),e("div",He,[t[20]||(t[20]=e("div",{class:"alert-title"},"Gagal memuat donasi",-1)),e("div",Ge,l(x.value),1)]),e("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:L},[...t[21]||(t[21]=[e("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1),r(" Coba lagi ",-1)])])])):m("",!0),e("section",We,[R.value?(o(),n(_,{key:0},S(5,s=>e("div",{key:s,class:"stat-card stat-card--skeleton"},[...t[23]||(t[23]=[e("div",{class:"stat-icon loading-skeleton","aria-hidden":"true"},null,-1),e("div",{class:"stat-body"},[e("div",{class:"skeleton-line loading-skeleton"}),e("div",{class:"skeleton-line skeleton-line--lg loading-skeleton"})],-1)])])),64)):(o(!0),n(_,{key:1},S(Te.value,s=>(o(),n("div",{key:s.key,class:v(["stat-card",s.tone])},[e("div",qe,[e("i",{class:v(s.icon)},null,2)]),e("div",ze,[e("div",Je,l(s.label),1),e("div",Ke,l(s.format==="currency"?`Rp ${M(s.value)}`:w(s.value)),1),s.hint?(o(),n("div",Oe,l(s.hint),1)):m("",!0)]),s.statusFilter!==void 0?(o(),n("button",{key:0,class:"stat-link",type:"button",onClick:d=>j(s.statusFilter)},[e("span",null,l(s.linkLabel),1),t[24]||(t[24]=e("i",{class:"bi bi-arrow-right","aria-hidden":"true"},null,-1))],8,Qe)):m("",!0)],2))),128))]),e("section",Xe,[t[36]||(t[36]=_e('<div class="panel-header panel-header--compact" data-v-e7b4039d><div class="panel-title" data-v-e7b4039d><div class="panel-icon panel-icon--soft" aria-hidden="true" data-v-e7b4039d><i class="bi bi-funnel-fill" data-v-e7b4039d></i></div><div class="panel-title__copy" data-v-e7b4039d><h2 data-v-e7b4039d>Filter</h2><p class="text-muted" data-v-e7b4039d>Cari cepat dan fokus ke status yang kamu butuhkan.</p></div></div></div>',1)),e("div",Ye,[e("div",Ze,[e("div",et,[t[26]||(t[26]=e("label",{class:"field-label",for:"donation-status"},"Status",-1)),Y(e("select",{id:"donation-status","onUpdate:modelValue":t[0]||(t[0]=s=>g.value=s),class:"form-select",disabled:f.value},[...t[25]||(t[25]=[e("option",{value:""},"Semua",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"verified"},"Terverifikasi",-1),e("option",{value:"rejected"},"Ditolak",-1)])],8,tt),[[Ce,g.value]])]),e("div",st,[t[29]||(t[29]=e("label",{class:"field-label",for:"donation-search"},"Cari",-1)),e("div",at,[t[28]||(t[28]=e("i",{class:"bi bi-search","aria-hidden":"true"},null,-1)),Y(e("input",{id:"donation-search","onUpdate:modelValue":t[1]||(t[1]=s=>A.value=s),type:"text",class:"form-control",placeholder:"Cari nama, email, metode, nominal…"},null,512),[[we,A.value]]),A.value?(o(),n("button",{key:0,class:"icon-clear",type:"button",onClick:t[2]||(t[2]=s=>A.value=""),"aria-label":"Hapus pencarian"},[...t[27]||(t[27]=[e("i",{class:"bi bi-x-circle-fill","aria-hidden":"true"},null,-1)])])):m("",!0)])]),e("div",lt,[t[31]||(t[31]=e("label",{class:"field-label",for:"donation-limit"},"Per halaman",-1)),Y(e("select",{id:"donation-limit","onUpdate:modelValue":t[3]||(t[3]=s=>de.value=s),class:"form-select",disabled:f.value},[...t[30]||(t[30]=[e("option",{value:10},"10",-1),e("option",{value:20},"20",-1),e("option",{value:50},"50",-1)])],8,it),[[Ce,de.value,void 0,{number:!0}]])])]),e("div",nt,[e("button",{class:v(["chip",{on:g.value===""}]),type:"button",onClick:t[4]||(t[4]=s=>j(""))},[t[32]||(t[32]=e("span",null,"Semua",-1)),e("span",ot,l(w(k.value.total||0)),1)],2),e("button",{class:v(["chip",{on:g.value==="pending"}]),type:"button",onClick:t[5]||(t[5]=s=>j("pending"))},[t[33]||(t[33]=e("span",null,"Pending",-1)),e("span",dt,l(w(k.value.pending||0)),1)],2),e("button",{class:v(["chip",{on:g.value==="verified"}]),type:"button",onClick:t[6]||(t[6]=s=>j("verified"))},[t[34]||(t[34]=e("span",null,"Terverifikasi",-1)),e("span",rt,l(w(k.value.verified||0)),1)],2),e("button",{class:v(["chip",{on:g.value==="rejected"}]),type:"button",onClick:t[7]||(t[7]=s=>j("rejected"))},[t[35]||(t[35]=e("span",null,"Ditolak",-1)),e("span",ut,l(w(k.value.rejected||0)),1)],2)])])]),e("section",ct,[e("div",vt,[e("div",bt,[t[41]||(t[41]=e("div",{class:"panel-icon","aria-hidden":"true"},[e("i",{class:"bi bi-receipt-cutoff"})],-1)),e("div",mt,[t[40]||(t[40]=e("h2",null,"Daftar Donasi",-1)),e("p",pt,[t[37]||(t[37]=r(" Menampilkan ",-1)),e("strong",null,l(w(V.value.length)),1),t[38]||(t[38]=r(" dari ",-1)),e("strong",null,l(w(u.value.total)),1),t[39]||(t[39]=r(" data. ",-1))])])]),e("div",kt,[e("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:L,disabled:H.value},[...t[42]||(t[42]=[e("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1),r(" Refresh ",-1)])],8,ft)])]),e("div",gt,[e("div",ht,[e("table",yt,[t[49]||(t[49]=e("thead",null,[e("tr",null,[e("th",null,"Tanggal"),e("th",null,"Donatur"),e("th",null,"Jumlah"),e("th",null,"Metode"),e("th",null,"Status"),e("th",{class:"th-actions"},"Aksi")])],-1)),e("tbody",null,[f.value?(o(),n(_,{key:0},S(6,s=>e("tr",{key:s,class:"tr-skeleton"},[...t[43]||(t[43]=[e("td",null,[e("div",{class:"skeleton-cell loading-skeleton"})],-1),e("td",null,[e("div",{class:"skeleton-cell loading-skeleton"})],-1),e("td",null,[e("div",{class:"skeleton-cell loading-skeleton"})],-1),e("td",null,[e("div",{class:"skeleton-cell loading-skeleton"})],-1),e("td",null,[e("div",{class:"skeleton-cell loading-skeleton"})],-1),e("td",null,[e("div",{class:"skeleton-cell loading-skeleton"})],-1)])])),64)):(o(),n(_,{key:1},[(o(!0),n(_,null,S(V.value,s=>(o(),n("tr",{key:s.id},[e("td",_t,l(se(s.created_at)),1),e("td",null,[e("div",{class:"donor-name",title:D(s)},l(D(s)),9,Ct),e("div",{class:"donor-email text-muted",title:$(s)},l($(s)),9,wt)]),e("td",Dt,[e("div",xt,"Rp "+l(M(s.amount)),1),s.message?(o(),n("div",{key:0,class:"amount-note text-muted",title:s.message},"Ada pesan",8,Tt)):m("",!0)]),e("td",null,[e("span",{class:v(["pill",y(s.method).tone])},[e("i",{class:v(y(s.method).icon),"aria-hidden":"true"},null,2),r(" "+l(y(s.method).label),1)],2)]),e("td",null,[e("span",{class:v(["pill",ae(s.status)])},[e("i",{class:v(le(s.status)),"aria-hidden":"true"},null,2),r(" "+l(G(s.status)),1)],2)]),e("td",$t,[e("div",Lt,[e("button",{class:"btn btn-ghost btn-sm btn-icon",type:"button",onClick:d=>ce(s),"aria-label":"Detail"},[...t[44]||(t[44]=[e("i",{class:"bi bi-eye","aria-hidden":"true"},null,-1)])],8,Nt),s.status==="pending"?(o(),n("button",{key:0,class:"btn btn-success btn-sm btn-icon",type:"button",onClick:d=>N(s,"verified",!1),"aria-label":"Verifikasi"},[...t[45]||(t[45]=[e("i",{class:"bi bi-check-lg","aria-hidden":"true"},null,-1)])],8,St)):m("",!0),s.status==="pending"?(o(),n("button",{key:1,class:"btn btn-danger btn-sm btn-icon",type:"button",onClick:d=>N(s,"rejected",!1),"aria-label":"Tolak"},[...t[46]||(t[46]=[e("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])],8,At)):m("",!0),e("button",{class:"btn btn-ghost btn-sm btn-icon btn-icon--danger",type:"button",onClick:d=>ie(s),"aria-label":"Hapus"},[...t[47]||(t[47]=[e("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])],8,Pt)])])]))),128)),V.value.length?m("",!0):(o(),n("tr",Mt,[...t[48]||(t[48]=[e("td",{colspan:"6"},[e("div",{class:"empty-state"},[e("div",{class:"empty-icon","aria-hidden":"true"},[e("i",{class:"bi bi-inbox"})]),e("h3",null,"Tidak ada donasi"),e("p",{class:"text-muted"},"Coba ubah filter status atau kata kunci pencarian.")])],-1)])]))],64))])])]),e("div",Vt,[f.value?(o(),n(_,{key:0},S(6,s=>e("div",{key:s,class:"donation-card donation-card--skeleton"},[...t[50]||(t[50]=[_e('<div class="skeleton-line loading-skeleton" data-v-e7b4039d></div><div class="skeleton-line skeleton-line--sm loading-skeleton" data-v-e7b4039d></div><div class="skeleton-chip-row" data-v-e7b4039d><div class="skeleton-chip loading-skeleton" data-v-e7b4039d></div><div class="skeleton-chip loading-skeleton" data-v-e7b4039d></div><div class="skeleton-chip loading-skeleton" data-v-e7b4039d></div></div><div class="skeleton-btn-row" data-v-e7b4039d><div class="skeleton-btn loading-skeleton" data-v-e7b4039d></div><div class="skeleton-btn loading-skeleton" data-v-e7b4039d></div></div>',4)])])),64)):(o(),n(_,{key:1},[(o(!0),n(_,null,S(V.value,s=>(o(),n("div",{key:s.id,class:"donation-card"},[e("div",jt,[e("div",Bt,[e("div",{class:"donor-name",title:D(s)},l(D(s)),9,Ft),e("div",{class:"donor-email text-muted",title:$(s)},l($(s)),9,It)]),e("div",Rt,"Rp "+l(M(s.amount)),1)]),e("div",Ut,[e("span",{class:v(["pill",ae(s.status)])},[e("i",{class:v(le(s.status)),"aria-hidden":"true"},null,2),r(" "+l(G(s.status)),1)],2),e("span",{class:v(["pill",y(s.method).tone])},[e("i",{class:v(y(s.method).icon),"aria-hidden":"true"},null,2),r(" "+l(y(s.method).label),1)],2),e("span",Et,[t[51]||(t[51]=e("i",{class:"bi bi-calendar2","aria-hidden":"true"},null,-1)),r(" "+l(se(s.created_at)),1)])]),s.message?(o(),n("div",Ht,[t[52]||(t[52]=e("div",{class:"message-label text-muted"},"Pesan",-1)),e("div",Gt,l(s.message),1)])):m("",!0),e("div",Wt,[e("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:d=>ce(s)},[...t[53]||(t[53]=[e("i",{class:"bi bi-eye","aria-hidden":"true"},null,-1),r(" Detail ",-1)])],8,qt),e("button",{class:"btn btn-ghost btn-sm btn-icon btn-icon--danger",type:"button",onClick:d=>ie(s),"aria-label":"Hapus"},[...t[54]||(t[54]=[e("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])],8,zt),s.status==="pending"?(o(),n("button",{key:0,class:"btn btn-success btn-sm",type:"button",onClick:d=>N(s,"verified",!1)},[...t[55]||(t[55]=[e("i",{class:"bi bi-check-lg","aria-hidden":"true"},null,-1),r(" Verifikasi ",-1)])],8,Jt)):m("",!0),s.status==="pending"?(o(),n("button",{key:1,class:"btn btn-danger btn-sm",type:"button",onClick:d=>N(s,"rejected",!1)},[...t[56]||(t[56]=[e("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1),r(" Tolak ",-1)])],8,Kt)):m("",!0)])]))),128)),V.value.length?m("",!0):(o(),n("div",Ot,[...t[57]||(t[57]=[e("div",{class:"empty-icon","aria-hidden":"true"},[e("i",{class:"bi bi-inbox"})],-1),e("h3",null,"Tidak ada donasi",-1),e("p",{class:"text-muted"},"Coba ubah filter status atau kata kunci pencarian.",-1)])]))],64))]),u.value.totalPages>1?(o(),n("div",Qt,[e("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:t[8]||(t[8]=s=>re(u.value.page-1)),disabled:f.value||u.value.page<=1},[...t[58]||(t[58]=[e("i",{class:"bi bi-chevron-left","aria-hidden":"true"},null,-1),r(" Sebelumnya ",-1)])],8,Xt),e("div",Yt,[t[59]||(t[59]=r(" Halaman ",-1)),e("strong",null,l(u.value.page),1),r(" / "+l(u.value.totalPages),1)]),e("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:t[9]||(t[9]=s=>re(u.value.page+1)),disabled:f.value||u.value.page>=u.value.totalPages},[...t[60]||(t[60]=[r(" Berikutnya ",-1),e("i",{class:"bi bi-chevron-right","aria-hidden":"true"},null,-1)])],8,Zt)])):m("",!0)])]),Q(ne,{name:"ad-modal"},{default:X(()=>{var s,d,B,be,me,pe,ke,fe,ge,he;return[T.value?(o(),n("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Detail donasi",onClick:De(J,["self"])},[e("div",es,[e("div",{class:"modal-header"},[t[62]||(t[62]=e("div",{class:"modal-title"},[e("div",{class:"modal-icon","aria-hidden":"true"},[e("i",{class:"bi bi-receipt"})]),e("div",{class:"modal-title__copy"},[e("h3",null,"Detail Donasi"),e("p",{class:"text-muted"},"Periksa informasi dan bukti transfer sebelum verifikasi.")])],-1)),e("button",{class:"icon-close",type:"button",onClick:J,"aria-label":"Tutup modal"},[...t[61]||(t[61]=[e("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])])]),e("div",ts,[e("div",ss,[e("div",as,[t[63]||(t[63]=e("div",{class:"detail-label"},"Donatur",-1)),e("div",ls,l(D(b.value)),1),e("div",is,l($(b.value)),1)]),e("div",ns,[t[64]||(t[64]=e("div",{class:"detail-label"},"Jumlah",-1)),e("div",os,"Rp "+l(M((s=b.value)==null?void 0:s.amount)),1),e("div",ds,l(y((d=b.value)==null?void 0:d.method).label),1)]),e("div",rs,[t[65]||(t[65]=e("div",{class:"detail-label"},"Status",-1)),e("div",us,[e("span",{class:v(["pill",ae((B=b.value)==null?void 0:B.status)])},[e("i",{class:v(le((be=b.value)==null?void 0:be.status)),"aria-hidden":"true"},null,2),r(" "+l(G((me=b.value)==null?void 0:me.status)),1)],2)]),e("div",cs,l(se((pe=b.value)==null?void 0:pe.created_at)),1)])]),(ke=b.value)!=null&&ke.message?(o(),n("div",vs,[t[66]||(t[66]=e("div",{class:"section-title"},"Pesan Donatur",-1)),e("div",bs,l(b.value.message),1)])):m("",!0),(fe=b.value)!=null&&fe.proof_url?(o(),n("div",ms,[t[68]||(t[68]=e("div",{class:"section-title"},"Bukti Transfer",-1)),e("div",ps,[e("a",{href:ue(b.value.proof_url),target:"_blank",rel:"noreferrer",class:"btn btn-ghost btn-sm"},[...t[67]||(t[67]=[e("i",{class:"bi bi-box-arrow-up-right","aria-hidden":"true"},null,-1),r(" Buka bukti ",-1)])],8,ks),e("div",fs,[e("img",{src:ue(b.value.proof_url),alt:"Bukti transfer",loading:"lazy"},null,8,gs)])])])):m("",!0),e("div",hs,[t[69]||(t[69]=e("div",{class:"section-title"},"Catatan Admin",-1)),Y(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=O=>U.value=O),class:"form-control",rows:"3",placeholder:"Tambahkan catatan (opsional)…"},null,512),[[we,U.value]]),t[70]||(t[70]=e("div",{class:"text-muted hint"},"Catatan akan tersimpan saat kamu verifikasi / tolak donasi.",-1))])]),e("div",ys,[e("button",{class:"btn btn-ghost",type:"button",onClick:J},"Tutup"),e("button",{class:"btn btn-ghost btn-icon btn-icon--danger",type:"button",onClick:t[11]||(t[11]=O=>ie(b.value)),"aria-label":"Hapus donasi"},[...t[71]||(t[71]=[e("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])]),((ge=b.value)==null?void 0:ge.status)==="pending"?(o(),n("button",{key:0,class:"btn btn-danger",type:"button",onClick:t[12]||(t[12]=O=>N(b.value,"rejected",!0))},[...t[72]||(t[72]=[e("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1),r(" Tolak ",-1)])])):m("",!0),((he=b.value)==null?void 0:he.status)==="pending"?(o(),n("button",{key:1,class:"btn btn-success",type:"button",onClick:t[13]||(t[13]=O=>N(b.value,"verified",!0))},[...t[73]||(t[73]=[e("i",{class:"bi bi-check-lg","aria-hidden":"true"},null,-1),r(" Verifikasi ",-1)])])):m("",!0)])])])):m("",!0)]}),_:1}),Q(ne,{name:"ad-modal"},{default:X(()=>{var s,d;return[c.value.open?(o(),n("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Konfirmasi aksi",onClick:De(K,["self"])},[e("div",_s,[e("div",Cs,[e("div",ws,[e("div",Ds,[e("i",{class:v(c.value.icon)},null,2)]),e("div",xs,[e("h3",null,l(c.value.title),1),e("p",Ts,l(c.value.message),1)])]),e("button",{class:"icon-close",type:"button",onClick:K,"aria-label":"Tutup konfirmasi"},[...t[74]||(t[74]=[e("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])])]),e("div",$s,[e("div",Ls,[e("div",Ns,[t[75]||(t[75]=e("div",{class:"confirm-label text-muted"},"Donatur",-1)),e("div",Ss,l(D(c.value.donation)),1)]),e("div",As,[t[76]||(t[76]=e("div",{class:"confirm-label text-muted"},"Jumlah",-1)),e("div",Ps,"Rp "+l(M((s=c.value.donation)==null?void 0:s.amount)),1)]),e("div",Ms,[t[77]||(t[77]=e("div",{class:"confirm-label text-muted"},"Metode",-1)),e("div",Vs,l(y((d=c.value.donation)==null?void 0:d.method).label),1)])])]),e("div",js,[e("button",{class:"btn btn-ghost",type:"button",onClick:K,disabled:h.value},"Batal",8,Bs),e("button",{class:v(["btn",c.value.variant]),type:"button",onClick:Se,disabled:h.value},[h.value?(o(),n("span",Is)):(o(),n("i",{key:1,class:v(c.value.icon),"aria-hidden":"true"},null,2)),r(" "+l(h.value?"Memproses…":c.value.confirmLabel),1)],10,Fs)])])])):m("",!0)]}),_:1}),Q(ne,{name:"ad-toast"},{default:X(()=>[te.value?(o(),n("div",{key:0,class:v(["toast",`toast--${E.value}`]),role:"status","aria-live":"polite"},[e("i",{class:v(E.value==="success"?"bi bi-check-circle-fill":E.value==="danger"?"bi bi-x-circle-fill":"bi bi-info-circle-fill"),"aria-hidden":"true"},null,2),e("span",null,l(oe.value),1)],2)):m("",!0)]),_:1})])}}},Hs=Ae(Rs,[["__scopeId","data-v-e7b4039d"]]);export{Hs as default};
