import{_ as Ie,r as d,c as x,o as Se,N as Qe,a as s,d as a,i as f,e as Y,t as o,f as v,F as Q,k as j,n as c,b as ce,B as g,C as N,P as ve,w as Z,m as ee,D as Ne,T as ae,Q as M,v as i}from"./index-Btw_uZyE.js";const Ue={class:"admin-payment-methods"},$e={class:"page-header reveal",style:{"--d":"0ms"}},De={class:"page-header__copy"},Be={class:"page-meta text-muted"},Fe={class:"page-header__actions"},Ae=["disabled"],Ee={key:0,class:"alert-card alert-card--danger reveal",style:{"--d":"60ms"},role:"status"},Ve={class:"alert-body"},Le={class:"alert-text text-muted"},Pe={class:"stats-grid reveal",style:{"--d":"90ms"},"aria-label":"Ringkasan metode pembayaran"},je={class:"stat-icon","aria-hidden":"true"},We={class:"stat-body"},Ge={class:"stat-label"},Oe={class:"stat-value"},He={key:0,class:"stat-hint text-muted"},Ke=["onClick"],ze={class:"panel filters-panel reveal",style:{"--d":"120ms"},"aria-label":"Filter metode pembayaran"},Je={class:"panel-body"},Xe={class:"filters-row"},Ye={class:"field field--grow"},Ze={class:"search-control"},ea={class:"field field--switch"},aa={class:"switch-label"},ta={class:"chips-row","aria-label":"Shortcut kategori metode"},la={class:"chip-count"},sa={class:"chip-count"},ia={class:"chip-count"},na={class:"chip-count"},oa={class:"panel methods-panel reveal",style:{"--d":"150ms"},"aria-label":"Daftar metode pembayaran"},ra={class:"panel-header"},da={class:"panel-title"},ua={class:"panel-title__copy"},ca={class:"text-muted"},va={class:"panel-body"},ba={class:"methods-grid","aria-label":"Kartu metode pembayaran"},pa={class:"method-top"},fa=["src","alt"],ma={key:1,class:"method-icon","aria-hidden":"true"},ka={class:"method-copy"},ya=["title"],_a={class:"method-sub text-muted"},ga={class:"method-details"},wa={key:0,class:"detail-row"},ha={class:"detail-value"},Ca={class:"detail-row"},qa={class:"detail-value mono"},xa=["onClick","disabled"],Ma={key:0,class:"detail-row"},Ta={class:"detail-value"},Ra={class:"method-actions"},Ia=["onClick"],Sa=["onClick","disabled"],Qa={key:0,class:"spinner","aria-hidden":"true"},Na={key:1,class:"bi bi-upload","aria-hidden":"true"},Ua=["onClick","disabled"],$a={key:0,class:"spinner","aria-hidden":"true"},Da=["onClick"],Ba={class:"method-footer text-muted"},Fa={key:0,class:"empty-state"},Aa={class:"modal-header"},Ea={class:"modal-title"},Va={class:"modal-icon","aria-hidden":"true"},La={class:"modal-title__copy"},Pa={class:"modal-body"},ja={class:"form-grid"},Wa={class:"field"},Ga=["disabled"],Oa={class:"field field--grow"},Ha=["disabled"],Ka={key:0,class:"qr-block"},za={class:"qr-block__head"},Ja={class:"qr-head-actions"},Xa=["disabled"],Ya=["disabled"],Za=["src","alt"],et={key:1,class:"qr-placeholder","aria-hidden":"true"},at={class:"form-grid"},tt={class:"field"},lt=["disabled"],st={key:0,class:"field field--grow"},it={class:"field-label",for:"pm-number"},nt=["disabled"],ot={key:1,class:"field field--grow"},rt=["disabled"],dt={class:"form-grid"},ut={class:"field"},ct=["disabled"],vt={class:"field field--switch"},bt=["disabled"],pt={class:"switch-label"},ft={class:"modal-footer"},mt=["disabled"],kt=["disabled"],yt={key:0,class:"spinner","aria-hidden":"true"},_t={key:1,class:"bi bi-check-lg","aria-hidden":"true"},gt={class:"modal-content modal-content--confirm"},wt={class:"modal-body"},ht={class:"confirm-summary"},Ct={class:"confirm-item"},qt={class:"confirm-value"},xt={class:"confirm-item"},Mt={class:"confirm-value"},Tt={class:"confirm-item"},Rt={class:"confirm-value"},It={class:"modal-footer"},St=["disabled"],Qt=["disabled"],Nt={key:0,class:"spinner","aria-hidden":"true"},Ut={key:1,class:"bi bi-trash","aria-hidden":"true"},$t={__name:"AdminPaymentMethods",setup(Dt){const w=d([]),U=d(!0),W=d(""),te=d(Date.now()),y=d("all"),$=d(""),D=d(!1),B=d(!1),b=d(!1),m=d(null),le=d(null),T=d(null),E=d(null),V=d(null),R=d(null);let q=null;const L=d(null),h=d(!1),_=d({open:!1,method:null}),G=d(!1),se=d(""),P=d("success");let F=null;const O=()=>({type:"qris",name:"",icon:"",account_number:"",account_name:"",sort_order:0,is_active:!0}),n=d(O()),ie=x(()=>W.value||""),H=x(()=>U.value||b.value),C=t=>new Intl.NumberFormat("id-ID").format(Number(t)||0),be=x(()=>{const t=new Date(te.value||Date.now());return new Intl.DateTimeFormat("id-ID",{hour:"2-digit",minute:"2-digit"}).format(t)}),ne=t=>{if(!t)return"";const e=String(t).replace(/^http(s)?:\/\/localhost(:\d+)?/,"");return e.startsWith("http")||e.startsWith("/")?e:`/${e}`},oe=t=>t==="qris"?"QRIS":t==="ewallet"?"E-Wallet":t==="bank"?"Bank":"Lainnya",re=t=>t==="qris"?"bi bi-qr-code":t==="ewallet"?"bi bi-wallet2":t==="bank"?"bi bi-bank":"bi bi-credit-card",pe=t=>t==="qris"?"pill--cyan":t==="ewallet"?"pill--blue":t==="bank"?"pill--green":"pill--soft",fe=t=>t!=null&&t.icon?t.icon:re(t==null?void 0:t.type),I=x(()=>{const t={qris:0,ewallet:0,bank:0};for(const e of w.value)(e==null?void 0:e.type)==="qris"&&(t.qris+=1),(e==null?void 0:e.type)==="ewallet"&&(t.ewallet+=1),(e==null?void 0:e.type)==="bank"&&(t.bank+=1);return t}),me=x(()=>w.value.filter(t=>t==null?void 0:t.is_active).length),K=x(()=>{const t=String($.value||"").trim().toLowerCase();return w.value.filter(e=>y.value!=="all"&&(e==null?void 0:e.type)!==y.value||D.value&&!(e!=null&&e.is_active)?!1:t?[e==null?void 0:e.name,e==null?void 0:e.account_number,e==null?void 0:e.account_name].map(r=>String(r||"").toLowerCase()).join(" ").includes(t):!0).slice().sort((e,l)=>Number((e==null?void 0:e.sort_order)||0)-Number((l==null?void 0:l.sort_order)||0))}),ke=x(()=>[{key:"total",label:"Total Metode",value:w.value.length,icon:"bi bi-wallet2",tone:"tone-cyan"},{key:"active",label:"Aktif",value:me.value,icon:"bi bi-check2-circle",tone:"tone-green"},{key:"qris",label:"QRIS",value:I.value.qris,icon:"bi bi-qr-code",tone:"tone-cyan",typeFilter:"qris"},{key:"ewallet",label:"E-Wallet",value:I.value.ewallet,icon:"bi bi-phone",tone:"tone-blue",typeFilter:"ewallet"},{key:"bank",label:"Bank",value:I.value.bank,icon:"bi bi-bank",tone:"tone-blue",typeFilter:"bank"}]),k=(t,e="success")=>{se.value=t,P.value=e,G.value=!0,F&&clearTimeout(F),F=setTimeout(()=>{G.value=!1},2500)},S=async()=>{var t,e;U.value=!0,W.value="";try{const l=await M.get("/payment-methods/admin");w.value=l.data.data||[],te.value=Date.now()}catch(l){console.error("Error fetching payment methods:",l),W.value=((e=(t=l.response)==null?void 0:t.data)==null?void 0:e.message)||"Gagal memuat metode pembayaran",w.value=[]}finally{U.value=!1}},de=async()=>{await S()},z=()=>{m.value=null,n.value=O(),A(),B.value=!0},ye=t=>{m.value=t,n.value={...O(),type:(t==null?void 0:t.type)||"qris",name:(t==null?void 0:t.name)||"",icon:(t==null?void 0:t.icon)||"",account_number:(t==null?void 0:t.account_number)||"",account_name:(t==null?void 0:t.account_name)||"",sort_order:Number((t==null?void 0:t.sort_order)||0),is_active:!!(t!=null&&t.is_active)},A(),B.value=!0},J=()=>{b.value||(B.value=!1)},_e=()=>{var t;(t=E.value)==null||t.click()},ge=t=>{var l;const e=(l=t.target.files)==null?void 0:l[0];e&&(V.value=e,q&&URL.revokeObjectURL(q),q=URL.createObjectURL(e),R.value=q)},A=()=>{V.value=null,q&&URL.revokeObjectURL(q),q=null,R.value=null,E.value&&(E.value.value="")},we=()=>String(n.value.name||"").trim()?n.value.type!=="qris"&&!String(n.value.account_number||"").trim()?(k("Nomor akun wajib diisi","danger"),!1):n.value.type==="bank"&&!String(n.value.account_name||"").trim()?(k("Atas nama wajib diisi untuk bank","danger"),!1):!0:(k("Nama metode wajib diisi","danger"),!1),he=async()=>{var t,e,l,r;if(we()){b.value=!0;try{let p;if((t=m.value)!=null&&t.id?(await M.put(`/payment-methods/${m.value.id}`,n.value),p=m.value.id):p=(e=(await M.post("/payment-methods",n.value)).data.data)==null?void 0:e.id,n.value.type==="qris"&&V.value&&p){const u=new FormData;u.append("qr_code",V.value),await M.post(`/payment-methods/${p}/qr`,u,{headers:{"Content-Type":"multipart/form-data"}})}k(m.value?"Metode berhasil diupdate":"Metode berhasil ditambahkan","success"),B.value=!1,A(),await S()}catch(p){console.error("Error saving payment method:",p),k(((r=(l=p.response)==null?void 0:l.data)==null?void 0:r.message)||"Gagal menyimpan metode","danger")}finally{b.value=!1}}},Ce=async t=>{var e,l;if(t!=null&&t.id){L.value=t.id;try{await M.put(`/payment-methods/${t.id}/toggle`),k(`Metode ${t.is_active?"dinonaktifkan":"diaktifkan"}`,"success"),await S()}catch(r){console.error("Error toggling payment method:",r),k(((l=(e=r.response)==null?void 0:e.data)==null?void 0:l.message)||"Gagal mengubah status","danger")}finally{L.value=null}}},qe=t=>{_.value={open:!0,method:t}},X=()=>{h.value||(_.value.open=!1)},xe=async()=>{var e,l;if(!_.value.open||h.value)return;const t=_.value.method;if(t!=null&&t.id){h.value=!0;try{await M.delete(`/payment-methods/${t.id}`),k("Metode berhasil dihapus","success"),await S()}catch(r){console.error("Error deleting payment method:",r),k(((l=(e=r.response)==null?void 0:e.data)==null?void 0:l.message)||"Gagal menghapus metode","danger")}finally{h.value=!1,_.value.open=!1}}},Me=t=>{var e;t!=null&&t.id&&(T.value=t.id,(e=le.value)==null||e.click())},Te=async t=>{var r,p,u;const e=(r=t.target.files)==null?void 0:r[0];if(!e||!T.value)return;const l=new FormData;l.append("qr_code",e);try{await M.post(`/payment-methods/${T.value}/qr`,l,{headers:{"Content-Type":"multipart/form-data"}}),k("QR Code berhasil diupload","success"),await S()}catch(ue){console.error("Error uploading QR:",ue),k(((u=(p=ue.response)==null?void 0:p.data)==null?void 0:u.message)||"Gagal upload QR Code","danger")}finally{T.value=null,t.target.value=""}},Re=async t=>{const e=String(t||"").trim();if(e)try{await navigator.clipboard.writeText(e),k("Tersalin ke clipboard","success")}catch(l){console.error("Clipboard error:",l),k("Gagal menyalin","danger")}};return Se(S),Qe(()=>{F&&clearTimeout(F),A()}),(t,e)=>(i(),s("div",Ue,[a("header",$e,[a("div",De,[e[15]||(e[15]=a("div",{class:"page-badge"},[a("i",{class:"bi bi-credit-card-2-front-fill","aria-hidden":"true"}),a("span",null,"Metode Pembayaran")],-1)),e[16]||(e[16]=a("h1",null,"Kelola metode pembayaran dengan rapi",-1)),e[17]||(e[17]=a("p",{class:"text-muted"},"Atur QRIS, E-Wallet, dan transfer bank untuk donasi. Desain konsisten di desktop & mobile.",-1)),a("div",Be,[e[14]||(e[14]=a("i",{class:"bi bi-clock","aria-hidden":"true"},null,-1)),a("span",null,"Terakhir update: "+o(be.value),1)])]),a("div",Fe,[a("button",{class:"btn btn-ghost",type:"button",onClick:de,disabled:H.value},[e[18]||(e[18]=a("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1)),v(" "+o(H.value?"Memuat…":"Refresh"),1)],8,Ae),a("button",{class:"btn btn-primary",type:"button",onClick:z},[...e[19]||(e[19]=[a("i",{class:"bi bi-plus-lg","aria-hidden":"true"},null,-1),v(" Tambah Metode ",-1)])])])]),ie.value&&!H.value?(i(),s("div",Ee,[e[22]||(e[22]=a("div",{class:"alert-icon","aria-hidden":"true"},[a("i",{class:"bi bi-exclamation-triangle-fill"})],-1)),a("div",Ve,[e[20]||(e[20]=a("div",{class:"alert-title"},"Gagal memuat metode pembayaran",-1)),a("div",Le,o(ie.value),1)]),a("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:de},[...e[21]||(e[21]=[a("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1),v(" Coba lagi ",-1)])])])):f("",!0),a("section",Pe,[U.value?(i(),s(Q,{key:0},j(5,l=>a("div",{key:l,class:"stat-card stat-card--skeleton"},[...e[23]||(e[23]=[a("div",{class:"stat-icon loading-skeleton","aria-hidden":"true"},null,-1),a("div",{class:"stat-body"},[a("div",{class:"skeleton-line loading-skeleton"}),a("div",{class:"skeleton-line skeleton-line--lg loading-skeleton"})],-1)])])),64)):(i(!0),s(Q,{key:1},j(ke.value,l=>(i(),s("div",{key:l.key,class:c(["stat-card",l.tone])},[a("div",je,[a("i",{class:c(l.icon)},null,2)]),a("div",We,[a("div",Ge,o(l.label),1),a("div",Oe,o(C(l.value)),1),l.hint?(i(),s("div",He,o(l.hint),1)):f("",!0)]),l.typeFilter?(i(),s("button",{key:0,class:"stat-link",type:"button",onClick:r=>y.value=l.typeFilter},[...e[24]||(e[24]=[a("span",null,"Filter",-1),a("i",{class:"bi bi-arrow-right","aria-hidden":"true"},null,-1)])],8,Ke)):f("",!0)],2))),128))]),a("section",ze,[e[34]||(e[34]=ce('<div class="panel-header panel-header--compact" data-v-f41fafbe><div class="panel-title" data-v-f41fafbe><div class="panel-icon panel-icon--soft" aria-hidden="true" data-v-f41fafbe><i class="bi bi-funnel-fill" data-v-f41fafbe></i></div><div class="panel-title__copy" data-v-f41fafbe><h2 data-v-f41fafbe>Filter</h2><p class="text-muted" data-v-f41fafbe>Cari cepat berdasarkan nama atau nomor akun.</p></div></div></div>',1)),a("div",Je,[a("div",Xe,[a("div",Ye,[e[27]||(e[27]=a("label",{class:"field-label",for:"method-search"},"Cari",-1)),a("div",Ze,[e[26]||(e[26]=a("i",{class:"bi bi-search","aria-hidden":"true"},null,-1)),g(a("input",{id:"method-search","onUpdate:modelValue":e[0]||(e[0]=l=>$.value=l),type:"text",class:"form-control",placeholder:"Cari nama, nomor akun, atas nama…"},null,512),[[N,$.value]]),$.value?(i(),s("button",{key:0,class:"icon-clear",type:"button",onClick:e[1]||(e[1]=l=>$.value=""),"aria-label":"Hapus pencarian"},[...e[25]||(e[25]=[a("i",{class:"bi bi-x-circle-fill","aria-hidden":"true"},null,-1)])])):f("",!0)])]),a("div",ea,[e[29]||(e[29]=a("label",{class:"field-label"},"Nonaktif",-1)),a("label",{class:c(["switch",{on:D.value}])},[g(a("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>D.value=l),type:"checkbox"},null,512),[[ve,D.value]]),e[28]||(e[28]=a("span",{class:"switch-track","aria-hidden":"true"},null,-1)),a("span",aa,o(D.value?"Sembunyikan":"Tampilkan"),1)],2)])]),a("div",ta,[a("button",{class:c(["chip",{on:y.value==="all"}]),type:"button",onClick:e[3]||(e[3]=l=>y.value="all")},[e[30]||(e[30]=a("span",null,"Semua",-1)),a("span",la,o(C(w.value.length)),1)],2),a("button",{class:c(["chip",{on:y.value==="qris"}]),type:"button",onClick:e[4]||(e[4]=l=>y.value="qris")},[e[31]||(e[31]=a("span",null,"QRIS",-1)),a("span",sa,o(C(I.value.qris)),1)],2),a("button",{class:c(["chip",{on:y.value==="ewallet"}]),type:"button",onClick:e[5]||(e[5]=l=>y.value="ewallet")},[e[32]||(e[32]=a("span",null,"E-Wallet",-1)),a("span",ia,o(C(I.value.ewallet)),1)],2),a("button",{class:c(["chip",{on:y.value==="bank"}]),type:"button",onClick:e[6]||(e[6]=l=>y.value="bank")},[e[33]||(e[33]=a("span",null,"Bank",-1)),a("span",na,o(C(I.value.bank)),1)],2)])])]),a("section",oa,[a("div",ra,[a("div",da,[e[39]||(e[39]=a("div",{class:"panel-icon","aria-hidden":"true"},[a("i",{class:"bi bi-wallet2"})],-1)),a("div",ua,[e[38]||(e[38]=a("h2",null,"Daftar Metode",-1)),a("p",ca,[e[35]||(e[35]=v(" Menampilkan ",-1)),a("strong",null,o(C(K.value.length)),1),e[36]||(e[36]=v(" dari ",-1)),a("strong",null,o(C(w.value.length)),1),e[37]||(e[37]=v(" metode. ",-1))])])]),a("div",{class:"panel-actions"},[a("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:z},[...e[40]||(e[40]=[a("i",{class:"bi bi-plus-lg","aria-hidden":"true"},null,-1),v(" Tambah ",-1)])])])]),a("div",va,[a("div",ba,[U.value?(i(),s(Q,{key:0},j(8,l=>a("div",{key:l,class:"method-card method-card--skeleton"},[...e[41]||(e[41]=[ce('<div class="method-skeleton-top" data-v-f41fafbe><div class="loading-skeleton method-skeleton-icon" data-v-f41fafbe></div><div class="method-skeleton-lines" data-v-f41fafbe><div class="loading-skeleton skeleton-line" data-v-f41fafbe></div><div class="loading-skeleton skeleton-line skeleton-line--sm" data-v-f41fafbe></div></div></div><div class="loading-skeleton skeleton-line" data-v-f41fafbe></div><div class="loading-skeleton skeleton-line skeleton-line--sm" data-v-f41fafbe></div><div class="method-skeleton-actions" data-v-f41fafbe><div class="loading-skeleton method-skeleton-btn" data-v-f41fafbe></div><div class="loading-skeleton method-skeleton-btn" data-v-f41fafbe></div></div>',4)])])),64)):(i(),s(Q,{key:1},[(i(!0),s(Q,null,j(K.value,l=>(i(),s("div",{key:l.id,class:c(["method-card",{inactive:!l.is_active}])},[a("div",pa,[a("div",{class:c(["method-media",`method-media--${l.type}`])},[l.type==="qris"&&l.qr_code_url?(i(),s("img",{key:0,class:"method-qr",src:ne(l.qr_code_url),alt:`QR ${l.name}`,loading:"lazy"},null,8,fa)):(i(),s("div",ma,[a("i",{class:c(fe(l))},null,2)]))],2),a("div",ka,[a("div",{class:"method-title",title:l.name},o(l.name),9,ya),a("div",_a,[a("span",{class:c(["pill pill--soft",pe(l.type)])},[a("i",{class:c(re(l.type)),"aria-hidden":"true"},null,2),v(" "+o(oe(l.type)),1)],2),e[42]||(e[42]=a("span",{class:"dot"},"•",-1)),a("span",{class:c(["pill",l.is_active?"pill--active":"pill--inactive"])},[a("i",{class:c(l.is_active?"bi bi-check-circle-fill":"bi bi-slash-circle"),"aria-hidden":"true"},null,2),v(" "+o(l.is_active?"Aktif":"Nonaktif"),1)],2)])])]),a("div",ga,[l.type==="qris"?(i(),s("div",wa,[e[43]||(e[43]=a("div",{class:"detail-label text-muted"},"QR Code",-1)),a("div",ha,o(l.qr_code_url?"Tersedia":"Belum diupload"),1)])):(i(),s(Q,{key:1},[a("div",Ca,[e[45]||(e[45]=a("div",{class:"detail-label text-muted"},"Nomor",-1)),a("div",qa,[a("span",null,o(l.account_number||"-"),1),a("button",{class:"btn btn-ghost btn-sm btn-icon",type:"button",onClick:r=>Re(l.account_number),disabled:!l.account_number,"aria-label":"Copy nomor"},[...e[44]||(e[44]=[a("i",{class:"bi bi-copy","aria-hidden":"true"},null,-1)])],8,xa)])]),l.account_name?(i(),s("div",Ma,[e[46]||(e[46]=a("div",{class:"detail-label text-muted"},"Atas nama",-1)),a("div",Ta,o(l.account_name),1)])):f("",!0)],64))]),a("div",Ra,[a("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:r=>ye(l)},[...e[47]||(e[47]=[a("i",{class:"bi bi-pencil","aria-hidden":"true"},null,-1),v(" Edit ",-1)])],8,Ia),l.type==="qris"?(i(),s("button",{key:0,class:"btn btn-ghost btn-sm",type:"button",onClick:r=>Me(l),disabled:T.value===l.id},[T.value===l.id?(i(),s("span",Qa)):(i(),s("i",Na)),e[48]||(e[48]=v(" QR ",-1))],8,Sa)):f("",!0),a("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:r=>Ce(l),disabled:L.value===l.id},[L.value===l.id?(i(),s("span",$a)):(i(),s("i",{key:1,class:c(["bi",l.is_active?"bi-eye-slash":"bi-eye"]),"aria-hidden":"true"},null,2)),v(" "+o(l.is_active?"Nonaktifkan":"Aktifkan"),1)],8,Ua),a("button",{class:"btn btn-ghost btn-sm btn-danger",type:"button",onClick:r=>qe(l)},[...e[49]||(e[49]=[a("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1),v(" Hapus ",-1)])],8,Da)]),a("div",Ba,[a("span",null,[e[50]||(e[50]=v("Urutan: ",-1)),a("strong",null,o(C(l.sort_order||0)),1)])])],2))),128)),K.value.length?f("",!0):(i(),s("div",Fa,[e[52]||(e[52]=a("div",{class:"empty-icon","aria-hidden":"true"},[a("i",{class:"bi bi-credit-card"})],-1)),e[53]||(e[53]=a("h3",null,"Tidak ada metode ditemukan",-1)),e[54]||(e[54]=a("p",{class:"text-muted"},"Coba ubah filter kategori atau kata kunci pencarian.",-1)),a("button",{class:"btn btn-ghost",type:"button",onClick:z},[...e[51]||(e[51]=[a("i",{class:"bi bi-plus-lg","aria-hidden":"true"},null,-1),v(" Tambah Metode ",-1)])])]))],64))])])]),Y(ae,{name:"ad-modal"},{default:Z(()=>{var l,r,p;return[B.value?(i(),s("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Form metode pembayaran",onClick:ee(J,["self"])},[a("form",{class:"modal-content",onSubmit:ee(he,["prevent"])},[a("div",Aa,[a("div",Ea,[a("div",Va,[a("i",{class:c(m.value?"bi bi-pencil-square":"bi bi-plus-circle")},null,2)]),a("div",La,[a("h3",null,o(m.value?"Edit Metode":"Tambah Metode"),1),e[55]||(e[55]=a("p",{class:"text-muted"},"Lengkapi data dan simpan perubahan.",-1))])]),a("button",{class:"icon-close",type:"button",onClick:J,"aria-label":"Tutup form"},[...e[56]||(e[56]=[a("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])])]),a("div",Pa,[a("div",ja,[a("div",Wa,[e[58]||(e[58]=a("label",{class:"field-label",for:"pm-type"},"Tipe",-1)),g(a("select",{id:"pm-type","onUpdate:modelValue":e[7]||(e[7]=u=>n.value.type=u),class:"form-select",disabled:b.value},[...e[57]||(e[57]=[a("option",{value:"qris"},"QRIS",-1),a("option",{value:"ewallet"},"E-Wallet",-1),a("option",{value:"bank"},"Bank",-1)])],8,Ga),[[Ne,n.value.type]])]),a("div",Oa,[e[59]||(e[59]=a("label",{class:"field-label",for:"pm-name"},"Nama",-1)),g(a("input",{id:"pm-name","onUpdate:modelValue":e[8]||(e[8]=u=>n.value.name=u),class:"form-control",disabled:b.value,placeholder:"Contoh: QRIS BCA / OVO / BRI"},null,8,Ha),[[N,n.value.name]])])]),n.value.type==="qris"?(i(),s("div",Ka,[a("div",za,[e[62]||(e[62]=a("div",null,[a("div",{class:"field-label"},"QR Code"),a("div",{class:"text-muted small"},"Upload QR untuk metode QRIS (opsional).")],-1)),a("div",Ja,[a("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:_e,disabled:b.value},[...e[60]||(e[60]=[a("i",{class:"bi bi-upload","aria-hidden":"true"},null,-1),v(" Pilih ",-1)])],8,Xa),R.value?(i(),s("button",{key:0,class:"btn btn-ghost btn-sm",type:"button",onClick:A,disabled:b.value},[...e[61]||(e[61]=[a("i",{class:"bi bi-x-circle","aria-hidden":"true"},null,-1),v(" Hapus ",-1)])],8,Ya)):f("",!0)])]),a("div",{class:c(["qr-preview-card",{"has-preview":R.value||((l=m.value)==null?void 0:l.qr_code_url)}])},[R.value||(r=m.value)!=null&&r.qr_code_url?(i(),s("img",{key:0,class:"qr-preview-img",src:R.value||ne((p=m.value)==null?void 0:p.qr_code_url),alt:m.value?`QR ${m.value.name}`:"QR Preview"},null,8,Za)):(i(),s("div",et,[...e[63]||(e[63]=[a("i",{class:"bi bi-qr-code"},null,-1),a("span",null,"Belum ada QR",-1)])]))],2),a("input",{ref_key:"qrModalInput",ref:E,type:"file",class:"sr-only",accept:"image/*",onChange:ge},null,544)])):f("",!0),a("div",at,[a("div",tt,[e[64]||(e[64]=a("label",{class:"field-label",for:"pm-icon"},"Icon (Bootstrap Icons)",-1)),g(a("input",{id:"pm-icon","onUpdate:modelValue":e[9]||(e[9]=u=>n.value.icon=u),class:"form-control",disabled:b.value,placeholder:"Contoh: bi bi-wallet2"},null,8,lt),[[N,n.value.icon]])]),n.value.type!=="qris"?(i(),s("div",st,[a("label",it,"Nomor "+o(n.value.type==="ewallet"?"E-Wallet":"Rekening"),1),g(a("input",{id:"pm-number","onUpdate:modelValue":e[10]||(e[10]=u=>n.value.account_number=u),class:"form-control",disabled:b.value,placeholder:"Contoh: 0812xxxx / 1234567890"},null,8,nt),[[N,n.value.account_number]])])):f("",!0),n.value.type==="bank"?(i(),s("div",ot,[e[65]||(e[65]=a("label",{class:"field-label",for:"pm-owner"},"Atas Nama",-1)),g(a("input",{id:"pm-owner","onUpdate:modelValue":e[11]||(e[11]=u=>n.value.account_name=u),class:"form-control",disabled:b.value,placeholder:"Contoh: PT KaraokeKu"},null,8,rt),[[N,n.value.account_name]])])):f("",!0)]),a("div",dt,[a("div",ut,[e[66]||(e[66]=a("label",{class:"field-label",for:"pm-sort"},"Urutan",-1)),g(a("input",{id:"pm-sort","onUpdate:modelValue":e[12]||(e[12]=u=>n.value.sort_order=u),type:"number",class:"form-control",disabled:b.value},null,8,ct),[[N,n.value.sort_order,void 0,{number:!0}]])]),a("div",vt,[e[68]||(e[68]=a("label",{class:"field-label"},"Status",-1)),a("label",{class:c(["switch",{on:n.value.is_active}])},[g(a("input",{"onUpdate:modelValue":e[13]||(e[13]=u=>n.value.is_active=u),type:"checkbox",disabled:b.value},null,8,bt),[[ve,n.value.is_active]]),e[67]||(e[67]=a("span",{class:"switch-track","aria-hidden":"true"},null,-1)),a("span",pt,o(n.value.is_active?"Aktif":"Nonaktif"),1)],2)])])]),a("div",ft,[a("button",{class:"btn btn-ghost",type:"button",onClick:J,disabled:b.value},"Batal",8,mt),a("button",{class:"btn btn-primary",type:"submit",disabled:b.value},[b.value?(i(),s("span",yt)):(i(),s("i",_t)),v(" "+o(b.value?"Menyimpan…":"Simpan"),1)],8,kt)])],32)])):f("",!0)]}),_:1}),Y(ae,{name:"ad-modal"},{default:Z(()=>{var l,r,p;return[_.value.open?(i(),s("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Konfirmasi hapus metode pembayaran",onClick:ee(X,["self"])},[a("div",gt,[a("div",{class:"modal-header"},[e[70]||(e[70]=a("div",{class:"modal-title"},[a("div",{class:"modal-icon","aria-hidden":"true"},[a("i",{class:"bi bi-trash"})]),a("div",{class:"modal-title__copy"},[a("h3",null,"Hapus metode ini?"),a("p",{class:"text-muted"},"Tindakan ini tidak bisa dibatalkan.")])],-1)),a("button",{class:"icon-close",type:"button",onClick:X,"aria-label":"Tutup konfirmasi"},[...e[69]||(e[69]=[a("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])])]),a("div",wt,[a("div",ht,[a("div",Ct,[e[71]||(e[71]=a("div",{class:"confirm-label text-muted"},"Nama",-1)),a("div",qt,o(((l=_.value.method)==null?void 0:l.name)||"-"),1)]),a("div",xt,[e[72]||(e[72]=a("div",{class:"confirm-label text-muted"},"Tipe",-1)),a("div",Mt,o(oe((r=_.value.method)==null?void 0:r.type)),1)]),a("div",Tt,[e[73]||(e[73]=a("div",{class:"confirm-label text-muted"},"Status",-1)),a("div",Rt,o((p=_.value.method)!=null&&p.is_active?"Aktif":"Nonaktif"),1)])])]),a("div",It,[a("button",{class:"btn btn-ghost",type:"button",onClick:X,disabled:h.value},"Batal",8,St),a("button",{class:"btn btn-danger",type:"button",onClick:xe,disabled:h.value},[h.value?(i(),s("span",Nt)):(i(),s("i",Ut)),v(" "+o(h.value?"Menghapus…":"Hapus"),1)],8,Qt)])])])):f("",!0)]}),_:1}),a("input",{ref_key:"qrInput",ref:le,type:"file",class:"sr-only",onChange:Te,accept:"image/*"},null,544),Y(ae,{name:"ad-toast"},{default:Z(()=>[G.value?(i(),s("div",{key:0,class:c(["toast",`toast--${P.value}`]),role:"status","aria-live":"polite"},[a("i",{class:c(P.value==="success"?"bi bi-check-circle-fill":P.value==="danger"?"bi bi-x-circle-fill":"bi bi-info-circle-fill"),"aria-hidden":"true"},null,2),a("span",null,o(se.value),1)],2)):f("",!0)]),_:1})]))}},Ft=Ie($t,[["__scopeId","data-v-f41fafbe"]]);export{Ft as default};
