import{_ as Pt,r as m,c as T,y as wt,o as At,N as Mt,a as n,d as t,i as b,e as Q,t as a,f as u,w as O,g as Bt,F as _,k as S,n as p,b as at,B as W,D as xt,C as jt,m as Dt,T as it,L as X,v as o}from"./index-Btw_uZyE.js";const Ft={class:"admin-requests"},Ut={class:"page-header reveal",style:{"--d":"0ms"}},Et={class:"page-header__copy"},It={class:"page-meta text-muted"},Vt={class:"page-header__actions"},Ht=["disabled"],qt={key:0,class:"alert-card alert-card--danger reveal",style:{"--d":"60ms"},role:"status"},Gt={class:"alert-body"},Kt={class:"alert-text text-muted"},zt={class:"stats-grid reveal",style:{"--d":"90ms"},"aria-label":"Ringkasan request lagu"},Jt={class:"stat-icon","aria-hidden":"true"},Qt={class:"stat-body"},Ot={class:"stat-label"},Wt={class:"stat-value"},Xt={key:0,class:"stat-hint text-muted"},Yt=["onClick"],Zt={class:"panel filters-panel reveal",style:{"--d":"120ms"},"aria-label":"Filter request lagu"},te={class:"panel-body"},ee={class:"filters-row"},se={class:"field"},le=["disabled"],ae={class:"field field--grow"},ie={class:"search-control"},ne={class:"field"},oe=["disabled"],de={class:"chips-row","aria-label":"Shortcut filter"},ue={class:"chip-count"},re={class:"chip-count"},ce={class:"chip-count"},ve={class:"chip-count"},be={class:"chip-count"},pe={class:"panel requests-panel reveal",style:{"--d":"150ms"},"aria-label":"Daftar request lagu"},me={class:"panel-header"},ge={class:"panel-title"},ke={class:"panel-title__copy"},fe={class:"text-muted"},ye={class:"panel-actions"},he=["disabled"],_e={class:"panel-body"},Ce={class:"table-wrap","aria-label":"Tabel request lagu"},we={class:"requests-table"},xe={class:"td-date"},je=["title"],De=["title"],Le=["title"],Te={class:"song-sub text-muted"},Se=["title"],$e={key:0,class:"song-link"},Ne=["href"],Re=["title"],Pe=["title"],Ae={class:"td-actions"},Me={class:"row-actions"},Be=["onClick"],Fe=["onClick"],Ue=["onClick"],Ee=["onClick"],Ie={key:0,class:"tr-empty"},Ve={class:"request-cards","aria-label":"Daftar request lagu (mobile)"},He={class:"request-card__top"},qe={class:"request-card__song"},Ge=["title"],Ke=["title"],ze={class:"request-card__meta"},Je={class:"pill pill--soft"},Qe={class:"pill pill--soft"},Oe={class:"pill pill--soft"},We={key:0,class:"request-card__link"},Xe=["href"],Ye={class:"request-card__actions"},Ze=["onClick"],ts=["onClick"],es=["onClick"],ss=["onClick"],ls={key:0,class:"empty-state"},as={key:0,class:"pagination-row"},is=["disabled"],ns={class:"page-indicator text-muted"},os=["disabled"],ds={class:"modal-content"},us={class:"modal-body"},rs={class:"detail-grid"},cs={class:"detail-card detail-card--song"},vs=["title"],bs=["title"],ps={class:"detail-card"},ms=["title"],gs=["title"],ks={class:"detail-card"},fs={class:"detail-value"},ys={class:"detail-sub text-muted"},hs={class:"detail-grid detail-grid--secondary"},_s={class:"detail-card"},Cs={class:"detail-value"},ws={class:"detail-card"},xs={class:"detail-value"},js={key:0,class:"detail-card detail-card--link"},Ds=["href"],Ls=["title"],Ts={key:1,class:"detail-card"},Ss={key:0,class:"detail-section"},$s={class:"message-box"},Ns={class:"detail-section"},Rs={class:"modal-footer"},Ps={class:"modal-content modal-content--confirm"},As={class:"modal-header"},Ms={class:"modal-title"},Bs={class:"modal-icon","aria-hidden":"true"},Fs={class:"modal-title__copy"},Us={class:"text-muted"},Es={class:"modal-body"},Is={class:"confirm-summary"},Vs={class:"confirm-item"},Hs={class:"confirm-value"},qs={class:"confirm-item"},Gs={class:"confirm-value"},Ks={class:"confirm-item"},zs={class:"confirm-value"},Js={class:"modal-footer"},Qs=["disabled"],Os=["disabled"],Ws={key:0,class:"spinner","aria-hidden":"true"},Xs={__name:"AdminRequests",setup(Ys){const M="/api",B=m([]),c=m({total:0,page:1,limit:20,totalPages:1}),g=m({total:0,pending:0,approved:0,rejected:0}),f=m(!0),F=m(!0),w=m(""),Y=m(Date.now()),k=m(""),$=m(""),x=m(!1),d=m(null),U=m(""),y=m(!1),v=m({open:!1,action:"",status:"",request:null,title:"",message:"",confirmLabel:"",icon:"bi bi-exclamation-triangle-fill",variant:"btn-primary",useNotes:!1}),Z=m(!1),nt=m(""),E=m("success");let N=null;const ot=T({get:()=>c.value.limit||20,set:l=>{c.value.page=1,c.value.limit=Number(l)||20}}),I=T(()=>f.value||F.value),h=l=>new Intl.NumberFormat("id-ID").format(Number(l)||0),tt=l=>l?new Date(l).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-",Lt=T(()=>{const l=new Date(Y.value||Date.now());return new Intl.DateTimeFormat("id-ID",{hour:"2-digit",minute:"2-digit"}).format(l)}),V=l=>({pending:"Pending",approved:"Disetujui",rejected:"Ditolak",completed:"Selesai"})[l]||l||"-",et=l=>l==="approved"?"pill--success":l==="rejected"?"pill--danger":l==="completed"?"pill--cyan":"pill--warning",st=l=>l==="approved"?"bi bi-check-circle-fill":l==="rejected"?"bi bi-x-circle-fill":l==="completed"?"bi bi-stars":"bi bi-hourglass-split",C=l=>{var e;return((e=l==null?void 0:l.requester)==null?void 0:e.name)||"Unknown"},R=l=>{var e;return((e=l==null?void 0:l.requester)==null?void 0:e.email)||"-"},dt=T(()=>{const l=Number(g.value.total)||0,e=Number(g.value.pending)||0,i=Number(g.value.approved)||0,s=Number(g.value.rejected)||0;return Math.max(0,l-e-i-s)}),Tt=T(()=>[{key:"total",label:"Total Request",value:g.value.total||0,icon:"bi bi-collection",tone:"tone-cyan",statusFilter:"",linkLabel:"Lihat"},{key:"pending",label:"Pending",value:g.value.pending||0,icon:"bi bi-hourglass-split",tone:"tone-blue",statusFilter:"pending",linkLabel:"Review"},{key:"approved",label:"Disetujui",value:g.value.approved||0,icon:"bi bi-check-circle-fill",tone:"tone-green",statusFilter:"approved",linkLabel:"Lihat"},{key:"rejected",label:"Ditolak",value:g.value.rejected||0,icon:"bi bi-x-circle-fill",tone:"tone-blue",statusFilter:"rejected",linkLabel:"Lihat"},{key:"completed",label:"Selesai",value:dt.value,icon:"bi bi-stars",tone:"tone-cyan",statusFilter:"completed",linkLabel:"Lihat",hint:"Perkiraan dari total"}]),P=T(()=>{const l=Array.isArray(B.value)?B.value:[],e=String($.value||"").trim().toLowerCase();return e?l.filter(i=>[C(i),R(i),i==null?void 0:i.title,i==null?void 0:i.artist,i==null?void 0:i.genre,i==null?void 0:i.language,V(i==null?void 0:i.status),i==null?void 0:i.notes,i==null?void 0:i.admin_notes].filter(Boolean).join(" ").toLowerCase().includes(e)):l}),H=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),q=async()=>{var l,e;f.value=!0,w.value="";try{const i={status:k.value||void 0,page:c.value.page||1,limit:c.value.limit||20},s=await X.get(`${M}/requests`,{...H(),params:i});B.value=s.data.data||[];const r=s.data.meta||{};c.value={total:Number(r.total)||0,page:Number(r.page)||1,limit:Number(r.limit)||c.value.limit||20,totalPages:Number(r.totalPages)||1},Y.value=Date.now()}catch(i){console.error("Error fetching requests:",i),w.value=((e=(l=i.response)==null?void 0:l.data)==null?void 0:e.message)||"Gagal memuat daftar request",B.value=[]}finally{f.value=!1}},St=async()=>{var l,e;F.value=!0,w.value="";try{const i=await X.get(`${M}/requests/stats`,H());g.value=i.data.data||{total:0,pending:0,approved:0,rejected:0},Y.value=Date.now()}catch(i){console.error("Error fetching stats:",i),w.value=((e=(l=i.response)==null?void 0:l.data)==null?void 0:e.message)||"Gagal memuat statistik request"}finally{F.value=!1}},j=async()=>{await Promise.all([St(),q()])},D=l=>{k.value=l};wt(k,()=>{c.value.page=1,q()}),wt(()=>c.value.limit,()=>{c.value.page=1,q()});const ut=l=>{const e=Math.max(1,Math.min(Number(l)||1,c.value.totalPages||1));e!==c.value.page&&(c.value.page=e,q())},G=(l,e="success")=>{nt.value=l,E.value=e,Z.value=!0,N&&clearTimeout(N),N=setTimeout(()=>{Z.value=!1},2500)},rt=l=>{d.value=l,U.value=(l==null?void 0:l.admin_notes)||"",x.value=!0},K=()=>{x.value=!1},$t=async(l,e,i)=>{var s,r;if(l!=null&&l.id)try{await X.put(`${M}/requests/${l.id}/status`,{status:e,admin_notes:i||""},H()),G(e==="approved"?"Request disetujui":"Request ditolak","success"),x.value=!1,await j()}catch(A){console.error("Error updating status:",A),G(((r=(s=A.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal memproses request","danger")}},Nt=async l=>{var e,i,s;if(l!=null&&l.id)try{await X.delete(`${M}/requests/${l.id}`,H()),G("Request berhasil dihapus","success"),((e=d.value)==null?void 0:e.id)===l.id&&(x.value=!1),await j()}catch(r){console.error("Error deleting request:",r),G(((s=(i=r.response)==null?void 0:i.data)==null?void 0:s.message)||"Gagal menghapus request","danger")}},lt=l=>{l&&(v.value={open:!0,action:"delete",status:"",request:l,title:"Hapus request ini?",message:"Tindakan ini tidak bisa dibatalkan.",confirmLabel:"Hapus",icon:"bi bi-trash",variant:"btn-danger",useNotes:!1})},L=(l,e,i)=>{if(!l)return;const s=e==="approved";v.value={open:!0,action:"status",status:e,request:l,title:s?"Setujui request ini?":"Tolak request ini?",message:s?"Pastikan request valid sebelum menyetujui.":"Request akan ditandai sebagai ditolak.",confirmLabel:s?"Setujui":"Tolak",icon:s?"bi bi-check-lg":"bi bi-x-lg",variant:s?"btn-success":"btn-danger",useNotes:!!i}},z=()=>{y.value||(v.value.open=!1)},Rt=async()=>{if(!(!v.value.open||y.value)){y.value=!0;try{if(v.value.action==="delete")await Nt(v.value.request);else if(v.value.action==="status"){const l=v.value.useNotes?U.value:"";await $t(v.value.request,v.value.status,l)}}finally{y.value=!1,v.value.open=!1}}},ct=l=>{if(l.key==="Escape"){if(v.value.open)return z();if(x.value)return K()}};return At(()=>{j(),window.addEventListener("keydown",ct)}),Mt(()=>{window.removeEventListener("keydown",ct),N&&clearTimeout(N)}),(l,e)=>{const i=Bt("router-link");return o(),n("div",Ft,[t("header",Ut,[t("div",Et,[e[16]||(e[16]=t("div",{class:"page-badge"},[t("i",{class:"bi bi-plus-circle-fill","aria-hidden":"true"}),t("span",null,"Request Lagu")],-1)),e[17]||(e[17]=t("h1",null,"Kelola Request Lagu",-1)),e[18]||(e[18]=t("p",{class:"text-muted"}," Review request dari user, cek link referensi, dan simpan catatan admin sebelum approve / reject. ",-1)),t("div",It,[e[15]||(e[15]=t("i",{class:"bi bi-clock","aria-hidden":"true"},null,-1)),t("span",null,"Terakhir update: "+a(Lt.value),1)])]),t("div",Vt,[t("button",{class:"btn btn-ghost",type:"button",onClick:j,disabled:I.value},[e[19]||(e[19]=t("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1)),u(" "+a(I.value?"Memuat…":"Refresh"),1)],8,Ht),Q(i,{to:"/admin/songs",class:"btn btn-primary"},{default:O(()=>[...e[20]||(e[20]=[t("i",{class:"bi bi-music-note-list","aria-hidden":"true"},null,-1),u(" Manajemen Lagu ",-1)])]),_:1})])]),w.value&&!I.value?(o(),n("div",qt,[e[23]||(e[23]=t("div",{class:"alert-icon","aria-hidden":"true"},[t("i",{class:"bi bi-exclamation-triangle-fill"})],-1)),t("div",Gt,[e[21]||(e[21]=t("div",{class:"alert-title"},"Gagal memuat request",-1)),t("div",Kt,a(w.value),1)]),t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:j},[...e[22]||(e[22]=[t("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1),u(" Coba lagi ",-1)])])])):b("",!0),t("section",zt,[F.value?(o(),n(_,{key:0},S(5,s=>t("div",{key:s,class:"stat-card stat-card--skeleton"},[...e[24]||(e[24]=[t("div",{class:"stat-icon loading-skeleton","aria-hidden":"true"},null,-1),t("div",{class:"stat-body"},[t("div",{class:"skeleton-line loading-skeleton"}),t("div",{class:"skeleton-line skeleton-line--lg loading-skeleton"})],-1)])])),64)):(o(!0),n(_,{key:1},S(Tt.value,s=>(o(),n("div",{key:s.key,class:p(["stat-card",s.tone])},[t("div",Jt,[t("i",{class:p(s.icon)},null,2)]),t("div",Qt,[t("div",Ot,a(s.label),1),t("div",Wt,a(h(s.value)),1),s.hint?(o(),n("div",Xt,a(s.hint),1)):b("",!0)]),s.statusFilter!==void 0?(o(),n("button",{key:0,class:"stat-link",type:"button",onClick:r=>D(s.statusFilter)},[t("span",null,a(s.linkLabel),1),e[25]||(e[25]=t("i",{class:"bi bi-arrow-right","aria-hidden":"true"},null,-1))],8,Yt)):b("",!0)],2))),128))]),t("section",Zt,[e[38]||(e[38]=at('<div class="panel-header panel-header--compact" data-v-d07f9df7><div class="panel-title" data-v-d07f9df7><div class="panel-icon panel-icon--soft" aria-hidden="true" data-v-d07f9df7><i class="bi bi-funnel-fill" data-v-d07f9df7></i></div><div class="panel-title__copy" data-v-d07f9df7><h2 data-v-d07f9df7>Filter</h2><p class="text-muted" data-v-d07f9df7>Cari cepat berdasarkan user, judul, artis, atau status.</p></div></div></div>',1)),t("div",te,[t("div",ee,[t("div",se,[e[27]||(e[27]=t("label",{class:"field-label",for:"request-status"},"Status",-1)),W(t("select",{id:"request-status","onUpdate:modelValue":e[0]||(e[0]=s=>k.value=s),class:"form-select",disabled:f.value},[...e[26]||(e[26]=[at('<option value="" data-v-d07f9df7>Semua</option><option value="pending" data-v-d07f9df7>Pending</option><option value="approved" data-v-d07f9df7>Disetujui</option><option value="rejected" data-v-d07f9df7>Ditolak</option><option value="completed" data-v-d07f9df7>Selesai</option>',5)])],8,le),[[xt,k.value]])]),t("div",ae,[e[30]||(e[30]=t("label",{class:"field-label",for:"request-search"},"Cari",-1)),t("div",ie,[e[29]||(e[29]=t("i",{class:"bi bi-search","aria-hidden":"true"},null,-1)),W(t("input",{id:"request-search","onUpdate:modelValue":e[1]||(e[1]=s=>$.value=s),type:"text",class:"form-control",placeholder:"Cari judul, artis, genre, user, email…"},null,512),[[jt,$.value]]),$.value?(o(),n("button",{key:0,class:"icon-clear",type:"button",onClick:e[2]||(e[2]=s=>$.value=""),"aria-label":"Hapus pencarian"},[...e[28]||(e[28]=[t("i",{class:"bi bi-x-circle-fill","aria-hidden":"true"},null,-1)])])):b("",!0)])]),t("div",ne,[e[32]||(e[32]=t("label",{class:"field-label",for:"request-limit"},"Per halaman",-1)),W(t("select",{id:"request-limit","onUpdate:modelValue":e[3]||(e[3]=s=>ot.value=s),class:"form-select",disabled:f.value},[...e[31]||(e[31]=[t("option",{value:10},"10",-1),t("option",{value:20},"20",-1),t("option",{value:50},"50",-1)])],8,oe),[[xt,ot.value,void 0,{number:!0}]])])]),t("div",de,[t("button",{class:p(["chip",{on:k.value===""}]),type:"button",onClick:e[4]||(e[4]=s=>D(""))},[e[33]||(e[33]=t("span",null,"Semua",-1)),t("span",ue,a(h(g.value.total||0)),1)],2),t("button",{class:p(["chip",{on:k.value==="pending"}]),type:"button",onClick:e[5]||(e[5]=s=>D("pending"))},[e[34]||(e[34]=t("span",null,"Pending",-1)),t("span",re,a(h(g.value.pending||0)),1)],2),t("button",{class:p(["chip",{on:k.value==="approved"}]),type:"button",onClick:e[6]||(e[6]=s=>D("approved"))},[e[35]||(e[35]=t("span",null,"Disetujui",-1)),t("span",ce,a(h(g.value.approved||0)),1)],2),t("button",{class:p(["chip",{on:k.value==="rejected"}]),type:"button",onClick:e[7]||(e[7]=s=>D("rejected"))},[e[36]||(e[36]=t("span",null,"Ditolak",-1)),t("span",ve,a(h(g.value.rejected||0)),1)],2),t("button",{class:p(["chip",{on:k.value==="completed"}]),type:"button",onClick:e[8]||(e[8]=s=>D("completed"))},[e[37]||(e[37]=t("span",null,"Selesai",-1)),t("span",be,a(h(dt.value)),1)],2)])])]),t("section",pe,[t("div",me,[t("div",ge,[e[43]||(e[43]=t("div",{class:"panel-icon","aria-hidden":"true"},[t("i",{class:"bi bi-inbox"})],-1)),t("div",ke,[e[42]||(e[42]=t("h2",null,"Daftar Request",-1)),t("p",fe,[e[39]||(e[39]=u(" Menampilkan ",-1)),t("strong",null,a(h(P.value.length)),1),e[40]||(e[40]=u(" dari ",-1)),t("strong",null,a(h(c.value.total)),1),e[41]||(e[41]=u(" data. ",-1))])])]),t("div",ye,[t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:j,disabled:I.value},[...e[44]||(e[44]=[t("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1),u(" Refresh ",-1)])],8,he)])]),t("div",_e,[t("div",Ce,[t("table",we,[e[52]||(e[52]=t("thead",null,[t("tr",null,[t("th",null,"Tanggal"),t("th",null,"User"),t("th",null,"Judul"),t("th",null,"Artis"),t("th",null,"Genre"),t("th",null,"Status"),t("th",{class:"th-actions"},"Aksi")])],-1)),t("tbody",null,[f.value?(o(),n(_,{key:0},S(6,s=>t("tr",{key:s,class:"tr-skeleton"},[...e[45]||(e[45]=[t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1)])])),64)):(o(),n(_,{key:1},[(o(!0),n(_,null,S(P.value,s=>(o(),n("tr",{key:s.id},[t("td",xe,a(tt(s.created_at)),1),t("td",null,[t("div",{class:"user-name",title:C(s)},a(C(s)),9,je),t("div",{class:"user-email text-muted",title:R(s)},a(R(s)),9,De)]),t("td",null,[t("div",{class:"song-title",title:s.title},a(s.title),9,Le),t("div",Te,[t("span",{title:s.language||"-"},a(s.language||"-"),9,Se),s.link?(o(),n("span",$e,[t("a",{href:s.link,target:"_blank",rel:"noreferrer",class:"link-chip","aria-label":"Buka link referensi"},[...e[46]||(e[46]=[t("i",{class:"bi bi-box-arrow-up-right","aria-hidden":"true"},null,-1),u(" Link ",-1)])],8,Ne)])):b("",!0)])]),t("td",{class:"td-artist",title:s.artist},a(s.artist),9,Re),t("td",{class:"td-genre",title:s.genre||"-"},a(s.genre||"-"),9,Pe),t("td",null,[t("span",{class:p(["pill",et(s.status)])},[t("i",{class:p(st(s.status)),"aria-hidden":"true"},null,2),u(" "+a(V(s.status)),1)],2)]),t("td",Ae,[t("div",Me,[t("button",{class:"btn btn-ghost btn-sm btn-icon",type:"button",onClick:r=>rt(s),"aria-label":"Detail"},[...e[47]||(e[47]=[t("i",{class:"bi bi-eye","aria-hidden":"true"},null,-1)])],8,Be),s.status==="pending"?(o(),n("button",{key:0,class:"btn btn-success btn-sm btn-icon",type:"button",onClick:r=>L(s,"approved",!1),"aria-label":"Setujui"},[...e[48]||(e[48]=[t("i",{class:"bi bi-check-lg","aria-hidden":"true"},null,-1)])],8,Fe)):b("",!0),s.status==="pending"?(o(),n("button",{key:1,class:"btn btn-danger btn-sm btn-icon",type:"button",onClick:r=>L(s,"rejected",!1),"aria-label":"Tolak"},[...e[49]||(e[49]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])],8,Ue)):b("",!0),t("button",{class:"btn btn-ghost btn-sm btn-icon btn-icon--danger",type:"button",onClick:r=>lt(s),"aria-label":"Hapus"},[...e[50]||(e[50]=[t("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])],8,Ee)])])]))),128)),P.value.length?b("",!0):(o(),n("tr",Ie,[...e[51]||(e[51]=[t("td",{colspan:"7"},[t("div",{class:"empty-state"},[t("div",{class:"empty-icon","aria-hidden":"true"},[t("i",{class:"bi bi-inbox"})]),t("h3",null,"Tidak ada request"),t("p",{class:"text-muted"},"Coba ubah filter status atau kata kunci pencarian.")])],-1)])]))],64))])])]),t("div",Ve,[f.value?(o(),n(_,{key:0},S(6,s=>t("div",{key:s,class:"request-card request-card--skeleton"},[...e[53]||(e[53]=[at('<div class="skeleton-line loading-skeleton" data-v-d07f9df7></div><div class="skeleton-line skeleton-line--sm loading-skeleton" data-v-d07f9df7></div><div class="skeleton-chip-row" data-v-d07f9df7><div class="skeleton-chip loading-skeleton" data-v-d07f9df7></div><div class="skeleton-chip loading-skeleton" data-v-d07f9df7></div><div class="skeleton-chip loading-skeleton" data-v-d07f9df7></div></div><div class="skeleton-btn-row" data-v-d07f9df7><div class="skeleton-btn loading-skeleton" data-v-d07f9df7></div><div class="skeleton-btn loading-skeleton" data-v-d07f9df7></div></div>',4)])])),64)):(o(),n(_,{key:1},[(o(!0),n(_,null,S(P.value,s=>(o(),n("div",{key:s.id,class:"request-card"},[t("div",He,[t("div",qe,[t("div",{class:"song-title",title:s.title},a(s.title),9,Ge),t("div",{class:"song-sub text-muted",title:s.artist},a(s.artist),9,Ke)]),t("span",{class:p(["pill",et(s.status)])},[t("i",{class:p(st(s.status)),"aria-hidden":"true"},null,2),u(" "+a(V(s.status)),1)],2)]),t("div",ze,[t("span",Je,[e[54]||(e[54]=t("i",{class:"bi bi-person","aria-hidden":"true"},null,-1)),u(" "+a(C(s)),1)]),t("span",Qe,[e[55]||(e[55]=t("i",{class:"bi bi-calendar2","aria-hidden":"true"},null,-1)),u(" "+a(tt(s.created_at)),1)]),t("span",Oe,[e[56]||(e[56]=t("i",{class:"bi bi-tag","aria-hidden":"true"},null,-1)),u(" "+a(s.genre||"-"),1)])]),s.link?(o(),n("div",We,[t("a",{href:s.link,target:"_blank",rel:"noreferrer",class:"btn btn-ghost btn-sm"},[...e[57]||(e[57]=[t("i",{class:"bi bi-box-arrow-up-right","aria-hidden":"true"},null,-1),u(" Buka Link ",-1)])],8,Xe)])):b("",!0),t("div",Ye,[t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:r=>rt(s)},[...e[58]||(e[58]=[t("i",{class:"bi bi-eye","aria-hidden":"true"},null,-1),u(" Detail ",-1)])],8,Ze),t("button",{class:"btn btn-ghost btn-sm btn-icon btn-icon--danger",type:"button",onClick:r=>lt(s),"aria-label":"Hapus"},[...e[59]||(e[59]=[t("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])],8,ts),s.status==="pending"?(o(),n("button",{key:0,class:"btn btn-success btn-sm",type:"button",onClick:r=>L(s,"approved",!1)},[...e[60]||(e[60]=[t("i",{class:"bi bi-check-lg","aria-hidden":"true"},null,-1),u(" Setujui ",-1)])],8,es)):b("",!0),s.status==="pending"?(o(),n("button",{key:1,class:"btn btn-danger btn-sm",type:"button",onClick:r=>L(s,"rejected",!1)},[...e[61]||(e[61]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1),u(" Tolak ",-1)])],8,ss)):b("",!0)])]))),128)),P.value.length?b("",!0):(o(),n("div",ls,[...e[62]||(e[62]=[t("div",{class:"empty-icon","aria-hidden":"true"},[t("i",{class:"bi bi-inbox"})],-1),t("h3",null,"Tidak ada request",-1),t("p",{class:"text-muted"},"Coba ubah filter status atau kata kunci pencarian.",-1)])]))],64))]),c.value.totalPages>1?(o(),n("div",as,[t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:e[9]||(e[9]=s=>ut(c.value.page-1)),disabled:f.value||c.value.page<=1},[...e[63]||(e[63]=[t("i",{class:"bi bi-chevron-left","aria-hidden":"true"},null,-1),u(" Sebelumnya ",-1)])],8,is),t("div",ns,[e[64]||(e[64]=u(" Halaman ",-1)),t("strong",null,a(c.value.page),1),u(" / "+a(c.value.totalPages),1)]),t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:e[10]||(e[10]=s=>ut(c.value.page+1)),disabled:f.value||c.value.page>=c.value.totalPages},[...e[65]||(e[65]=[u(" Berikutnya ",-1),t("i",{class:"bi bi-chevron-right","aria-hidden":"true"},null,-1)])],8,os)])):b("",!0)])]),Q(it,{name:"ad-modal"},{default:O(()=>{var s,r,A,vt,bt,pt,mt,gt,kt,ft,yt,ht,_t,Ct;return[x.value?(o(),n("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Detail request lagu",onClick:Dt(K,["self"])},[t("div",ds,[t("div",{class:"modal-header"},[e[67]||(e[67]=t("div",{class:"modal-title"},[t("div",{class:"modal-icon","aria-hidden":"true"},[t("i",{class:"bi bi-music-note"})]),t("div",{class:"modal-title__copy"},[t("h3",null,"Detail Request"),t("p",{class:"text-muted"},"Cek informasi, link referensi, dan catatan user sebelum mengambil keputusan.")])],-1)),t("button",{class:"icon-close",type:"button",onClick:K,"aria-label":"Tutup modal"},[...e[66]||(e[66]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])])]),t("div",us,[t("div",rs,[t("div",cs,[e[68]||(e[68]=t("div",{class:"detail-label"},"Lagu",-1)),t("div",{class:"detail-value",title:(s=d.value)==null?void 0:s.title},a(((r=d.value)==null?void 0:r.title)||"-"),9,vs),t("div",{class:"detail-sub text-muted",title:(A=d.value)==null?void 0:A.artist},a(((vt=d.value)==null?void 0:vt.artist)||"-"),9,bs)]),t("div",ps,[e[69]||(e[69]=t("div",{class:"detail-label"},"User",-1)),t("div",{class:"detail-value",title:C(d.value)},a(C(d.value)),9,ms),t("div",{class:"detail-sub text-muted",title:R(d.value)},a(R(d.value)),9,gs)]),t("div",ks,[e[70]||(e[70]=t("div",{class:"detail-label"},"Status",-1)),t("div",fs,[t("span",{class:p(["pill",et((bt=d.value)==null?void 0:bt.status)])},[t("i",{class:p(st((pt=d.value)==null?void 0:pt.status)),"aria-hidden":"true"},null,2),u(" "+a(V((mt=d.value)==null?void 0:mt.status)),1)],2)]),t("div",ys,a(tt((gt=d.value)==null?void 0:gt.created_at)),1)])]),t("div",hs,[t("div",_s,[e[71]||(e[71]=t("div",{class:"detail-label"},"Genre",-1)),t("div",Cs,a(((kt=d.value)==null?void 0:kt.genre)||"-"),1)]),t("div",ws,[e[72]||(e[72]=t("div",{class:"detail-label"},"Bahasa",-1)),t("div",xs,a(((ft=d.value)==null?void 0:ft.language)||"-"),1)]),(yt=d.value)!=null&&yt.link?(o(),n("div",js,[e[74]||(e[74]=t("div",{class:"detail-label"},"Link",-1)),t("a",{href:d.value.link,target:"_blank",rel:"noreferrer",class:"btn btn-ghost btn-sm"},[...e[73]||(e[73]=[t("i",{class:"bi bi-box-arrow-up-right","aria-hidden":"true"},null,-1),u(" Buka Link ",-1)])],8,Ds),t("div",{class:"detail-sub text-muted truncate",title:d.value.link},a(d.value.link),9,Ls)])):(o(),n("div",Ts,[...e[75]||(e[75]=[t("div",{class:"detail-label"},"Link",-1),t("div",{class:"detail-value"},"-",-1)])]))]),(ht=d.value)!=null&&ht.notes?(o(),n("div",Ss,[e[76]||(e[76]=t("div",{class:"section-title"},"Catatan User",-1)),t("div",$s,a(d.value.notes),1)])):b("",!0),t("div",Ns,[e[77]||(e[77]=t("div",{class:"section-title"},"Catatan Admin",-1)),W(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=J=>U.value=J),class:"form-control",rows:"3",placeholder:"Tambahkan catatan (opsional)…"},null,512),[[jt,U.value]]),e[78]||(e[78]=t("div",{class:"text-muted hint"},"Catatan akan tersimpan saat kamu approve / reject request.",-1))])]),t("div",Rs,[t("button",{class:"btn btn-ghost",type:"button",onClick:K},"Tutup"),t("button",{class:"btn btn-ghost btn-icon btn-icon--danger",type:"button",onClick:e[12]||(e[12]=J=>lt(d.value)),"aria-label":"Hapus request"},[...e[79]||(e[79]=[t("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])]),((_t=d.value)==null?void 0:_t.status)==="pending"?(o(),n("button",{key:0,class:"btn btn-danger",type:"button",onClick:e[13]||(e[13]=J=>L(d.value,"rejected",!0))},[...e[80]||(e[80]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1),u(" Tolak ",-1)])])):b("",!0),((Ct=d.value)==null?void 0:Ct.status)==="pending"?(o(),n("button",{key:1,class:"btn btn-success",type:"button",onClick:e[14]||(e[14]=J=>L(d.value,"approved",!0))},[...e[81]||(e[81]=[t("i",{class:"bi bi-check-lg","aria-hidden":"true"},null,-1),u(" Setujui ",-1)])])):b("",!0)])])])):b("",!0)]}),_:1}),Q(it,{name:"ad-modal"},{default:O(()=>{var s,r;return[v.value.open?(o(),n("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Konfirmasi aksi",onClick:Dt(z,["self"])},[t("div",Ps,[t("div",As,[t("div",Ms,[t("div",Bs,[t("i",{class:p(v.value.icon)},null,2)]),t("div",Fs,[t("h3",null,a(v.value.title),1),t("p",Us,a(v.value.message),1)])]),t("button",{class:"icon-close",type:"button",onClick:z,"aria-label":"Tutup konfirmasi"},[...e[82]||(e[82]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])])]),t("div",Es,[t("div",Is,[t("div",Vs,[e[83]||(e[83]=t("div",{class:"confirm-label text-muted"},"Judul",-1)),t("div",Hs,a(((s=v.value.request)==null?void 0:s.title)||"-"),1)]),t("div",qs,[e[84]||(e[84]=t("div",{class:"confirm-label text-muted"},"Artis",-1)),t("div",Gs,a(((r=v.value.request)==null?void 0:r.artist)||"-"),1)]),t("div",Ks,[e[85]||(e[85]=t("div",{class:"confirm-label text-muted"},"User",-1)),t("div",zs,a(C(v.value.request)),1)])])]),t("div",Js,[t("button",{class:"btn btn-ghost",type:"button",onClick:z,disabled:y.value},"Batal",8,Qs),t("button",{class:p(["btn",v.value.variant]),type:"button",onClick:Rt,disabled:y.value},[y.value?(o(),n("span",Ws)):(o(),n("i",{key:1,class:p(v.value.icon),"aria-hidden":"true"},null,2)),u(" "+a(y.value?"Memproses…":v.value.confirmLabel),1)],10,Os)])])])):b("",!0)]}),_:1}),Q(it,{name:"ad-toast"},{default:O(()=>[Z.value?(o(),n("div",{key:0,class:p(["toast",`toast--${E.value}`]),role:"status","aria-live":"polite"},[t("i",{class:p(E.value==="success"?"bi bi-check-circle-fill":E.value==="danger"?"bi bi-x-circle-fill":"bi bi-info-circle-fill"),"aria-hidden":"true"},null,2),t("span",null,a(nt.value),1)],2)):b("",!0)]),_:1})])}}},tl=Pt(Xs,[["__scopeId","data-v-d07f9df7"]]);export{tl as default};
