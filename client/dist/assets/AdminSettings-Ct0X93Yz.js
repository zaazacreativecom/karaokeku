import{_ as W,r as p,c as y,o as X,N as Y,a as n,d as e,i as c,e as Z,t as r,f as v,F as j,k as I,n as C,b as M,m as aa,B as T,C as z,w as ea,T as sa,O as G,v as o}from"./index-Btw_uZyE.js";const ta={class:"admin-settings"},la={class:"page-header reveal",style:{"--d":"0ms"}},ia={class:"page-header__copy"},na={class:"page-meta text-muted"},oa={class:"page-header__actions"},da=["disabled"],ra=["disabled"],ua={key:0,class:"spinner","aria-hidden":"true"},pa={key:1,class:"bi bi-check-lg","aria-hidden":"true"},va={key:0,class:"alert-card alert-card--danger reveal",style:{"--d":"60ms"},role:"status"},ca={class:"alert-body"},ba={class:"alert-text text-muted"},ma={class:"stats-grid reveal",style:{"--d":"90ms"},"aria-label":"Ringkasan pengaturan"},_a={class:"stat-icon","aria-hidden":"true"},ga={class:"stat-body"},fa={class:"stat-label"},ha={class:"stat-value"},ka={key:0,class:"stat-hint text-muted"},ya={class:"panel reveal",style:{"--d":"120ms"},"aria-label":"Form pengaturan aplikasi"},wa={class:"panel-header"},xa={class:"panel-actions"},Sa=["disabled"],Ca={class:"panel-body"},Ta={class:"settings-card"},za={class:"settings-card__body"},Na={class:"field"},Ma=["disabled"],Ua={key:0,class:"field-hint text-muted"},Aa={class:"field"},Ba=["disabled"],Da={key:0,class:"field-hint text-muted"},$a={class:"settings-card"},Fa={class:"settings-card__body"},Pa={class:"field"},Va=["disabled"],ja={class:"chips-row chips-row--compact","aria-label":"Shortcut ukuran upload"},Ia=["disabled"],La=["disabled"],Ra=["disabled"],Ea={key:0,class:"field-hint text-muted"},Ka={class:"field"},Ga=["disabled"],Oa={class:"chips-row chips-row--compact","aria-label":"Shortcut format video"},Ha=["onClick","disabled"],Ja={class:"field-hint text-muted"},qa={key:0,class:"field-hint text-muted"},Qa={class:"settings-card"},Wa={class:"settings-card__body"},Xa={class:"field"},Ya=["disabled"],Za={class:"chips-row chips-row--compact","aria-label":"Shortcut jumlah lagu"},ae=["disabled"],ee=["disabled"],se=["disabled"],te={key:0,class:"field-hint text-muted"},le={class:"preview-card","aria-label":"Preview ringkas"},ie={class:"preview-row"},ne={class:"preview-value"},oe={class:"preview-row"},de={class:"preview-value"},re={class:"preview-row"},ue={class:"preview-value"},pe={class:"action-bar","aria-label":"Aksi simpan"},ve={class:"action-left"},ce={key:0,class:"pill pill--warn"},be={key:1,class:"pill pill--ok"},me={class:"action-right"},_e=["disabled"],ge=["disabled"],fe={key:0,class:"spinner","aria-hidden":"true"},he={key:1,class:"bi bi-check-lg","aria-hidden":"true"},ke={__name:"AdminSettings",setup(ye){const w=p(!0),i=p(!1),U=p(""),A=p(Date.now()),t=p({app_name:"",app_tagline:"",max_upload_size_mb:500,allowed_formats:"mp4,mkv,webm,avi",songs_per_page:20}),u=p({}),_=p(null),B=p(!1),L=p(""),N=p("success");let x=null;const O=["mp4","mkv","webm","avi","mpg"],D=y(()=>w.value||i.value),R=y(()=>U.value||""),$=l=>new Intl.NumberFormat("id-ID").format(Number(l)||0),H=y(()=>{const l=new Date(A.value||Date.now());return new Intl.DateTimeFormat("id-ID",{hour:"2-digit",minute:"2-digit"}).format(l)}),g=l=>{const a=String(l||"").split(",").map(d=>d.trim().toLowerCase()).filter(Boolean);return Array.from(new Set(a)).join(",")},F=y(()=>{const l=g(t.value.allowed_formats);return l?l.split(","):[]}),J=l=>{const a=g(t.value.allowed_formats),d=new Set(a?a.split(","):[]);d.has(l)?d.delete(l):d.add(l),t.value.allowed_formats=Array.from(d).join(",")},f=y(()=>_.value?Object.keys(t.value).some(l=>String(t.value[l])!==String(_.value[l])):!1),q=y(()=>{const l=String(t.value.app_name||"").trim()||"-",a=`${$(t.value.max_upload_size_mb)} MB`,d=`${F.value.length} format`,h=`${$(t.value.songs_per_page)} /hal`;return[{key:"app",label:"Aplikasi",value:l,icon:"bi bi-stars",tone:"tone-cyan"},{key:"upload",label:"Upload Max",value:a,icon:"bi bi-cloud-arrow-up-fill",tone:"tone-green"},{key:"formats",label:"Format",value:d,icon:"bi bi-filetype-mp4",tone:"tone-blue"},{key:"page",label:"Lagu/Halaman",value:h,icon:"bi bi-layout-text-window-reverse",tone:"tone-cyan"}]}),b=(l,a="success")=>{L.value=l,N.value=a,B.value=!0,x&&clearTimeout(x),x=setTimeout(()=>{B.value=!1},2500)},P=async()=>{var l,a;w.value=!0,U.value="";try{const h=(await G.getSettings()).data.data||{},m={},S={};for(const[k,s]of Object.entries(h)){S[k]={type:s==null?void 0:s.type,description:s==null?void 0:s.description};const V=s==null?void 0:s.value;(s==null?void 0:s.type)==="number"?m[k]=Number(V)||0:m[k]=V??""}t.value={...t.value,...m,allowed_formats:g(m.allowed_formats??t.value.allowed_formats)},u.value=S,_.value={...t.value},A.value=Date.now()}catch(d){console.error("Error fetching settings:",d),U.value=((a=(l=d.response)==null?void 0:l.data)==null?void 0:a.message)||"Gagal memuat pengaturan"}finally{w.value=!1}},E=()=>{_.value&&(t.value={..._.value},t.value.allowed_formats=g(t.value.allowed_formats),b("Perubahan dibatalkan","info"))},Q=()=>String(t.value.app_name||"").trim()?Number(t.value.max_upload_size_mb)<=0?(b("Maksimal upload harus lebih dari 0","danger"),!1):Number(t.value.songs_per_page)<=0?(b("Jumlah lagu per halaman harus lebih dari 0","danger"),!1):(t.value.allowed_formats=g(t.value.allowed_formats),!0):(b("Nama aplikasi wajib diisi","danger"),!1),K=async()=>{var l,a;if(!i.value){if(!f.value)return b("Tidak ada perubahan untuk disimpan","info");if(Q()){i.value=!0;try{await G.updateSettings(t.value),_.value={...t.value},A.value=Date.now(),b("Pengaturan berhasil disimpan","success")}catch(d){console.error("Error saving settings:",d),b(((a=(l=d.response)==null?void 0:l.data)==null?void 0:a.message)||"Gagal menyimpan pengaturan","danger")}finally{i.value=!1}}}};return X(P),Y(()=>{x&&clearTimeout(x)}),(l,a)=>{var d,h,m,S,k;return o(),n("div",ta,[e("header",la,[e("div",ia,[a[13]||(a[13]=e("div",{class:"page-badge"},[e("i",{class:"bi bi-sliders2-vertical","aria-hidden":"true"}),e("span",null,"Pengaturan")],-1)),a[14]||(a[14]=e("h1",null,"Atur aplikasi dengan nyaman",-1)),a[15]||(a[15]=e("p",{class:"text-muted"},"Kelola nama aplikasi, aturan upload, dan tampilan. Responsif di desktop maupun mobile.",-1)),e("div",na,[a[12]||(a[12]=e("i",{class:"bi bi-clock","aria-hidden":"true"},null,-1)),e("span",null,"Terakhir update: "+r(H.value),1)])]),e("div",oa,[e("button",{class:"btn btn-ghost",type:"button",onClick:P,disabled:D.value},[a[16]||(a[16]=e("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1)),v(" "+r(D.value?"Memuatâ€¦":"Refresh"),1)],8,da),e("button",{class:"btn btn-primary",type:"button",onClick:K,disabled:i.value||w.value||!f.value},[i.value?(o(),n("span",ua)):(o(),n("i",pa)),a[17]||(a[17]=v(" Simpan ",-1))],8,ra)])]),R.value&&!D.value?(o(),n("div",va,[a[20]||(a[20]=e("div",{class:"alert-icon","aria-hidden":"true"},[e("i",{class:"bi bi-exclamation-triangle-fill"})],-1)),e("div",ca,[a[18]||(a[18]=e("div",{class:"alert-title"},"Gagal memuat pengaturan",-1)),e("div",ba,r(R.value),1)]),e("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:P},[...a[19]||(a[19]=[e("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1),v(" Coba lagi ",-1)])])])):c("",!0),e("section",ma,[w.value?(o(),n(j,{key:0},I(4,s=>e("div",{key:s,class:"stat-card stat-card--skeleton"},[...a[21]||(a[21]=[e("div",{class:"stat-icon loading-skeleton","aria-hidden":"true"},null,-1),e("div",{class:"stat-body"},[e("div",{class:"skeleton-line loading-skeleton"}),e("div",{class:"skeleton-line skeleton-line--lg loading-skeleton"})],-1)])])),64)):(o(!0),n(j,{key:1},I(q.value,s=>(o(),n("div",{key:s.key,class:C(["stat-card",s.tone])},[e("div",_a,[e("i",{class:C(s.icon)},null,2)]),e("div",ga,[e("div",fa,r(s.label),1),e("div",ha,r(s.value),1),s.hint?(o(),n("div",ka,r(s.hint),1)):c("",!0)])],2))),128))]),e("section",ya,[e("div",wa,[a[23]||(a[23]=M('<div class="panel-title" data-v-b878f63d><div class="panel-icon" aria-hidden="true" data-v-b878f63d><i class="bi bi-gear-fill" data-v-b878f63d></i></div><div class="panel-title__copy" data-v-b878f63d><h2 data-v-b878f63d>Pengaturan Aplikasi</h2><p class="text-muted" data-v-b878f63d>Perubahan akan langsung berlaku setelah disimpan.</p></div></div>',1)),e("div",xa,[e("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:E,disabled:i.value||!f.value},[...a[22]||(a[22]=[e("i",{class:"bi bi-arrow-counterclockwise","aria-hidden":"true"},null,-1),v(" Reset ",-1)])],8,Sa)])]),e("div",Ca,[e("form",{class:"settings-grid",onSubmit:aa(K,["prevent"])},[e("section",Ta,[a[26]||(a[26]=M('<header class="settings-card__header" data-v-b878f63d><div class="settings-icon tone-cyan" aria-hidden="true" data-v-b878f63d><i class="bi bi-stars" data-v-b878f63d></i></div><div class="settings-head-copy" data-v-b878f63d><h3 data-v-b878f63d>Umum</h3><p class="text-muted" data-v-b878f63d>Identitas aplikasi yang tampil di UI.</p></div></header>',1)),e("div",za,[e("div",Na,[a[24]||(a[24]=e("label",{class:"field-label",for:"app-name"},"Nama Aplikasi",-1)),T(e("input",{id:"app-name","onUpdate:modelValue":a[0]||(a[0]=s=>t.value.app_name=s),type:"text",class:"form-control",placeholder:"Contoh: KaraokeKu",disabled:i.value},null,8,Ma),[[z,t.value.app_name]]),(d=u.value.app_name)!=null&&d.description?(o(),n("div",Ua,r(u.value.app_name.description),1)):c("",!0)]),e("div",Aa,[a[25]||(a[25]=e("label",{class:"field-label",for:"app-tagline"},"Tagline",-1)),T(e("input",{id:"app-tagline","onUpdate:modelValue":a[1]||(a[1]=s=>t.value.app_tagline=s),type:"text",class:"form-control",placeholder:"Contoh: Nyanyi Dimana Saja, Kapan Saja",disabled:i.value},null,8,Ba),[[z,t.value.app_tagline]]),(h=u.value.app_tagline)!=null&&h.description?(o(),n("div",Da,r(u.value.app_tagline.description),1)):c("",!0)])])]),e("section",$a,[a[30]||(a[30]=M('<header class="settings-card__header" data-v-b878f63d><div class="settings-icon tone-green" aria-hidden="true" data-v-b878f63d><i class="bi bi-cloud-arrow-up-fill" data-v-b878f63d></i></div><div class="settings-head-copy" data-v-b878f63d><h3 data-v-b878f63d>Upload</h3><p class="text-muted" data-v-b878f63d>Batas ukuran dan format video yang diizinkan.</p></div></header>',1)),e("div",Fa,[e("div",Pa,[a[27]||(a[27]=e("label",{class:"field-label",for:"max-upload"},"Maksimal Ukuran Upload (MB)",-1)),T(e("input",{id:"max-upload","onUpdate:modelValue":a[2]||(a[2]=s=>t.value.max_upload_size_mb=s),type:"number",min:"1",class:"form-control",disabled:i.value},null,8,Va),[[z,t.value.max_upload_size_mb,void 0,{number:!0}]]),e("div",ja,[e("button",{class:"chip",type:"button",onClick:a[3]||(a[3]=s=>t.value.max_upload_size_mb=200),disabled:i.value}," 200 MB ",8,Ia),e("button",{class:"chip",type:"button",onClick:a[4]||(a[4]=s=>t.value.max_upload_size_mb=500),disabled:i.value}," 500 MB ",8,La),e("button",{class:"chip",type:"button",onClick:a[5]||(a[5]=s=>t.value.max_upload_size_mb=1e3),disabled:i.value}," 1000 MB ",8,Ra)]),(m=u.value.max_upload_size_mb)!=null&&m.description?(o(),n("div",Ea,r(u.value.max_upload_size_mb.description),1)):c("",!0)]),e("div",Ka,[a[29]||(a[29]=e("label",{class:"field-label",for:"allowed-formats"},"Format yang Diizinkan",-1)),T(e("input",{id:"allowed-formats","onUpdate:modelValue":a[6]||(a[6]=s=>t.value.allowed_formats=s),type:"text",class:"form-control",placeholder:"mp4,mkv,webm,avi",disabled:i.value,onBlur:a[7]||(a[7]=s=>t.value.allowed_formats=g(t.value.allowed_formats))},null,40,Ga),[[z,t.value.allowed_formats]]),e("div",Oa,[(o(),n(j,null,I(O,s=>e("button",{key:s,class:C(["chip chip--toggle",{on:F.value.includes(s)}]),type:"button",onClick:V=>J(s),disabled:i.value},r(s),11,Ha)),64))]),e("div",Ja,[a[28]||(a[28]=v(" Total format aktif: ",-1)),e("strong",null,r(F.value.length),1)]),(S=u.value.allowed_formats)!=null&&S.description?(o(),n("div",qa,r(u.value.allowed_formats.description),1)):c("",!0)])])]),e("section",Qa,[a[36]||(a[36]=M('<header class="settings-card__header" data-v-b878f63d><div class="settings-icon tone-blue" aria-hidden="true" data-v-b878f63d><i class="bi bi-layout-text-window-reverse" data-v-b878f63d></i></div><div class="settings-head-copy" data-v-b878f63d><h3 data-v-b878f63d>Tampilan</h3><p class="text-muted" data-v-b878f63d>Atur jumlah data agar nyaman dilihat.</p></div></header>',1)),e("div",Wa,[e("div",Xa,[a[31]||(a[31]=e("label",{class:"field-label",for:"songs-per-page"},"Jumlah Lagu per Halaman",-1)),T(e("input",{id:"songs-per-page","onUpdate:modelValue":a[8]||(a[8]=s=>t.value.songs_per_page=s),type:"number",min:"1",class:"form-control",disabled:i.value},null,8,Ya),[[z,t.value.songs_per_page,void 0,{number:!0}]]),e("div",Za,[e("button",{class:"chip",type:"button",onClick:a[9]||(a[9]=s=>t.value.songs_per_page=10),disabled:i.value},"10",8,ae),e("button",{class:"chip",type:"button",onClick:a[10]||(a[10]=s=>t.value.songs_per_page=20),disabled:i.value},"20",8,ee),e("button",{class:"chip",type:"button",onClick:a[11]||(a[11]=s=>t.value.songs_per_page=40),disabled:i.value},"40",8,se)]),(k=u.value.songs_per_page)!=null&&k.description?(o(),n("div",te,r(u.value.songs_per_page.description),1)):c("",!0)]),e("div",le,[a[35]||(a[35]=e("div",{class:"preview-title"},"Preview",-1)),e("div",ie,[a[32]||(a[32]=e("span",{class:"text-muted"},"Nama",-1)),e("span",ne,r(t.value.app_name||"-"),1)]),e("div",oe,[a[33]||(a[33]=e("span",{class:"text-muted"},"Tagline",-1)),e("span",de,r(t.value.app_tagline||"-"),1)]),e("div",re,[a[34]||(a[34]=e("span",{class:"text-muted"},"Upload max",-1)),e("span",ue,r($(t.value.max_upload_size_mb))+" MB",1)])])])]),e("section",pe,[e("div",ve,[f.value?(o(),n("span",ce,[...a[37]||(a[37]=[e("i",{class:"bi bi-exclamation-circle-fill","aria-hidden":"true"},null,-1),v(" Perubahan belum disimpan ",-1)])])):(o(),n("span",be,[...a[38]||(a[38]=[e("i",{class:"bi bi-check-circle-fill","aria-hidden":"true"},null,-1),v(" Tersimpan ",-1)])]))]),e("div",me,[e("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:E,disabled:i.value||!f.value},[...a[39]||(a[39]=[e("i",{class:"bi bi-arrow-counterclockwise","aria-hidden":"true"},null,-1),v(" Reset ",-1)])],8,_e),e("button",{class:"btn btn-primary btn-sm",type:"submit",disabled:i.value||!f.value},[i.value?(o(),n("span",fe)):(o(),n("i",he)),a[40]||(a[40]=v(" Simpan ",-1))],8,ge)])])],32)])]),Z(sa,{name:"ad-toast"},{default:ea(()=>[B.value?(o(),n("div",{key:0,class:C(["toast",`toast--${N.value}`]),role:"status","aria-live":"polite"},[e("i",{class:C(N.value==="success"?"bi bi-check-circle-fill":N.value==="danger"?"bi bi-x-circle-fill":"bi bi-info-circle-fill"),"aria-hidden":"true"},null,2),e("span",null,r(L.value),1)],2)):c("",!0)]),_:1})])}}},xe=W(ke,[["__scopeId","data-v-b878f63d"]]);export{xe as default};
