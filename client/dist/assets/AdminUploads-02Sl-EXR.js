import{_ as D,r as u,l as T,o as B,c as a,a as s,g as k,n as v,d as c,t as n,F as M,i as S,v as C,x as N,y as R,J as f,k as o}from"./index-DY9xsVSO.js";const V={class:"admin-uploads"},I={class:"page-header"},h={class:"filter-tabs"},F={key:0,class:"badge"},L={key:0,class:"loading-state"},P={key:1,class:"empty-state"},z={key:2,class:"uploads-list"},E={class:"upload-info"},J={class:"upload-meta"},q={class:"upload-status"},G={key:0,class:"upload-actions"},H=["onClick"],K=["onClick"],O={key:1,class:"upload-note"},Q={class:"text-muted"},W={class:"modal-content"},X={class:"modal-header"},Y={class:"modal-body"},Z={class:"mb-3"},tt={class:"modal-footer"},st={__name:"AdminUploads",setup(et){const p=u([]),m=u(!0),i=u("pending"),r=u(!1),g=u(null),b=u(""),y=T(()=>p.value.filter(l=>l.status==="pending").length),d=async()=>{m.value=!0;try{const l=await f.getUploads({status:i.value,limit:100});p.value=l.data.data||[]}catch(l){console.error(l)}finally{m.value=!1}},x=async l=>{try{await f.reviewUpload(l.id,"approved",""),d()}catch(t){console.error(t)}},U=l=>{g.value=l,b.value="",r.value=!0},j=async()=>{try{await f.reviewUpload(g.value.id,"rejected",b.value),r.value=!1,d()}catch(l){console.error(l)}},$=l=>new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"});return B(d),(l,t)=>{var _;return o(),a("div",V,[s("div",I,[t[9]||(t[9]=s("h1",null,"Review Upload",-1)),s("div",h,[s("button",{class:v({active:i.value===""}),onClick:t[0]||(t[0]=e=>{i.value="",d()})},"Semua",2),s("button",{class:v({active:i.value==="pending"}),onClick:t[1]||(t[1]=e=>{i.value="pending",d()})},[t[8]||(t[8]=c(" Pending ",-1)),y.value>0?(o(),a("span",F,n(y.value),1)):k("",!0)],2),s("button",{class:v({active:i.value==="approved"}),onClick:t[2]||(t[2]=e=>{i.value="approved",d()})},"Approved",2),s("button",{class:v({active:i.value==="rejected"}),onClick:t[3]||(t[3]=e=>{i.value="rejected",d()})},"Rejected",2)])]),m.value?(o(),a("div",L,[...t[10]||(t[10]=[s("div",{class:"spinner-border text-primary"},null,-1)])])):p.value.length===0?(o(),a("div",P,[...t[11]||(t[11]=[s("i",{class:"bi bi-inbox"},null,-1),s("p",null,"Tidak ada upload untuk direview",-1)])])):(o(),a("div",z,[(o(!0),a(M,null,S(p.value,e=>{var w;return o(),a("div",{key:e.id,class:"upload-card"},[s("div",E,[s("h4",null,n(e.title),1),s("p",null,n(e.artist||"-")+" • "+n(e.genre||"-")+" • "+n(e.language||"-"),1),s("div",J,[s("span",null,[t[12]||(t[12]=s("i",{class:"bi bi-person"},null,-1)),c(" "+n(((w=e.uploader)==null?void 0:w.name)||"Unknown"),1)]),s("span",null,[t[13]||(t[13]=s("i",{class:"bi bi-calendar"},null,-1)),c(" "+n($(e.created_at)),1)])])]),s("div",q,[s("span",{class:v(["status-badge",e.status])},n(e.status),3)]),e.status==="pending"?(o(),a("div",G,[s("button",{class:"btn btn-sm btn-success",onClick:A=>x(e)},[...t[14]||(t[14]=[s("i",{class:"bi bi-check-lg"},null,-1),c(" Approve ",-1)])],8,H),s("button",{class:"btn btn-sm btn-danger",onClick:A=>U(e)},[...t[15]||(t[15]=[s("i",{class:"bi bi-x-lg"},null,-1),c(" Reject ",-1)])],8,K)])):e.admin_note?(o(),a("div",O,[s("small",Q,n(e.admin_note),1)])):k("",!0)])}),128))])),r.value?(o(),a("div",{key:3,class:"modal-overlay",onClick:t[7]||(t[7]=C(e=>r.value=!1,["self"]))},[s("div",W,[s("div",X,[t[17]||(t[17]=s("h3",null,"Tolak Upload",-1)),s("button",{onClick:t[4]||(t[4]=e=>r.value=!1)},[...t[16]||(t[16]=[s("i",{class:"bi bi-x-lg"},null,-1)])])]),s("form",{onSubmit:C(j,["prevent"])},[s("div",Y,[s("p",null,'Tolak upload "'+n((_=g.value)==null?void 0:_.title)+'"?',1),s("div",Z,[t[18]||(t[18]=s("label",{class:"form-label"},"Alasan (opsional)",-1)),N(s("textarea",{class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>b.value=e),rows:"3",placeholder:"Berikan alasan penolakan..."},null,512),[[R,b.value]])])]),s("div",tt,[s("button",{type:"button",class:"btn btn-ghost",onClick:t[6]||(t[6]=e=>r.value=!1)},"Batal"),t[19]||(t[19]=s("button",{type:"submit",class:"btn btn-danger"},"Tolak Upload",-1))])],32)])])):k("",!0)])}}},at=D(st,[["__scopeId","data-v-c8d1f079"]]);export{at as default};
