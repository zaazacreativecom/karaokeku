import{_ as zt,r as p,c as T,y as Mt,o as Gt,N as Ht,a as n,d as t,i as v,e as O,t as i,f as c,w as Q,g as Wt,F as y,k as A,n as m,b as St,B as R,D as Nt,C as dt,m as Rt,T as rt,O as X,v as o}from"./index-Btw_uZyE.js";const Kt={class:"admin-uploads"},qt={class:"page-header reveal",style:{"--d":"0ms"}},Jt={class:"page-header__copy"},Ot={class:"page-meta text-muted"},Qt={class:"page-header__actions"},Xt=["disabled"],Yt={key:0,class:"alert-card alert-card--danger reveal",style:{"--d":"60ms"},role:"status"},Zt={class:"alert-body"},te={class:"alert-text text-muted"},ee={class:"stats-grid reveal",style:{"--d":"90ms"},"aria-label":"Ringkasan upload"},se={class:"stat-icon","aria-hidden":"true"},ae={class:"stat-body"},le={class:"stat-label"},ie={class:"stat-value"},ne={key:0,class:"stat-hint text-muted"},oe=["onClick"],de={class:"panel filters-panel reveal",style:{"--d":"120ms"},"aria-label":"Filter upload"},re={class:"panel-body"},ue={class:"filters-row"},ce={class:"field"},ve=["disabled"],be={class:"field field--grow"},pe={class:"search-control"},me={class:"field"},ge=["disabled"],ke={class:"chips-row","aria-label":"Shortcut filter"},he={class:"chip-count"},_e={class:"chip-count"},fe={class:"chip-count"},ye={class:"chip-count"},we={class:"panel uploads-panel reveal",style:{"--d":"150ms"},"aria-label":"Daftar upload"},Ce={class:"panel-header"},xe={class:"panel-title"},Ue={class:"panel-title__copy"},je={class:"text-muted"},Te={class:"panel-actions"},Ae=["disabled"],De={class:"panel-body"},$e={class:"table-wrap","aria-label":"Tabel upload"},Le={class:"uploads-table"},Me={class:"upload-cell"},Se={class:"upload-thumb","aria-hidden":"true"},Ne=["src"],Re={key:1,class:"thumb-fallback"},Pe={class:"upload-info"},Fe=["title"],Be={class:"upload-sub text-muted"},Ee=["title"],Ie=["title"],Ve=["title"],ze=["title"],Ge=["title"],He=["title"],We={class:"td-size"},Ke={class:"td-date"},qe={class:"td-actions"},Je={class:"row-actions"},Oe=["onClick"],Qe=["onClick"],Xe=["onClick"],Ye=["onClick"],Ze={key:0,class:"tr-empty"},ts={class:"upload-cards","aria-label":"Daftar upload (mobile)"},es={class:"upload-card__top"},ss={class:"upload-card__left"},as={class:"upload-thumb upload-thumb--sm","aria-hidden":"true"},ls=["src"],is={key:1,class:"thumb-fallback"},ns={class:"upload-card__copy"},os=["title"],ds=["title"],rs={class:"upload-card__meta"},us={class:"pill pill--soft"},cs={class:"pill pill--soft"},vs={class:"pill"},bs={key:0,class:"upload-card__note"},ps={class:"note-text"},ms={class:"upload-card__actions"},gs=["onClick"],ks=["onClick"],hs=["onClick"],_s=["onClick"],fs={key:0,class:"empty-state"},ys={key:0,class:"pagination-row"},ws=["disabled"],Cs={class:"page-indicator text-muted"},xs=["disabled"],Us={class:"modal-content"},js={class:"modal-body"},Ts={class:"detail-grid"},As={class:"detail-card detail-card--main"},Ds={class:"detail-title"},$s={class:"detail-sub text-muted"},Ls={class:"detail-card"},Ms={class:"detail-value"},Ss={class:"detail-sub text-muted"},Ns={class:"detail-card"},Rs={class:"detail-value"},Ps={class:"detail-sub text-muted"},Fs={class:"detail-grid detail-grid--secondary"},Bs={class:"detail-card"},Es={class:"detail-value"},Is={class:"detail-card"},Vs={class:"detail-value"},zs={class:"detail-card"},Gs={class:"detail-value"},Hs={class:"detail-card detail-card--thumb"},Ws={class:"thumb-preview"},Ks=["src"],qs={key:1,class:"thumb-empty text-muted"},Js={class:"detail-section"},Os=["disabled"],Qs={key:0,class:"text-muted hint"},Xs={key:1,class:"text-muted hint"},Ys={key:0,class:"detail-section"},Zs={class:"review-grid"},ta={class:"review-item"},ea={class:"review-value"},sa={class:"review-item"},aa={class:"review-value"},la={class:"modal-footer"},ia={class:"modal-content modal-content--confirm"},na={class:"modal-header"},oa={class:"modal-title"},da={class:"modal-icon","aria-hidden":"true"},ra={class:"modal-title__copy"},ua={class:"text-muted"},ca={class:"modal-body"},va={class:"confirm-summary"},ba={class:"confirm-item"},pa={class:"confirm-value"},ma={class:"confirm-item"},ga={class:"confirm-value"},ka={class:"confirm-item"},ha={class:"confirm-value"},_a={key:0,class:"confirm-note"},fa={class:"modal-footer"},ya=["disabled"],wa=["disabled"],Ca={key:0,class:"spinner","aria-hidden":"true"},xa={__name:"AdminUploads",setup(Ua){const Y="/api",P=p([]),b=p({total:0,page:1,limit:20,totalPages:1}),k=p({total:0,pending:0,approved:0,rejected:0}),h=p(!0),F=p(!0),Z=p(""),tt=p(""),et=p(Date.now()),_=p("pending"),D=p(""),C=p(!1),r=p(null),$=p(""),f=p(!1),u=p({open:!1,action:"",status:"",upload:null,title:"",message:"",confirmLabel:"",icon:"bi bi-exclamation-triangle-fill",variant:"btn-primary",note:""}),st=p(!1),ut=p(""),B=p("success");let L=null;const ct=T({get:()=>b.value.limit||20,set:a=>{b.value.page=1,b.value.limit=Number(a)||20}}),vt=T(()=>Z.value||tt.value||""),E=T(()=>h.value||F.value),w=a=>new Intl.NumberFormat("id-ID").format(Number(a)||0),Pt=T(()=>{const a=new Date(et.value||Date.now());return new Intl.DateTimeFormat("id-ID",{hour:"2-digit",minute:"2-digit"}).format(a)}),I=a=>a?new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-",at=a=>{const e=Number(a);if(!Number.isFinite(e)||e<=0)return"-";const l=["B","KB","MB","GB","TB"],s=Math.min(l.length-1,Math.floor(Math.log(e)/Math.log(1024))),d=e/Math.pow(1024,s),g=s===0?0:d>=10?1:2;return`${d.toFixed(g)} ${l[s]}`},V=a=>({pending:"Pending",approved:"Approved",rejected:"Rejected"})[a]||a||"-",lt=a=>a==="approved"?"pill--success":a==="rejected"?"pill--danger":"pill--warning",it=a=>a==="approved"?"bi bi-check-circle-fill":a==="rejected"?"bi bi-x-circle-fill":"bi bi-hourglass-split",x=a=>{var e,l;return((e=a==null?void 0:a.uploader)==null?void 0:e.name)||((l=a==null?void 0:a.uploader)==null?void 0:l.username)||"Unknown"},z=a=>{var e;return((e=a==null?void 0:a.uploader)==null?void 0:e.email)||"-"},Ft=T(()=>[{key:"total",label:"Total Upload",value:k.value.total||0,icon:"bi bi-collection",tone:"tone-cyan",statusFilter:"",linkLabel:"Lihat"},{key:"pending",label:"Pending",value:k.value.pending||0,icon:"bi bi-hourglass-split",tone:"tone-blue",statusFilter:"pending",linkLabel:"Review"},{key:"approved",label:"Approved",value:k.value.approved||0,icon:"bi bi-check-circle-fill",tone:"tone-green",statusFilter:"approved",linkLabel:"Lihat"},{key:"rejected",label:"Rejected",value:k.value.rejected||0,icon:"bi bi-x-circle-fill",tone:"tone-blue",statusFilter:"rejected",linkLabel:"Lihat"}]),M=T(()=>{const a=Array.isArray(P.value)?P.value:[],e=String(D.value||"").trim().toLowerCase();return e?a.filter(l=>[l==null?void 0:l.title,l==null?void 0:l.artist,l==null?void 0:l.genre,l==null?void 0:l.language,x(l),z(l),V(l==null?void 0:l.status),l==null?void 0:l.admin_note].filter(Boolean).join(" ").toLowerCase().includes(e)):a}),nt=a=>{if(!a)return"";let e=String(a).trim();if(e.includes("localhost")&&(e=e.replace(/^http(s)?:\/\/localhost(:\d+)?/,"")),e.startsWith("http"))return e;const l=Y.endsWith("/api")?Y.replace("/api",""):Y;return l.includes("localhost")?e.startsWith("/")?e:`/${e}`:`${l}${e.startsWith("/")?"":"/"}${e}`},G=(a,e="success")=>{ut.value=a,B.value=e,st.value=!0,L&&clearTimeout(L),L=setTimeout(()=>{st.value=!1},2500)},H=async()=>{var a,e;h.value=!0,Z.value="";try{const l={status:_.value||void 0,page:b.value.page||1,limit:b.value.limit||20},s=await X.getUploads(l);P.value=s.data.data||[];const d=s.data.meta||{};b.value={total:Number(d.total)||0,page:Number(d.page)||1,limit:Number(d.limit)||b.value.limit||20,totalPages:Number(d.totalPages)||1},et.value=Date.now()}catch(l){console.error("Error fetching uploads:",l),Z.value=((e=(a=l.response)==null?void 0:a.data)==null?void 0:e.message)||"Gagal memuat daftar upload",P.value=[]}finally{h.value=!1}},W=async a=>{var l;const e=await X.getUploads({status:a||void 0,page:1,limit:1});return Number((l=e.data.meta)==null?void 0:l.total)||0},Bt=async()=>{var a,e;F.value=!0,tt.value="";try{const[l,s,d,g]=await Promise.all([W(""),W("pending"),W("approved"),W("rejected")]);k.value={total:l,pending:s,approved:d,rejected:g},et.value=Date.now()}catch(l){console.error("Error fetching upload stats:",l),tt.value=((e=(a=l.response)==null?void 0:a.data)==null?void 0:e.message)||"Gagal memuat statistik upload",k.value={total:0,pending:0,approved:0,rejected:0}}finally{F.value=!1}},U=async()=>{await Promise.all([Bt(),H()])},S=a=>{_.value=a};Mt(_,()=>{b.value.page=1,H()}),Mt(()=>b.value.limit,()=>{b.value.page=1,H()});const bt=a=>{const e=Math.max(1,Math.min(Number(a)||1,b.value.totalPages||1));e!==b.value.page&&(b.value.page=e,H())},pt=a=>{r.value=a,$.value=(a==null?void 0:a.admin_note)||"",C.value=!0},K=()=>{C.value=!1},ot=a=>{a&&(u.value={open:!0,action:"delete",status:"",upload:a,title:"Hapus upload ini?",message:"Upload yang sudah approved tidak bisa dihapus.",confirmLabel:"Hapus",icon:"bi bi-trash",variant:"btn-danger",note:""})},j=(a,e,l)=>{if(!a)return;const s=e==="approved";u.value={open:!0,action:"review",status:e,upload:a,title:s?"Approve upload ini?":"Reject upload ini?",message:s?"Upload akan diproses dan dibuatkan lagu baru di katalog.":"Upload akan ditolak dan file akan dihapus dari server.",confirmLabel:s?"Approve":"Reject",icon:s?"bi bi-check-lg":"bi bi-x-lg",variant:s?"btn-success":"btn-danger",note:String(l||"")}},q=()=>{f.value||(u.value.open=!1)},Et=async(a,e,l)=>{var s,d,g;if(a!=null&&a.id)try{await X.reviewUpload(a.id,e,l||""),G(e==="approved"?"Upload berhasil di-approve":"Upload berhasil di-reject","success"),((s=r.value)==null?void 0:s.id)===a.id&&(C.value=!1),await U()}catch(N){console.error("Error reviewing upload:",N),G(((g=(d=N.response)==null?void 0:d.data)==null?void 0:g.message)||"Gagal memproses upload","danger")}},It=async a=>{var e,l,s;if(a!=null&&a.id)try{await X.deleteUpload(a.id),G("Upload berhasil dihapus","success"),((e=r.value)==null?void 0:e.id)===a.id&&(C.value=!1),await U()}catch(d){console.error("Error deleting upload:",d),G(((s=(l=d.response)==null?void 0:l.data)==null?void 0:s.message)||"Gagal menghapus upload","danger")}},Vt=async()=>{if(!(!u.value.open||f.value)){f.value=!0;try{u.value.action==="delete"?await It(u.value.upload):u.value.action==="review"&&await Et(u.value.upload,u.value.status,u.value.note)}finally{f.value=!1,u.value.open=!1}}},mt=a=>{if(a.key==="Escape"){if(u.value.open)return q();if(C.value)return K()}};return Gt(()=>{U(),window.addEventListener("keydown",mt)}),Ht(()=>{window.removeEventListener("keydown",mt),L&&clearTimeout(L)}),(a,e)=>{const l=Wt("router-link");return o(),n("div",Kt,[t("header",qt,[t("div",Jt,[e[16]||(e[16]=t("div",{class:"page-badge"},[t("i",{class:"bi bi-cloud-check-fill","aria-hidden":"true"}),t("span",null,"Review Upload")],-1)),e[17]||(e[17]=t("h1",null,"Review upload user dengan lebih cepat",-1)),e[18]||(e[18]=t("p",{class:"text-muted"}," Approve untuk menambahkan ke katalog lagu, atau reject dengan catatan agar user paham perbaikannya. ",-1)),t("div",Ot,[e[15]||(e[15]=t("i",{class:"bi bi-clock","aria-hidden":"true"},null,-1)),t("span",null,"Terakhir update: "+i(Pt.value),1)])]),t("div",Qt,[t("button",{class:"btn btn-ghost",type:"button",onClick:U,disabled:E.value},[e[19]||(e[19]=t("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1)),c(" "+i(E.value?"Memuat…":"Refresh"),1)],8,Xt),O(l,{to:"/admin/songs",class:"btn btn-primary"},{default:Q(()=>[...e[20]||(e[20]=[t("i",{class:"bi bi-music-note-list","aria-hidden":"true"},null,-1),c(" Manajemen Lagu ",-1)])]),_:1})])]),vt.value&&!E.value?(o(),n("div",Yt,[e[23]||(e[23]=t("div",{class:"alert-icon","aria-hidden":"true"},[t("i",{class:"bi bi-exclamation-triangle-fill"})],-1)),t("div",Zt,[e[21]||(e[21]=t("div",{class:"alert-title"},"Gagal memuat upload",-1)),t("div",te,i(vt.value),1)]),t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:U},[...e[22]||(e[22]=[t("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1),c(" Coba lagi ",-1)])])])):v("",!0),t("section",ee,[F.value?(o(),n(y,{key:0},A(4,s=>t("div",{key:s,class:"stat-card stat-card--skeleton"},[...e[24]||(e[24]=[t("div",{class:"stat-icon loading-skeleton","aria-hidden":"true"},null,-1),t("div",{class:"stat-body"},[t("div",{class:"skeleton-line loading-skeleton"}),t("div",{class:"skeleton-line skeleton-line--lg loading-skeleton"})],-1)])])),64)):(o(!0),n(y,{key:1},A(Ft.value,s=>(o(),n("div",{key:s.key,class:m(["stat-card",s.tone])},[t("div",se,[t("i",{class:m(s.icon)},null,2)]),t("div",ae,[t("div",le,i(s.label),1),t("div",ie,i(w(s.value)),1),s.hint?(o(),n("div",ne,i(s.hint),1)):v("",!0)]),s.statusFilter!==void 0?(o(),n("button",{key:0,class:"stat-link",type:"button",onClick:d=>S(s.statusFilter)},[t("span",null,i(s.linkLabel),1),e[25]||(e[25]=t("i",{class:"bi bi-arrow-right","aria-hidden":"true"},null,-1))],8,oe)):v("",!0)],2))),128))]),t("section",de,[e[37]||(e[37]=St('<div class="panel-header panel-header--compact" data-v-cce4486b><div class="panel-title" data-v-cce4486b><div class="panel-icon panel-icon--soft" aria-hidden="true" data-v-cce4486b><i class="bi bi-funnel-fill" data-v-cce4486b></i></div><div class="panel-title__copy" data-v-cce4486b><h2 data-v-cce4486b>Filter</h2><p class="text-muted" data-v-cce4486b>Cari cepat berdasarkan judul, artis, user, atau status.</p></div></div></div>',1)),t("div",re,[t("div",ue,[t("div",ce,[e[27]||(e[27]=t("label",{class:"field-label",for:"upload-status"},"Status",-1)),R(t("select",{id:"upload-status","onUpdate:modelValue":e[0]||(e[0]=s=>_.value=s),class:"form-select",disabled:h.value},[...e[26]||(e[26]=[t("option",{value:""},"Semua",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1)])],8,ve),[[Nt,_.value]])]),t("div",be,[e[30]||(e[30]=t("label",{class:"field-label",for:"upload-search"},"Cari",-1)),t("div",pe,[e[29]||(e[29]=t("i",{class:"bi bi-search","aria-hidden":"true"},null,-1)),R(t("input",{id:"upload-search","onUpdate:modelValue":e[1]||(e[1]=s=>D.value=s),type:"text",class:"form-control",placeholder:"Cari judul, artis, genre, user, email…"},null,512),[[dt,D.value]]),D.value?(o(),n("button",{key:0,class:"icon-clear",type:"button",onClick:e[2]||(e[2]=s=>D.value=""),"aria-label":"Hapus pencarian"},[...e[28]||(e[28]=[t("i",{class:"bi bi-x-circle-fill","aria-hidden":"true"},null,-1)])])):v("",!0)])]),t("div",me,[e[32]||(e[32]=t("label",{class:"field-label",for:"upload-limit"},"Per halaman",-1)),R(t("select",{id:"upload-limit","onUpdate:modelValue":e[3]||(e[3]=s=>ct.value=s),class:"form-select",disabled:h.value},[...e[31]||(e[31]=[t("option",{value:10},"10",-1),t("option",{value:20},"20",-1),t("option",{value:50},"50",-1)])],8,ge),[[Nt,ct.value,void 0,{number:!0}]])])]),t("div",ke,[t("button",{class:m(["chip",{on:_.value===""}]),type:"button",onClick:e[4]||(e[4]=s=>S(""))},[e[33]||(e[33]=t("span",null,"Semua",-1)),t("span",he,i(w(k.value.total||0)),1)],2),t("button",{class:m(["chip",{on:_.value==="pending"}]),type:"button",onClick:e[5]||(e[5]=s=>S("pending"))},[e[34]||(e[34]=t("span",null,"Pending",-1)),t("span",_e,i(w(k.value.pending||0)),1)],2),t("button",{class:m(["chip",{on:_.value==="approved"}]),type:"button",onClick:e[6]||(e[6]=s=>S("approved"))},[e[35]||(e[35]=t("span",null,"Approved",-1)),t("span",fe,i(w(k.value.approved||0)),1)],2),t("button",{class:m(["chip",{on:_.value==="rejected"}]),type:"button",onClick:e[7]||(e[7]=s=>S("rejected"))},[e[36]||(e[36]=t("span",null,"Rejected",-1)),t("span",ye,i(w(k.value.rejected||0)),1)],2)])])]),t("section",we,[t("div",Ce,[t("div",xe,[e[42]||(e[42]=t("div",{class:"panel-icon","aria-hidden":"true"},[t("i",{class:"bi bi-inboxes"})],-1)),t("div",Ue,[e[41]||(e[41]=t("h2",null,"Daftar Upload",-1)),t("p",je,[e[38]||(e[38]=c(" Menampilkan ",-1)),t("strong",null,i(w(M.value.length)),1),e[39]||(e[39]=c(" dari ",-1)),t("strong",null,i(w(b.value.total)),1),e[40]||(e[40]=c(" data. ",-1))])])]),t("div",Te,[t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:U,disabled:E.value},[...e[43]||(e[43]=[t("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1),c(" Refresh ",-1)])],8,Ae)])]),t("div",De,[t("div",$e,[t("table",Le,[e[54]||(e[54]=t("thead",null,[t("tr",null,[t("th",null,"Upload"),t("th",null,"User"),t("th",null,"Ukuran"),t("th",null,"Tanggal"),t("th",null,"Status"),t("th",{class:"th-actions"},"Aksi")])],-1)),t("tbody",null,[h.value?(o(),n(y,{key:0},A(7,s=>t("tr",{key:s,class:"tr-skeleton"},[...e[44]||(e[44]=[t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1)])])),64)):(o(),n(y,{key:1},[(o(!0),n(y,null,A(M.value,s=>(o(),n("tr",{key:s.id},[t("td",null,[t("div",Me,[t("div",Se,[s.thumbnail_url?(o(),n("img",{key:0,src:nt(s.thumbnail_url),alt:"",loading:"lazy"},null,8,Ne)):(o(),n("div",Re,[...e[45]||(e[45]=[t("i",{class:"bi bi-cloud-upload","aria-hidden":"true"},null,-1)])]))]),t("div",Pe,[t("div",{class:"upload-title",title:s.title},i(s.title),9,Fe),t("div",Be,[t("span",{class:"upload-artist",title:s.artist||"-"},i(s.artist||"-"),9,Ee),e[46]||(e[46]=t("span",{class:"dot"},"•",-1)),t("span",{title:s.genre||"-"},i(s.genre||"-"),9,Ie),e[47]||(e[47]=t("span",{class:"dot"},"•",-1)),t("span",{title:s.language||"-"},i(s.language||"-"),9,Ve)]),s.admin_note?(o(),n("div",{key:0,class:"note-pill",title:s.admin_note},[...e[48]||(e[48]=[t("i",{class:"bi bi-chat-left-text","aria-hidden":"true"},null,-1),c(" Ada catatan ",-1)])],8,ze)):v("",!0)])])]),t("td",null,[t("div",{class:"user-name",title:x(s)},i(x(s)),9,Ge),t("div",{class:"user-email text-muted",title:z(s)},i(z(s)),9,He)]),t("td",We,i(at(s.file_size)),1),t("td",Ke,i(I(s.created_at)),1),t("td",null,[t("span",{class:m(["pill",lt(s.status)])},[t("i",{class:m(it(s.status)),"aria-hidden":"true"},null,2),c(" "+i(V(s.status)),1)],2)]),t("td",qe,[t("div",Je,[t("button",{class:"btn btn-ghost btn-sm btn-icon",type:"button",onClick:d=>pt(s),"aria-label":"Detail"},[...e[49]||(e[49]=[t("i",{class:"bi bi-eye","aria-hidden":"true"},null,-1)])],8,Oe),s.status==="pending"?(o(),n("button",{key:0,class:"btn btn-success btn-sm btn-icon",type:"button",onClick:d=>j(s,"approved",""),"aria-label":"Approve"},[...e[50]||(e[50]=[t("i",{class:"bi bi-check-lg","aria-hidden":"true"},null,-1)])],8,Qe)):v("",!0),s.status==="pending"?(o(),n("button",{key:1,class:"btn btn-danger btn-sm btn-icon",type:"button",onClick:d=>j(s,"rejected",""),"aria-label":"Reject"},[...e[51]||(e[51]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])],8,Xe)):v("",!0),s.status!=="approved"?(o(),n("button",{key:2,class:"btn btn-ghost btn-sm btn-icon btn-icon--danger",type:"button",onClick:d=>ot(s),"aria-label":"Hapus"},[...e[52]||(e[52]=[t("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])],8,Ye)):v("",!0)])])]))),128)),M.value.length?v("",!0):(o(),n("tr",Ze,[...e[53]||(e[53]=[t("td",{colspan:"6"},[t("div",{class:"empty-state"},[t("div",{class:"empty-icon","aria-hidden":"true"},[t("i",{class:"bi bi-inbox"})]),t("h3",null,"Tidak ada upload"),t("p",{class:"text-muted"},"Coba ubah filter status atau kata kunci pencarian.")])],-1)])]))],64))])])]),t("div",ts,[h.value?(o(),n(y,{key:0},A(6,s=>t("div",{key:s,class:"upload-card upload-card--skeleton"},[...e[55]||(e[55]=[St('<div class="skeleton-line loading-skeleton" data-v-cce4486b></div><div class="skeleton-line skeleton-line--sm loading-skeleton" data-v-cce4486b></div><div class="skeleton-chip-row" data-v-cce4486b><div class="skeleton-chip loading-skeleton" data-v-cce4486b></div><div class="skeleton-chip loading-skeleton" data-v-cce4486b></div><div class="skeleton-chip loading-skeleton" data-v-cce4486b></div></div><div class="skeleton-btn-row" data-v-cce4486b><div class="skeleton-btn loading-skeleton" data-v-cce4486b></div><div class="skeleton-btn loading-skeleton" data-v-cce4486b></div></div>',4)])])),64)):(o(),n(y,{key:1},[(o(!0),n(y,null,A(M.value,s=>(o(),n("div",{key:s.id,class:"upload-card"},[t("div",es,[t("div",ss,[t("div",as,[s.thumbnail_url?(o(),n("img",{key:0,src:nt(s.thumbnail_url),alt:"",loading:"lazy"},null,8,ls)):(o(),n("div",is,[...e[56]||(e[56]=[t("i",{class:"bi bi-cloud-upload","aria-hidden":"true"},null,-1)])]))]),t("div",ns,[t("div",{class:"upload-title",title:s.title},i(s.title),9,os),t("div",{class:"upload-sub text-muted",title:s.artist||"-"},i(s.artist||"-"),9,ds)])]),t("span",{class:m(["pill",lt(s.status)])},[t("i",{class:m(it(s.status)),"aria-hidden":"true"},null,2),c(" "+i(V(s.status)),1)],2)]),t("div",rs,[t("span",us,[e[57]||(e[57]=t("i",{class:"bi bi-person","aria-hidden":"true"},null,-1)),c(" "+i(x(s)),1)]),t("span",cs,[e[58]||(e[58]=t("i",{class:"bi bi-calendar2","aria-hidden":"true"},null,-1)),c(" "+i(I(s.created_at)),1)]),t("span",vs,[e[59]||(e[59]=t("i",{class:"bi bi-hdd","aria-hidden":"true"},null,-1)),c(" "+i(at(s.file_size)),1)])]),s.admin_note?(o(),n("div",bs,[e[60]||(e[60]=t("div",{class:"note-label text-muted"},"Catatan",-1)),t("div",ps,i(s.admin_note),1)])):v("",!0),t("div",ms,[t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:d=>pt(s)},[...e[61]||(e[61]=[t("i",{class:"bi bi-eye","aria-hidden":"true"},null,-1),c(" Detail ",-1)])],8,gs),s.status!=="approved"?(o(),n("button",{key:0,class:"btn btn-ghost btn-sm btn-icon btn-icon--danger",type:"button",onClick:d=>ot(s),"aria-label":"Hapus"},[...e[62]||(e[62]=[t("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])],8,ks)):v("",!0),s.status==="pending"?(o(),n("button",{key:1,class:"btn btn-success btn-sm",type:"button",onClick:d=>j(s,"approved","")},[...e[63]||(e[63]=[t("i",{class:"bi bi-check-lg","aria-hidden":"true"},null,-1),c(" Approve ",-1)])],8,hs)):v("",!0),s.status==="pending"?(o(),n("button",{key:2,class:"btn btn-danger btn-sm",type:"button",onClick:d=>j(s,"rejected","")},[...e[64]||(e[64]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1),c(" Reject ",-1)])],8,_s)):v("",!0)])]))),128)),M.value.length?v("",!0):(o(),n("div",fs,[...e[65]||(e[65]=[t("div",{class:"empty-icon","aria-hidden":"true"},[t("i",{class:"bi bi-inbox"})],-1),t("h3",null,"Tidak ada upload",-1),t("p",{class:"text-muted"},"Coba ubah filter status atau kata kunci pencarian.",-1)])]))],64))]),b.value.totalPages>1?(o(),n("div",ys,[t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:e[8]||(e[8]=s=>bt(b.value.page-1)),disabled:h.value||b.value.page<=1},[...e[66]||(e[66]=[t("i",{class:"bi bi-chevron-left","aria-hidden":"true"},null,-1),c(" Sebelumnya ",-1)])],8,ws),t("div",Cs,[e[67]||(e[67]=c(" Halaman ",-1)),t("strong",null,i(b.value.page),1),c(" / "+i(b.value.totalPages),1)]),t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:e[9]||(e[9]=s=>bt(b.value.page+1)),disabled:h.value||b.value.page>=b.value.totalPages},[...e[68]||(e[68]=[c(" Berikutnya ",-1),t("i",{class:"bi bi-chevron-right","aria-hidden":"true"},null,-1)])],8,xs)])):v("",!0)])]),O(rt,{name:"ad-modal"},{default:Q(()=>{var s,d,g,N,gt,kt,ht,_t,ft,yt,wt,Ct,xt,Ut,jt,Tt,At,Dt,$t,Lt;return[C.value?(o(),n("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Detail upload",onClick:Rt(K,["self"])},[t("div",Us,[t("div",{class:"modal-header"},[e[70]||(e[70]=t("div",{class:"modal-title"},[t("div",{class:"modal-icon","aria-hidden":"true"},[t("i",{class:"bi bi-file-earmark-music"})]),t("div",{class:"modal-title__copy"},[t("h3",null,"Detail Upload"),t("p",{class:"text-muted"},"Periksa data dan lakukan review.")])],-1)),t("button",{class:"icon-close",type:"button",onClick:K,"aria-label":"Tutup modal"},[...e[69]||(e[69]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])])]),t("div",js,[t("div",Ts,[t("div",As,[e[71]||(e[71]=t("div",{class:"detail-label"},"Upload",-1)),t("div",Ds,i(((s=r.value)==null?void 0:s.title)||"-"),1),t("div",$s,i(((d=r.value)==null?void 0:d.artist)||"-"),1)]),t("div",Ls,[e[72]||(e[72]=t("div",{class:"detail-label"},"User",-1)),t("div",Ms,i(x(r.value)),1),t("div",Ss,i(z(r.value)),1)]),t("div",Ns,[e[73]||(e[73]=t("div",{class:"detail-label"},"Status",-1)),t("div",Rs,[t("span",{class:m(["pill",lt((g=r.value)==null?void 0:g.status)])},[t("i",{class:m(it((N=r.value)==null?void 0:N.status)),"aria-hidden":"true"},null,2),c(" "+i(V((gt=r.value)==null?void 0:gt.status)),1)],2)]),t("div",Ps,i(I((kt=r.value)==null?void 0:kt.created_at)),1)])]),t("div",Fs,[t("div",Bs,[e[74]||(e[74]=t("div",{class:"detail-label"},"Genre",-1)),t("div",Es,i(((ht=r.value)==null?void 0:ht.genre)||"-"),1)]),t("div",Is,[e[75]||(e[75]=t("div",{class:"detail-label"},"Bahasa",-1)),t("div",Vs,i(((_t=r.value)==null?void 0:_t.language)||"-"),1)]),t("div",zs,[e[76]||(e[76]=t("div",{class:"detail-label"},"Ukuran",-1)),t("div",Gs,i(at((ft=r.value)==null?void 0:ft.file_size)),1)]),t("div",Hs,[e[77]||(e[77]=t("div",{class:"detail-label"},"Thumbnail",-1)),t("div",Ws,[(yt=r.value)!=null&&yt.thumbnail_url?(o(),n("img",{key:0,src:nt(r.value.thumbnail_url),alt:"Thumbnail upload",loading:"lazy"},null,8,Ks)):(o(),n("div",qs,"-"))])])]),t("div",Js,[e[78]||(e[78]=t("div",{class:"section-title"},"Catatan Admin",-1)),R(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=J=>$.value=J),class:"form-control",rows:"3",placeholder:"Tambahkan catatan (opsional)…",disabled:((wt=r.value)==null?void 0:wt.status)!=="pending"},null,8,Os),[[dt,$.value]]),((Ct=r.value)==null?void 0:Ct.status)!=="pending"?(o(),n("div",Qs,"Catatan hanya bisa diubah saat status masih pending.")):(o(),n("div",Xs,"Catatan ini akan tersimpan saat kamu approve/reject."))]),(xt=r.value)!=null&&xt.reviewer||(Ut=r.value)!=null&&Ut.reviewed_at?(o(),n("div",Ys,[e[81]||(e[81]=t("div",{class:"section-title"},"Info Review",-1)),t("div",Zs,[t("div",ta,[e[79]||(e[79]=t("div",{class:"review-label text-muted"},"Reviewer",-1)),t("div",ea,i(((Tt=(jt=r.value)==null?void 0:jt.reviewer)==null?void 0:Tt.name)||"-"),1)]),t("div",sa,[e[80]||(e[80]=t("div",{class:"review-label text-muted"},"Waktu",-1)),t("div",aa,i(I((At=r.value)==null?void 0:At.reviewed_at)),1)])])])):v("",!0)]),t("div",la,[t("button",{class:"btn btn-ghost",type:"button",onClick:K},"Tutup"),((Dt=r.value)==null?void 0:Dt.status)!=="approved"?(o(),n("button",{key:0,class:"btn btn-ghost btn-icon btn-icon--danger",type:"button",onClick:e[11]||(e[11]=J=>ot(r.value)),"aria-label":"Hapus upload"},[...e[82]||(e[82]=[t("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])])):v("",!0),(($t=r.value)==null?void 0:$t.status)==="pending"?(o(),n("button",{key:1,class:"btn btn-danger",type:"button",onClick:e[12]||(e[12]=J=>j(r.value,"rejected",$.value))},[...e[83]||(e[83]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1),c(" Reject ",-1)])])):v("",!0),((Lt=r.value)==null?void 0:Lt.status)==="pending"?(o(),n("button",{key:2,class:"btn btn-success",type:"button",onClick:e[13]||(e[13]=J=>j(r.value,"approved",$.value))},[...e[84]||(e[84]=[t("i",{class:"bi bi-check-lg","aria-hidden":"true"},null,-1),c(" Approve ",-1)])])):v("",!0)])])])):v("",!0)]}),_:1}),O(rt,{name:"ad-modal"},{default:Q(()=>{var s,d;return[u.value.open?(o(),n("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Konfirmasi aksi",onClick:Rt(q,["self"])},[t("div",ia,[t("div",na,[t("div",oa,[t("div",da,[t("i",{class:m(u.value.icon)},null,2)]),t("div",ra,[t("h3",null,i(u.value.title),1),t("p",ua,i(u.value.message),1)])]),t("button",{class:"icon-close",type:"button",onClick:q,"aria-label":"Tutup konfirmasi"},[...e[85]||(e[85]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])])]),t("div",ca,[t("div",va,[t("div",ba,[e[86]||(e[86]=t("div",{class:"confirm-label text-muted"},"Judul",-1)),t("div",pa,i(((s=u.value.upload)==null?void 0:s.title)||"-"),1)]),t("div",ma,[e[87]||(e[87]=t("div",{class:"confirm-label text-muted"},"Artis",-1)),t("div",ga,i(((d=u.value.upload)==null?void 0:d.artist)||"-"),1)]),t("div",ka,[e[88]||(e[88]=t("div",{class:"confirm-label text-muted"},"User",-1)),t("div",ha,i(x(u.value.upload)),1)])]),u.value.action==="review"?(o(),n("div",_a,[e[89]||(e[89]=t("div",{class:"confirm-note__title"},"Catatan Admin (opsional)",-1)),R(t("textarea",{"onUpdate:modelValue":e[14]||(e[14]=g=>u.value.note=g),class:"form-control",rows:"3",placeholder:"Tambahkan catatan untuk user…"},null,512),[[dt,u.value.note]]),e[90]||(e[90]=t("div",{class:"text-muted hint"},"Catatan akan tersimpan pada upload yang direview.",-1))])):v("",!0)]),t("div",fa,[t("button",{class:"btn btn-ghost",type:"button",onClick:q,disabled:f.value},"Batal",8,ya),t("button",{class:m(["btn",u.value.variant]),type:"button",onClick:Vt,disabled:f.value},[f.value?(o(),n("span",Ca)):(o(),n("i",{key:1,class:m(u.value.icon),"aria-hidden":"true"},null,2)),c(" "+i(f.value?"Memproses…":u.value.confirmLabel),1)],10,wa)])])])):v("",!0)]}),_:1}),O(rt,{name:"ad-toast"},{default:Q(()=>[st.value?(o(),n("div",{key:0,class:m(["toast",`toast--${B.value}`]),role:"status","aria-live":"polite"},[t("i",{class:m(B.value==="success"?"bi bi-check-circle-fill":B.value==="danger"?"bi bi-x-circle-fill":"bi bi-info-circle-fill"),"aria-hidden":"true"},null,2),t("span",null,i(ut.value),1)],2)):v("",!0)]),_:1})])}}},Ta=zt(xa,[["__scopeId","data-v-cce4486b"]]);export{Ta as default};
