import{_ as Tt,u as At,r as u,c as N,y as tt,o as Nt,N as Dt,a as i,d as t,i as g,e as et,t as l,f as r,F as w,k as D,n as b,b as yt,B as I,D as st,C as gt,w as at,m as lt,T as it,O as R,v as n}from"./index-Btw_uZyE.js";const Pt={class:"admin-users"},Et={class:"page-header reveal",style:{"--d":"0ms"}},St={class:"page-header__copy"},Mt={class:"page-meta text-muted"},$t={class:"page-header__actions"},Bt=["disabled"],It={key:0,class:"alert-card alert-card--danger reveal",style:{"--d":"60ms"},role:"status"},Rt={class:"alert-body"},Vt={class:"alert-text text-muted"},Ht={class:"stats-grid reveal",style:{"--d":"90ms"},"aria-label":"Ringkasan user"},Ft={class:"stat-icon","aria-hidden":"true"},Lt={class:"stat-body"},Gt={class:"stat-label"},Kt={class:"stat-value"},jt={key:0,class:"stat-hint text-muted"},qt={class:"panel filters-panel reveal",style:{"--d":"120ms"},"aria-label":"Filter user"},zt={class:"panel-body"},Ot={class:"filters-row"},Qt={class:"field"},Jt=["disabled"],Wt={class:"field field--grow"},Xt={class:"search-control"},Yt={class:"field"},Zt=["disabled"],te={class:"chips-row","aria-label":"Shortcut filter"},ee={class:"chip-count"},se={class:"chip-count"},ae={class:"chip-count"},le={class:"panel users-panel reveal",style:{"--d":"150ms"},"aria-label":"Daftar user"},ie={class:"panel-header"},ne={class:"panel-title"},oe={class:"panel-title__copy"},de={class:"text-muted"},re={class:"panel-actions"},ue=["disabled"],ce={class:"panel-body"},ve={class:"table-wrap","aria-label":"Tabel user"},me={class:"users-table"},be={class:"user-cell"},pe={class:"avatar-pill","aria-hidden":"true"},fe={class:"user-copy"},ye=["title"],ge={class:"user-sub text-muted"},ke=["title"],_e={class:"user-id text-muted"},he=["title"],we={class:"td-metric"},Ue={class:"pill pill--soft"},Ce={class:"td-metric"},xe={class:"pill"},Te={class:"td-date"},Ae={class:"td-actions"},Ne={class:"row-actions"},De=["onClick"],Pe=["disabled","title","onClick"],Ee={key:0,class:"tr-empty"},Se={class:"user-cards","aria-label":"Daftar user (mobile)"},Me={class:"user-card__top"},$e={class:"user-card__left"},Be={class:"avatar-pill avatar-pill--sm","aria-hidden":"true"},Ie={class:"user-card__copy"},Re=["title"],Ve={class:"user-sub text-muted"},He=["title"],Fe={class:"user-id text-muted"},Le=["title"],Ge={class:"user-card__meta"},Ke={class:"pill pill--soft"},je={class:"pill"},qe={class:"pill pill--soft"},ze={class:"user-card__actions"},Oe=["onClick"],Qe=["disabled","title","onClick"],Je={key:0,class:"empty-state"},We={key:0,class:"pagination-row"},Xe=["disabled"],Ye={class:"page-indicator text-muted"},Ze=["disabled"],ts={class:"modal-content"},es={class:"modal-body"},ss={class:"edit-grid"},as={class:"edit-card edit-card--identity"},ls={class:"edit-identity"},is={class:"avatar-pill avatar-pill--lg","aria-hidden":"true"},ns={class:"identity-copy"},os={class:"identity-username text-muted"},ds={class:"identity-email text-muted"},rs={class:"identity-id text-muted"},us={class:"field"},cs={class:"edit-card"},vs={class:"field"},ms={class:"metrics-row"},bs={class:"metric-card"},ps={class:"metric-value"},fs={class:"metric-card"},ys={class:"metric-value"},gs={class:"modal-footer"},ks=["disabled"],_s=["disabled","title"],hs=["disabled"],ws={key:0,class:"spinner","aria-hidden":"true"},Us={key:1,class:"bi bi-check-lg","aria-hidden":"true"},Cs={class:"modal-content modal-content--confirm"},xs={class:"modal-body"},Ts={class:"confirm-summary"},As={class:"confirm-item"},Ns={class:"confirm-value"},Ds={class:"confirm-item"},Ps={class:"confirm-value"},Es={class:"confirm-item"},Ss={class:"confirm-value"},Ms={class:"modal-footer"},$s=["disabled"],Bs=["disabled"],Is={key:0,class:"spinner","aria-hidden":"true"},Rs={key:1,class:"bi bi-trash","aria-hidden":"true"},Vs={__name:"AdminUsers",setup(Hs){const kt=At(),U=u([]),o=u({total:0,page:1,limit:20,totalPages:1}),f=u({totalAccounts:0,totalUsers:0,totalAdmins:0,totalPlays:0,playsToday:0}),y=u(!0),V=u(!0),O=u(""),Q=u(""),J=u(Date.now()),k=u(""),x=u(""),T=u(!1),v=u(null),C=u({name:"",role:"user"}),_=u(!1),h=u(!1),p=u({open:!1,user:null}),W=u(!1),nt=u(""),H=u("success");let P=null,E=null;const ot=N({get:()=>o.value.limit||20,set:a=>{o.value.page=1,o.value.limit=Number(a)||20}}),dt=N(()=>O.value||Q.value||""),F=N(()=>y.value||V.value),L=N(()=>{var a;return((a=kt.user)==null?void 0:a.id)||null}),m=a=>new Intl.NumberFormat("id-ID").format(Number(a)||0),_t=N(()=>{const a=new Date(J.value||Date.now());return new Intl.DateTimeFormat("id-ID",{hour:"2-digit",minute:"2-digit"}).format(a)}),rt=a=>a?new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-",X=a=>{const e=String(a||"").trim();return e?e.split(/\s+/).filter(Boolean).slice(0,2).map(d=>d[0]).join("").toUpperCase():"?"},ut=a=>a==="admin"?"Admin":"User",ct=a=>a==="admin"?"pill--cyan":"pill--blue",vt=a=>a==="admin"?"bi bi-shield-lock-fill":"bi bi-person-fill",G=a=>!(!(a!=null&&a.id)||a.role==="admin"||L.value&&Number(a.id)===Number(L.value)),K=a=>a?a.role==="admin"?"Admin tidak bisa dihapus dari UI":L.value&&Number(a.id)===Number(L.value)?"Tidak bisa menghapus akun sendiri":"Hapus user":"",ht=N(()=>[{key:"totalAccounts",label:"Total Akun",value:f.value.totalAccounts,icon:"bi bi-people",tone:"tone-cyan"},{key:"totalUsers",label:"User",value:f.value.totalUsers,icon:"bi bi-person-fill",tone:"tone-blue"},{key:"totalAdmins",label:"Admin",value:f.value.totalAdmins,icon:"bi bi-shield-lock-fill",tone:"tone-green"},{key:"totalPlays",label:"Total Play",value:f.value.totalPlays,icon:"bi bi-play-circle-fill",tone:"tone-cyan"},{key:"playsToday",label:"Play Hari Ini",value:f.value.playsToday,icon:"bi bi-calendar2-check-fill",tone:"tone-blue"}]),S=(a,e="success")=>{nt.value=a,H.value=e,W.value=!0,P&&clearTimeout(P),P=setTimeout(()=>{W.value=!1},2500)},M=async()=>{var a,e;y.value=!0,O.value="";try{const s={search:x.value||void 0,role:k.value||void 0,page:o.value.page||1,limit:o.value.limit||20},d=await R.getUsers(s);U.value=d.data.data||[];const c=d.data.meta||{};o.value={total:Number(c.total)||0,page:Number(c.page)||1,limit:Number(c.limit)||o.value.limit||20,totalPages:Number(c.totalPages)||1},J.value=Date.now()}catch(s){console.error("Error fetching users:",s),O.value=((e=(a=s.response)==null?void 0:a.data)==null?void 0:e.message)||"Gagal memuat daftar user",U.value=[]}finally{y.value=!1}},wt=async()=>{var e;const a=await R.getUsers({role:"admin",page:1,limit:1});return Number((e=a.data.meta)==null?void 0:e.total)||0},Ut=async()=>{var a,e;V.value=!0,Q.value="";try{const[s,d]=await Promise.all([R.getDashboard(),wt()]),c=s.data.data||{},$=Number(c.totalUsers)||0,B=Number(d)||0;f.value={totalAccounts:$+B,totalUsers:$,totalAdmins:B,totalPlays:Number(c.totalPlays)||0,playsToday:Number(c.playsToday)||0},J.value=Date.now()}catch(s){console.error("Error fetching user stats:",s),Q.value=((e=(a=s.response)==null?void 0:a.data)==null?void 0:e.message)||"Gagal memuat ringkasan user",f.value={totalAccounts:0,totalUsers:0,totalAdmins:0,totalPlays:0,playsToday:0}}finally{V.value=!1}},A=async()=>{await Promise.all([Ut(),M()])},Y=a=>{k.value=a};tt(k,()=>{o.value.page=1,M()}),tt(()=>o.value.limit,()=>{o.value.page=1,M()}),tt(x,()=>{o.value.page=1,E&&clearTimeout(E),E=setTimeout(M,300)});const mt=a=>{const e=Math.max(1,Math.min(Number(a)||1,o.value.totalPages||1));e!==o.value.page&&(o.value.page=e,M())},bt=a=>{v.value=a,C.value={name:(a==null?void 0:a.name)||"",role:(a==null?void 0:a.role)||"user"},T.value=!0},j=()=>{_.value||(T.value=!1)},Ct=async()=>{var a,e,s;if((a=v.value)!=null&&a.id){_.value=!0;try{await R.updateUser(v.value.id,{name:String(C.value.name||"").trim(),role:C.value.role}),S("User berhasil diupdate","success"),T.value=!1,await A()}catch(d){console.error("Error updating user:",d),S(((s=(e=d.response)==null?void 0:e.data)==null?void 0:s.message)||"Gagal update user","danger")}finally{_.value=!1}}},Z=a=>{if(a){if(!G(a)){S(K(a),"info");return}p.value={open:!0,user:a}}},q=()=>{h.value||(p.value.open=!1)},xt=async()=>{var e,s,d;if(!p.value.open||h.value)return;const a=p.value.user;if(a!=null&&a.id){h.value=!0;try{await R.deleteUser(a.id),S("User berhasil dihapus","success"),((e=v.value)==null?void 0:e.id)===a.id&&(T.value=!1),await A()}catch(c){console.error("Error deleting user:",c),S(((d=(s=c.response)==null?void 0:s.data)==null?void 0:d.message)||"Gagal menghapus user","danger")}finally{h.value=!1,p.value.open=!1}}},pt=a=>{if(a.key==="Escape"){if(p.value.open)return q();if(T.value)return j()}};return Nt(()=>{A(),window.addEventListener("keydown",pt)}),Dt(()=>{window.removeEventListener("keydown",pt),P&&clearTimeout(P),E&&clearTimeout(E)}),(a,e)=>(n(),i("div",Pt,[t("header",Et,[t("div",St,[e[13]||(e[13]=t("div",{class:"page-badge"},[t("i",{class:"bi bi-people-fill","aria-hidden":"true"}),t("span",null,"Manajemen User")],-1)),e[14]||(e[14]=t("h1",null,"Kelola user dengan aman & nyaman",-1)),e[15]||(e[15]=t("p",{class:"text-muted"}," Cari user, ubah role, dan pantau statistik singkat. Semua tampil rapi di desktop maupun mobile. ",-1)),t("div",Mt,[e[12]||(e[12]=t("i",{class:"bi bi-clock","aria-hidden":"true"},null,-1)),t("span",null,"Terakhir update: "+l(_t.value),1)])]),t("div",$t,[t("button",{class:"btn btn-ghost",type:"button",onClick:A,disabled:F.value},[e[16]||(e[16]=t("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1)),r(" "+l(F.value?"Memuat…":"Refresh"),1)],8,Bt)])]),dt.value&&!F.value?(n(),i("div",It,[e[19]||(e[19]=t("div",{class:"alert-icon","aria-hidden":"true"},[t("i",{class:"bi bi-exclamation-triangle-fill"})],-1)),t("div",Rt,[e[17]||(e[17]=t("div",{class:"alert-title"},"Gagal memuat user",-1)),t("div",Vt,l(dt.value),1)]),t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:A},[...e[18]||(e[18]=[t("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1),r(" Coba lagi ",-1)])])])):g("",!0),t("section",Ht,[V.value?(n(),i(w,{key:0},D(5,s=>t("div",{key:s,class:"stat-card stat-card--skeleton"},[...e[20]||(e[20]=[t("div",{class:"stat-icon loading-skeleton","aria-hidden":"true"},null,-1),t("div",{class:"stat-body"},[t("div",{class:"skeleton-line loading-skeleton"}),t("div",{class:"skeleton-line skeleton-line--lg loading-skeleton"})],-1)])])),64)):(n(!0),i(w,{key:1},D(ht.value,s=>(n(),i("div",{key:s.key,class:b(["stat-card",s.tone])},[t("div",Ft,[t("i",{class:b(s.icon)},null,2)]),t("div",Lt,[t("div",Gt,l(s.label),1),t("div",Kt,l(m(s.value)),1),s.hint?(n(),i("div",jt,l(s.hint),1)):g("",!0)])],2))),128))]),t("section",qt,[e[31]||(e[31]=yt('<div class="panel-header panel-header--compact" data-v-d5c33fc0><div class="panel-title" data-v-d5c33fc0><div class="panel-icon panel-icon--soft" aria-hidden="true" data-v-d5c33fc0><i class="bi bi-funnel-fill" data-v-d5c33fc0></i></div><div class="panel-title__copy" data-v-d5c33fc0><h2 data-v-d5c33fc0>Filter</h2><p class="text-muted" data-v-d5c33fc0>Cari berdasarkan nama, username, atau email.</p></div></div></div>',1)),t("div",zt,[t("div",Ot,[t("div",Qt,[e[22]||(e[22]=t("label",{class:"field-label",for:"user-role"},"Role",-1)),I(t("select",{id:"user-role","onUpdate:modelValue":e[0]||(e[0]=s=>k.value=s),class:"form-select",disabled:y.value},[...e[21]||(e[21]=[t("option",{value:""},"Semua",-1),t("option",{value:"user"},"User",-1),t("option",{value:"admin"},"Admin",-1)])],8,Jt),[[st,k.value]])]),t("div",Wt,[e[25]||(e[25]=t("label",{class:"field-label",for:"user-search"},"Cari",-1)),t("div",Xt,[e[24]||(e[24]=t("i",{class:"bi bi-search","aria-hidden":"true"},null,-1)),I(t("input",{id:"user-search","onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),type:"text",class:"form-control",placeholder:"Cari nama, username, email…"},null,512),[[gt,x.value]]),x.value?(n(),i("button",{key:0,class:"icon-clear",type:"button",onClick:e[2]||(e[2]=s=>x.value=""),"aria-label":"Hapus pencarian"},[...e[23]||(e[23]=[t("i",{class:"bi bi-x-circle-fill","aria-hidden":"true"},null,-1)])])):g("",!0)])]),t("div",Yt,[e[27]||(e[27]=t("label",{class:"field-label",for:"user-limit"},"Per halaman",-1)),I(t("select",{id:"user-limit","onUpdate:modelValue":e[3]||(e[3]=s=>ot.value=s),class:"form-select",disabled:y.value},[...e[26]||(e[26]=[t("option",{value:10},"10",-1),t("option",{value:20},"20",-1),t("option",{value:50},"50",-1)])],8,Zt),[[st,ot.value,void 0,{number:!0}]])])]),t("div",te,[t("button",{class:b(["chip",{on:k.value===""}]),type:"button",onClick:e[4]||(e[4]=s=>Y(""))},[e[28]||(e[28]=t("span",null,"Semua",-1)),t("span",ee,l(m(o.value.total)),1)],2),t("button",{class:b(["chip",{on:k.value==="user"}]),type:"button",onClick:e[5]||(e[5]=s=>Y("user"))},[e[29]||(e[29]=t("span",null,"User",-1)),t("span",se,l(m(f.value.totalUsers)),1)],2),t("button",{class:b(["chip",{on:k.value==="admin"}]),type:"button",onClick:e[6]||(e[6]=s=>Y("admin"))},[e[30]||(e[30]=t("span",null,"Admin",-1)),t("span",ae,l(m(f.value.totalAdmins)),1)],2)])])]),t("section",le,[t("div",ie,[t("div",ne,[e[36]||(e[36]=t("div",{class:"panel-icon","aria-hidden":"true"},[t("i",{class:"bi bi-person-lines-fill"})],-1)),t("div",oe,[e[35]||(e[35]=t("h2",null,"Daftar User",-1)),t("p",de,[e[32]||(e[32]=r(" Menampilkan ",-1)),t("strong",null,l(m(U.value.length)),1),e[33]||(e[33]=r(" dari ",-1)),t("strong",null,l(m(o.value.total)),1),e[34]||(e[34]=r(" data. ",-1))])])]),t("div",re,[t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:A,disabled:F.value},[...e[37]||(e[37]=[t("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1),r(" Refresh ",-1)])],8,ue)])]),t("div",ce,[t("div",ve,[t("table",me,[e[45]||(e[45]=t("thead",null,[t("tr",null,[t("th",null,"User"),t("th",null,"Email"),t("th",null,"Role"),t("th",null,"Lagu"),t("th",null,"Score"),t("th",null,"Bergabung"),t("th",{class:"th-actions"},"Aksi")])],-1)),t("tbody",null,[y.value?(n(),i(w,{key:0},D(7,s=>t("tr",{key:s,class:"tr-skeleton"},[...e[38]||(e[38]=[t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1),t("td",null,[t("div",{class:"skeleton-cell loading-skeleton"})],-1)])])),64)):(n(),i(w,{key:1},[(n(!0),i(w,null,D(U.value,s=>(n(),i("tr",{key:s.id},[t("td",null,[t("div",be,[t("div",pe,l(X(s.name)),1),t("div",fe,[t("div",{class:"user-name",title:s.name},l(s.name),9,ye),t("div",ge,[t("span",{class:"user-username",title:s.username},"@"+l(s.username),9,ke),e[39]||(e[39]=t("span",{class:"dot"},"•",-1)),t("span",_e,"#"+l(s.id),1)])])])]),t("td",{class:"td-email",title:s.email},l(s.email),9,he),t("td",null,[t("span",{class:b(["pill",ct(s.role)])},[t("i",{class:b(vt(s.role)),"aria-hidden":"true"},null,2),r(" "+l(ut(s.role)),1)],2)]),t("td",we,[t("span",Ue,[e[40]||(e[40]=t("i",{class:"bi bi-music-note-beamed","aria-hidden":"true"},null,-1)),r(" "+l(m(s.total_songs_played||0)),1)])]),t("td",Ce,[t("span",xe,[e[41]||(e[41]=t("i",{class:"bi bi-trophy","aria-hidden":"true"},null,-1)),r(" "+l(m(s.total_score||0)),1)])]),t("td",Te,l(rt(s.created_at)),1),t("td",Ae,[t("div",Ne,[t("button",{class:"btn btn-ghost btn-sm btn-icon",type:"button",onClick:d=>bt(s),"aria-label":"Edit"},[...e[42]||(e[42]=[t("i",{class:"bi bi-pencil","aria-hidden":"true"},null,-1)])],8,De),t("button",{class:"btn btn-ghost btn-sm btn-icon btn-icon--danger",type:"button",disabled:!G(s),title:K(s),onClick:d=>Z(s),"aria-label":"Hapus"},[...e[43]||(e[43]=[t("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])],8,Pe)])])]))),128)),U.value.length?g("",!0):(n(),i("tr",Ee,[...e[44]||(e[44]=[t("td",{colspan:"7"},[t("div",{class:"empty-state"},[t("div",{class:"empty-icon","aria-hidden":"true"},[t("i",{class:"bi bi-people"})]),t("h3",null,"Tidak ada user ditemukan"),t("p",{class:"text-muted"},"Coba ubah filter role atau kata kunci pencarian.")])],-1)])]))],64))])])]),t("div",Se,[y.value?(n(),i(w,{key:0},D(6,s=>t("div",{key:s,class:"user-card user-card--skeleton"},[...e[46]||(e[46]=[yt('<div class="skeleton-line loading-skeleton" data-v-d5c33fc0></div><div class="skeleton-line skeleton-line--sm loading-skeleton" data-v-d5c33fc0></div><div class="skeleton-chip-row" data-v-d5c33fc0><div class="skeleton-chip loading-skeleton" data-v-d5c33fc0></div><div class="skeleton-chip loading-skeleton" data-v-d5c33fc0></div><div class="skeleton-chip loading-skeleton" data-v-d5c33fc0></div></div><div class="skeleton-btn-row" data-v-d5c33fc0><div class="skeleton-btn loading-skeleton" data-v-d5c33fc0></div><div class="skeleton-btn loading-skeleton" data-v-d5c33fc0></div></div>',4)])])),64)):(n(),i(w,{key:1},[(n(!0),i(w,null,D(U.value,s=>(n(),i("div",{key:s.id,class:"user-card"},[t("div",Me,[t("div",$e,[t("div",Be,l(X(s.name)),1),t("div",Ie,[t("div",{class:"user-name",title:s.name},l(s.name),9,Re),t("div",Ve,[t("span",{title:s.username},"@"+l(s.username),9,He),e[47]||(e[47]=t("span",{class:"dot"},"•",-1)),t("span",Fe,"#"+l(s.id),1)])])]),t("span",{class:b(["pill",ct(s.role)])},[t("i",{class:b(vt(s.role)),"aria-hidden":"true"},null,2),r(" "+l(ut(s.role)),1)],2)]),t("div",{class:"user-card__email text-muted",title:s.email},l(s.email),9,Le),t("div",Ge,[t("span",Ke,[e[48]||(e[48]=t("i",{class:"bi bi-music-note-beamed","aria-hidden":"true"},null,-1)),r(" "+l(m(s.total_songs_played||0))+" lagu ",1)]),t("span",je,[e[49]||(e[49]=t("i",{class:"bi bi-trophy","aria-hidden":"true"},null,-1)),r(" "+l(m(s.total_score||0)),1)]),t("span",qe,[e[50]||(e[50]=t("i",{class:"bi bi-calendar2","aria-hidden":"true"},null,-1)),r(" "+l(rt(s.created_at)),1)])]),t("div",ze,[t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:d=>bt(s)},[...e[51]||(e[51]=[t("i",{class:"bi bi-pencil","aria-hidden":"true"},null,-1),r(" Edit ",-1)])],8,Oe),t("button",{class:"btn btn-ghost btn-sm btn-icon btn-icon--danger",type:"button",disabled:!G(s),title:K(s),onClick:d=>Z(s),"aria-label":"Hapus"},[...e[52]||(e[52]=[t("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])],8,Qe)])]))),128)),U.value.length?g("",!0):(n(),i("div",Je,[...e[53]||(e[53]=[t("div",{class:"empty-icon","aria-hidden":"true"},[t("i",{class:"bi bi-people"})],-1),t("h3",null,"Tidak ada user ditemukan",-1),t("p",{class:"text-muted"},"Coba ubah filter role atau kata kunci pencarian.",-1)])]))],64))]),o.value.totalPages>1?(n(),i("div",We,[t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:e[7]||(e[7]=s=>mt(o.value.page-1)),disabled:y.value||o.value.page<=1},[...e[54]||(e[54]=[t("i",{class:"bi bi-chevron-left","aria-hidden":"true"},null,-1),r(" Sebelumnya ",-1)])],8,Xe),t("div",Ye,[e[55]||(e[55]=r(" Halaman ",-1)),t("strong",null,l(o.value.page),1),r(" / "+l(o.value.totalPages),1)]),t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:e[8]||(e[8]=s=>mt(o.value.page+1)),disabled:y.value||o.value.page>=o.value.totalPages},[...e[56]||(e[56]=[r(" Berikutnya ",-1),t("i",{class:"bi bi-chevron-right","aria-hidden":"true"},null,-1)])],8,Ze)])):g("",!0)])]),et(it,{name:"ad-modal"},{default:at(()=>{var s,d,c,$,B,ft;return[T.value?(n(),i("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Edit user",onClick:lt(j,["self"])},[t("div",ts,[t("div",{class:"modal-header"},[e[58]||(e[58]=t("div",{class:"modal-title"},[t("div",{class:"modal-icon","aria-hidden":"true"},[t("i",{class:"bi bi-person-gear"})]),t("div",{class:"modal-title__copy"},[t("h3",null,"Edit User"),t("p",{class:"text-muted"},"Ubah nama dan role. Username & email hanya dibaca.")])],-1)),t("button",{class:"icon-close",type:"button",onClick:j,"aria-label":"Tutup modal"},[...e[57]||(e[57]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])])]),t("form",{onSubmit:lt(Ct,["prevent"])},[t("div",es,[t("div",ss,[t("div",as,[e[60]||(e[60]=t("div",{class:"edit-label"},"User",-1)),t("div",ls,[t("div",is,l(X((s=v.value)==null?void 0:s.name)),1),t("div",ns,[t("div",os,"@"+l(((d=v.value)==null?void 0:d.username)||"-"),1),t("div",ds,l(((c=v.value)==null?void 0:c.email)||"-"),1),t("div",rs,"#"+l((($=v.value)==null?void 0:$.id)||"-"),1)])]),t("div",us,[e[59]||(e[59]=t("label",{class:"field-label",for:"edit-name"},"Nama",-1)),I(t("input",{id:"edit-name",type:"text",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=z=>C.value.name=z),required:""},null,512),[[gt,C.value.name]])])]),t("div",cs,[e[65]||(e[65]=t("div",{class:"edit-label"},"Role",-1)),t("div",vs,[e[62]||(e[62]=t("label",{class:"field-label",for:"edit-role"},"Role",-1)),I(t("select",{id:"edit-role",class:"form-select","onUpdate:modelValue":e[10]||(e[10]=z=>C.value.role=z)},[...e[61]||(e[61]=[t("option",{value:"user"},"User",-1),t("option",{value:"admin"},"Admin",-1)])],512),[[st,C.value.role]])]),e[66]||(e[66]=t("div",{class:"edit-hint text-muted"},[t("i",{class:"bi bi-shield-check","aria-hidden":"true"}),r(" Berhati-hati saat memberikan role admin. ")],-1)),t("div",ms,[t("div",bs,[e[63]||(e[63]=t("div",{class:"metric-label text-muted"},"Total lagu diputar",-1)),t("div",ps,l(m(((B=v.value)==null?void 0:B.total_songs_played)||0)),1)]),t("div",fs,[e[64]||(e[64]=t("div",{class:"metric-label text-muted"},"Total score",-1)),t("div",ys,l(m(((ft=v.value)==null?void 0:ft.total_score)||0)),1)])])])])]),t("div",gs,[t("button",{type:"button",class:"btn btn-ghost",onClick:j,disabled:_.value},"Batal",8,ks),t("button",{type:"button",class:"btn btn-ghost btn-icon btn-icon--danger","aria-label":"Hapus user",disabled:_.value||!G(v.value),title:K(v.value),onClick:e[11]||(e[11]=z=>Z(v.value))},[...e[67]||(e[67]=[t("i",{class:"bi bi-trash","aria-hidden":"true"},null,-1)])],8,_s),t("button",{type:"submit",class:"btn btn-primary",disabled:_.value},[_.value?(n(),i("span",ws)):(n(),i("i",Us)),r(" "+l(_.value?"Menyimpan…":"Simpan"),1)],8,hs)])],32)])])):g("",!0)]}),_:1}),et(it,{name:"ad-modal"},{default:at(()=>{var s,d,c;return[p.value.open?(n(),i("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Konfirmasi aksi",onClick:lt(q,["self"])},[t("div",Cs,[t("div",{class:"modal-header"},[e[69]||(e[69]=t("div",{class:"modal-title"},[t("div",{class:"modal-icon","aria-hidden":"true"},[t("i",{class:"bi bi-trash"})]),t("div",{class:"modal-title__copy"},[t("h3",null,"Hapus user ini?"),t("p",{class:"text-muted"},"Tindakan ini tidak bisa dibatalkan.")])],-1)),t("button",{class:"icon-close",type:"button",onClick:q,"aria-label":"Tutup konfirmasi"},[...e[68]||(e[68]=[t("i",{class:"bi bi-x-lg","aria-hidden":"true"},null,-1)])])]),t("div",xs,[t("div",Ts,[t("div",As,[e[70]||(e[70]=t("div",{class:"confirm-label text-muted"},"Nama",-1)),t("div",Ns,l(((s=p.value.user)==null?void 0:s.name)||"-"),1)]),t("div",Ds,[e[71]||(e[71]=t("div",{class:"confirm-label text-muted"},"Username",-1)),t("div",Ps,"@"+l(((d=p.value.user)==null?void 0:d.username)||"-"),1)]),t("div",Es,[e[72]||(e[72]=t("div",{class:"confirm-label text-muted"},"Email",-1)),t("div",Ss,l(((c=p.value.user)==null?void 0:c.email)||"-"),1)])])]),t("div",Ms,[t("button",{class:"btn btn-ghost",type:"button",onClick:q,disabled:h.value},"Batal",8,$s),t("button",{class:"btn btn-danger",type:"button",onClick:xt,disabled:h.value},[h.value?(n(),i("span",Is)):(n(),i("i",Rs)),r(" "+l(h.value?"Menghapus…":"Hapus"),1)],8,Bs)])])])):g("",!0)]}),_:1}),et(it,{name:"ad-toast"},{default:at(()=>[W.value?(n(),i("div",{key:0,class:b(["toast",`toast--${H.value}`]),role:"status","aria-live":"polite"},[t("i",{class:b(H.value==="success"?"bi bi-check-circle-fill":H.value==="danger"?"bi bi-x-circle-fill":"bi bi-info-circle-fill"),"aria-hidden":"true"},null,2),t("span",null,l(nt.value),1)],2)):g("",!0)]),_:1})]))}},Ls=Tt(Vs,[["__scopeId","data-v-d5c33fc0"]]);export{Ls as default};
