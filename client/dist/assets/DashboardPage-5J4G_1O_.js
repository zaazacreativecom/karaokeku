import{_ as N,u as R,r as f,c as B,o as T,a as t,b as D,d as s,e as d,w as r,f as v,g as U,h as V,i as K,n as c,j as w,t as o,F as _,k as y,l as A,m as q,p as F,s as j,q as x,v as l}from"./index-Btw_uZyE.js";import{M as I}from"./MobileNav-CceEoPrP.js";const E={class:"dashboard-layout"},z={class:"dashboard-sidebar"},H={class:"sidebar-header"},W={class:"sidebar-nav"},G={class:"sidebar-footer"},J={class:"user-info"},O={class:"user-details"},Q={class:"user-name"},X={class:"user-role"},Y={class:"dashboard-main"},Z={class:"main-content"},ss={class:"mobile-topbar"},as={class:"hero reveal",style:{"--d":"0ms"}},ls={class:"hero__content"},ts={class:"text-gradient"},es={class:"hero__actions"},is={class:"hero__panel"},os={class:"hero__panel-card"},ns={key:0,class:"panel-value"},ds={key:1,class:"panel-value panel-skeleton loading-skeleton","aria-hidden":"true"},rs={class:"panel-meta"},us={key:0},vs={key:1,class:"panel-pill loading-skeleton","aria-hidden":"true"},cs={key:2},bs={key:3,class:"panel-pill loading-skeleton","aria-hidden":"true"},ps={class:"hero__panel-card hero__panel-card--soft"},ks={key:0,class:"panel-value"},ms={key:1,class:"panel-value panel-skeleton loading-skeleton","aria-hidden":"true"},gs={class:"stats-grid"},fs={class:"stat-card reveal",style:{"--d":"90ms"}},_s={class:"stat-info"},ys={key:0,class:"stat-value"},hs={key:1,class:"stat-value stat-skeleton loading-skeleton","aria-hidden":"true"},Ss={class:"stat-card reveal",style:{"--d":"140ms"}},Ps={class:"stat-info"},ws={key:0,class:"stat-value"},Ls={key:1,class:"stat-value stat-skeleton loading-skeleton","aria-hidden":"true"},$s={class:"stat-card reveal",style:{"--d":"190ms"}},Ds={class:"stat-info"},Ks={key:0,class:"stat-value"},As={key:1,class:"stat-value stat-skeleton loading-skeleton","aria-hidden":"true"},Ms={class:"stat-card reveal",style:{"--d":"240ms"}},Cs={class:"stat-info"},Ns={key:0,class:"stat-value"},Rs={key:1,class:"stat-value stat-skeleton stat-skeleton--text loading-skeleton","aria-hidden":"true"},Bs={class:"content-grid"},Ts={class:"content-card reveal",style:{"--d":"290ms"}},Us={class:"card-header"},Vs={class:"card-body"},qs={key:0,class:"song-list"},Fs={key:1,class:"song-list"},js={class:"song-info"},xs={key:0,class:"song-score"},Is={key:2,class:"empty-state"},Es={class:"content-card reveal",style:{"--d":"340ms"}},zs={class:"card-header"},Hs={class:"card-body"},Ws={key:0,class:"song-list"},Gs={key:1,class:"song-list"},Js=["onClick","onKeydown"],Os={class:"song-rank"},Qs={class:"song-info"},Xs={class:"song-plays"},Ys={key:2,class:"empty-state"},Zs={__name:"DashboardPage",setup(sa){const L=x(),k=R(),b=f({}),h=f([]),S=f([]),u=f(!0),M=B(()=>{var i,a,e;return((e=(a=(i=k.user)==null?void 0:i.name)==null?void 0:a.trim())==null?void 0:e.split(" ")[0])||"Kamu"}),$=()=>{k.logout(),L.push("/")},P=i=>{L.push(`/karaoke/${i}`)},C=async()=>{var i;u.value=!0;try{const[a,e]=await Promise.all([F.getScores(),j.getTop(5)]),p=a.data.data;b.value={totalPlays:p.totalSongsPlayed||0,avgScore:p.averageScore||0,totalMinutes:p.totalDurationMinutes||0,level:p.level||"Pemula"},h.value=((i=p.recentPlays)==null?void 0:i.slice(0,5))||[],S.value=e.data.data||[]}catch(a){console.error("Error fetching dashboard data:",a)}finally{u.value=!1}};return T(()=>{C()}),(i,a)=>{var p;const e=U("router-link");return l(),t("div",E,[a[44]||(a[44]=D('<div class="dashboard-bg" aria-hidden="true" data-v-4c36ef4f><div class="bg-mesh" data-v-4c36ef4f></div><div class="bg-particles" data-v-4c36ef4f></div><div class="bg-orb orb-1" data-v-4c36ef4f></div><div class="bg-orb orb-2" data-v-4c36ef4f></div><div class="bg-orb orb-3" data-v-4c36ef4f></div></div>',1)),s("aside",z,[s("div",H,[d(e,{to:"/dashboard",class:"brand"},{default:r(()=>[...a[0]||(a[0]=[s("i",{class:"bi bi-music-note-beamed"},null,-1),s("span",null,[v("Karaoke"),s("span",{class:"text-gradient"},"Ku")],-1)])]),_:1})]),s("nav",W,[d(e,{to:"/dashboard",class:c(["nav-item",{active:i.$route.name==="Dashboard"}])},{default:r(()=>[...a[1]||(a[1]=[s("i",{class:"bi bi-grid-1x2-fill"},null,-1),s("span",null,"Dashboard",-1)])]),_:1},8,["class"]),d(e,{to:"/karaoke",class:c(["nav-item",{active:i.$route.name==="Karaoke"||i.$route.name==="KaraokePlay"}])},{default:r(()=>[...a[2]||(a[2]=[s("i",{class:"bi bi-mic-fill"},null,-1),s("span",null,"Karaoke",-1)])]),_:1},8,["class"]),d(e,{to:"/songs",class:c(["nav-item",{active:i.$route.name==="Songs"}])},{default:r(()=>[...a[3]||(a[3]=[s("i",{class:"bi bi-music-note-list"},null,-1),s("span",null,"Pilih Lagu",-1)])]),_:1},8,["class"]),d(e,{to:"/favorites",class:c(["nav-item",{active:i.$route.name==="Favorites"}])},{default:r(()=>[...a[4]||(a[4]=[s("i",{class:"bi bi-heart-fill"},null,-1),s("span",null,"Lagu Favorit",-1)])]),_:1},8,["class"]),d(e,{to:"/playlists",class:c(["nav-item",{active:i.$route.name==="Playlists"}])},{default:r(()=>[...a[5]||(a[5]=[s("i",{class:"bi bi-collection-play-fill"},null,-1),s("span",null,"Playlist Saya",-1)])]),_:1},8,["class"]),d(e,{to:"/upload",class:c(["nav-item",{active:i.$route.name==="Upload"}])},{default:r(()=>[...a[6]||(a[6]=[s("i",{class:"bi bi-cloud-upload-fill"},null,-1),s("span",null,"Upload Lagu",-1)])]),_:1},8,["class"]),d(e,{to:"/history",class:c(["nav-item",{active:i.$route.name==="History"}])},{default:r(()=>[...a[7]||(a[7]=[s("i",{class:"bi bi-clock-history"},null,-1),s("span",null,"Riwayat & Score",-1)])]),_:1},8,["class"]),d(e,{to:"/request",class:c(["nav-item",{active:i.$route.name==="Request"}])},{default:r(()=>[...a[8]||(a[8]=[s("i",{class:"bi bi-plus-circle-fill"},null,-1),s("span",null,"Request Lagu",-1)])]),_:1},8,["class"]),d(e,{to:"/donation",class:c(["nav-item",{active:i.$route.name==="Donation"}])},{default:r(()=>[...a[9]||(a[9]=[s("i",{class:"bi bi-heart-fill"},null,-1),s("span",null,"Donasi",-1)])]),_:1},8,["class"]),a[12]||(a[12]=s("div",{class:"nav-divider"},null,-1)),d(e,{to:"/settings",class:c(["nav-item",{active:i.$route.name==="Settings"}])},{default:r(()=>[...a[10]||(a[10]=[s("i",{class:"bi bi-gear-fill"},null,-1),s("span",null,"Pengaturan",-1)])]),_:1},8,["class"]),w(k).isAdmin?(l(),V(e,{key:0,to:"/admin",class:"nav-item nav-item-admin"},{default:r(()=>[...a[11]||(a[11]=[s("i",{class:"bi bi-shield-lock-fill"},null,-1),s("span",null,"Admin Panel",-1)])]),_:1})):K("",!0)]),s("div",G,[s("div",J,[a[13]||(a[13]=s("div",{class:"user-avatar"},[s("i",{class:"bi bi-person-fill"})],-1)),s("div",O,[s("span",Q,o((p=w(k).user)==null?void 0:p.name),1),s("span",X,o(w(k).isAdmin?"Admin":"User"),1)])]),s("button",{class:"btn-logout",onClick:$},[...a[14]||(a[14]=[s("i",{class:"bi bi-box-arrow-right"},null,-1)])])])]),s("main",Y,[s("div",Z,[s("div",ss,[d(e,{to:"/dashboard",class:"brand brand--compact"},{default:r(()=>[...a[15]||(a[15]=[s("i",{class:"bi bi-music-note-beamed"},null,-1),s("span",null,[v("Karaoke"),s("span",{class:"text-gradient"},"Ku")],-1)])]),_:1}),s("button",{class:"btn-logout btn-logout--mobile",onClick:$,"aria-label":"Logout"},[...a[16]||(a[16]=[s("i",{class:"bi bi-box-arrow-right"},null,-1)])])]),s("section",as,[s("div",ls,[a[20]||(a[20]=s("div",{class:"hero__badge"},[s("i",{class:"bi bi-stars"}),s("span",null,"Dashboard")],-1)),s("h1",null,[a[17]||(a[17]=v(" Selamat datang, ",-1)),s("span",ts,o(M.value),1)]),a[21]||(a[21]=s("p",{class:"hero__sub text-white"}," Siap untuk karaoke hari ini? Mulai cepat, atau jelajahi lagu favoritmu. ",-1)),s("div",es,[d(e,{to:"/karaoke",class:"btn btn-primary btn-lg"},{default:r(()=>[...a[18]||(a[18]=[s("i",{class:"bi bi-play-fill me-2"},null,-1),v(" Mulai Karaoke ",-1)])]),_:1}),d(e,{to:"/songs",class:"btn btn-ghost btn-lg"},{default:r(()=>[...a[19]||(a[19]=[s("i",{class:"bi bi-music-note-list me-2"},null,-1),v(" Pilih Lagu ",-1)])]),_:1})])]),s("div",is,[s("div",os,[a[24]||(a[24]=s("div",{class:"panel-label"},"Level",-1)),u.value?(l(),t("div",ds)):(l(),t("div",ns,o(b.value.level||"Pemula"),1)),s("div",rs,[u.value?(l(),t("span",vs)):(l(),t("span",us,[a[22]||(a[22]=s("i",{class:"bi bi-trophy-fill"},null,-1)),v(" Avg "+o(b.value.avgScore||0),1)])),u.value?(l(),t("span",bs)):(l(),t("span",cs,[a[23]||(a[23]=s("i",{class:"bi bi-clock-fill"},null,-1)),v(" "+o(b.value.totalMinutes||0)+"m",1)]))])]),s("div",ps,[a[25]||(a[25]=s("div",{class:"panel-label"},"Aktivitas",-1)),u.value?(l(),t("div",ms)):(l(),t("div",ks,o(b.value.totalPlays||0),1)),a[26]||(a[26]=s("div",{class:"panel-meta panel-meta--single"},"Lagu dimainkan",-1))])])]),s("div",gs,[s("div",fs,[a[28]||(a[28]=s("div",{class:"stat-icon stat-icon--plays"},[s("i",{class:"bi bi-music-note-list"})],-1)),s("div",_s,[u.value?(l(),t("span",hs)):(l(),t("span",ys,o(b.value.totalPlays||0),1)),a[27]||(a[27]=s("span",{class:"stat-label"},"Lagu Dimainkan",-1))])]),s("div",Ss,[a[30]||(a[30]=s("div",{class:"stat-icon stat-icon--score"},[s("i",{class:"bi bi-trophy-fill"})],-1)),s("div",Ps,[u.value?(l(),t("span",Ls)):(l(),t("span",ws,o(b.value.avgScore||0),1)),a[29]||(a[29]=s("span",{class:"stat-label"},"Rata-rata Score",-1))])]),s("div",$s,[a[32]||(a[32]=s("div",{class:"stat-icon stat-icon--time"},[s("i",{class:"bi bi-clock-fill"})],-1)),s("div",Ds,[u.value?(l(),t("span",As)):(l(),t("span",Ks,o(b.value.totalMinutes||0)+"m",1)),a[31]||(a[31]=s("span",{class:"stat-label"},"Total Waktu",-1))])]),s("div",Ms,[a[34]||(a[34]=s("div",{class:"stat-icon stat-icon--level"},[s("i",{class:"bi bi-star-fill"})],-1)),s("div",Cs,[u.value?(l(),t("span",Rs)):(l(),t("span",Ns,o(b.value.level||"Pemula"),1)),a[33]||(a[33]=s("span",{class:"stat-label"},"Level",-1))])])]),s("div",Bs,[s("div",Ts,[s("div",Us,[a[36]||(a[36]=s("h3",null,[s("i",{class:"bi bi-clock-history me-2"}),v("Terakhir Dimainkan")],-1)),d(e,{to:"/history",class:"btn btn-ghost btn-sm"},{default:r(()=>[...a[35]||(a[35]=[v("Lihat Semua",-1)])]),_:1})]),s("div",Vs,[u.value?(l(),t("div",qs,[(l(),t(_,null,y(5,n=>s("div",{key:n,class:"song-row song-row--skeleton","aria-hidden":"true"},[...a[37]||(a[37]=[s("div",{class:"song-info"},[s("div",{class:"skeleton-line loading-skeleton"}),s("div",{class:"skeleton-line skeleton-line--sm loading-skeleton"})],-1),s("div",{class:"skeleton-pill loading-skeleton"},null,-1)])])),64))])):h.value.length>0?(l(),t("div",Fs,[(l(!0),t(_,null,y(h.value,n=>{var g,m;return l(),t("div",{key:n.id,class:"song-row"},[s("div",js,[s("h4",null,o(((g=n.song)==null?void 0:g.title)||"Unknown"),1),s("p",null,o(((m=n.song)==null?void 0:m.artist)||"Unknown Artist"),1)]),n.score?(l(),t("span",xs,o(n.score)+" pts",1)):K("",!0)])}),128))])):(l(),t("div",Is,[...a[38]||(a[38]=[s("i",{class:"bi bi-music-note"},null,-1),s("p",null,"Belum ada lagu yang dimainkan",-1)])]))])]),s("div",Es,[s("div",zs,[a[40]||(a[40]=s("h3",null,[s("i",{class:"bi bi-fire me-2"}),v("Lagu Populer")],-1)),d(e,{to:"/songs",class:"btn btn-ghost btn-sm"},{default:r(()=>[...a[39]||(a[39]=[v("Lihat Semua",-1)])]),_:1})]),s("div",Hs,[u.value?(l(),t("div",Ws,[(l(),t(_,null,y(5,n=>s("div",{key:n,class:"song-row song-row--skeleton","aria-hidden":"true"},[...a[41]||(a[41]=[D('<div class="song-rank loading-skeleton" data-v-4c36ef4f></div><div class="song-info" data-v-4c36ef4f><div class="skeleton-line loading-skeleton" data-v-4c36ef4f></div><div class="skeleton-line skeleton-line--sm loading-skeleton" data-v-4c36ef4f></div></div><div class="skeleton-pill loading-skeleton" data-v-4c36ef4f></div>',3)])])),64))])):S.value.length>0?(l(),t("div",Gs,[(l(!0),t(_,null,y(S.value,(n,g)=>(l(),t("div",{key:n.id,class:"song-row clickable",role:"button",tabindex:"0",onClick:m=>P(n.id),onKeydown:[A(m=>P(n.id),["enter"]),A(q(m=>P(n.id),["prevent"]),["space"])]},[s("span",Os,o(g+1),1),s("div",Qs,[s("h4",null,o(n.title),1),s("p",null,o(n.artist),1)]),s("span",Xs,[a[42]||(a[42]=s("i",{class:"bi bi-play-fill"},null,-1)),v(" "+o(n.play_count||0),1)])],40,Js))),128))])):(l(),t("div",Ys,[...a[43]||(a[43]=[s("i",{class:"bi bi-music-note"},null,-1),s("p",null,"Belum ada lagu populer",-1)])]))])])])])]),d(I)])}}},ta=N(Zs,[["__scopeId","data-v-4c36ef4f"]]);export{ta as default};
