import{_ as N,r as m,o as R,c as a,a as s,b as o,w as d,d as p,e as B,t as n,F as w,i as S,h as y,g as L,p as k,k as l}from"./index-DY9xsVSO.js";import{a as g}from"./media-BmRio5iY.js";import{M as H}from"./MobileNav-B55vU6H0.js";const T={class:"page-layout"},C={class:"dashboard-sidebar"},K={class:"sidebar-header"},U={class:"sidebar-nav"},V={class:"page-main"},F={class:"page-content"},I={class:"stats-grid"},q={class:"stat-card"},A={class:"stat-info"},E={class:"stat-value"},W={class:"stat-card"},j={class:"stat-info"},z={class:"stat-value"},G={class:"stat-card"},J={class:"stat-info"},O={class:"stat-value"},Q={class:"stat-card"},X={class:"stat-info"},Y={class:"stat-value"},Z={class:"section mt-4"},$={key:0,class:"history-list"},ss={class:"item-thumb"},ts=["src"],as={key:1,class:"bi bi-music-note-beamed"},ls={class:"item-info"},is={class:"item-score"},es={key:1,class:"empty-state text-muted"},os={class:"section mt-4"},ns={key:0,class:"loading-state"},ds={key:1,class:"history-list"},rs={class:"item-date"},us={class:"item-thumb"},cs=["src"],vs={key:1,class:"bi bi-music-note-beamed"},ms={class:"item-info"},bs={key:0,class:"item-score"},ps={key:2,class:"empty-state text-muted"},ys={key:3,class:"load-more mt-3"},gs={__name:"HistoryPage",setup(_s){const r=m({}),b=m([]),_=m(!0),f=m(1),h=m(!1),P=async()=>{var u;_.value=!0;try{const[t,e]=await Promise.all([k.getScores(),k.getHistory({page:f.value,limit:20})]);r.value=t.data.data||{},b.value=e.data.data||[],h.value=((u=e.data.meta)==null?void 0:u.hasNextPage)||!1}catch(t){console.error(t)}finally{_.value=!1}},D=async()=>{var u;f.value++;try{const t=await k.getHistory({page:f.value,limit:20});b.value.push(...t.data.data||[]),h.value=((u=t.data.meta)==null?void 0:u.hasNextPage)||!1}catch(t){console.error(t)}},M=u=>new Date(u).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"});return R(P),(u,t)=>{var x;const e=B("router-link");return l(),a("div",T,[s("aside",C,[s("div",K,[o(e,{to:"/dashboard",class:"brand"},{default:d(()=>[...t[0]||(t[0]=[s("i",{class:"bi bi-music-note-beamed"},null,-1),s("span",null,[p("Karaoke"),s("span",{class:"text-gradient"},"Ku")],-1)])]),_:1})]),s("nav",U,[o(e,{to:"/dashboard",class:"nav-item"},{default:d(()=>[...t[1]||(t[1]=[s("i",{class:"bi bi-grid-1x2-fill"},null,-1),s("span",null,"Dashboard",-1)])]),_:1}),o(e,{to:"/karaoke",class:"nav-item"},{default:d(()=>[...t[2]||(t[2]=[s("i",{class:"bi bi-mic-fill"},null,-1),s("span",null,"Karaoke",-1)])]),_:1}),o(e,{to:"/songs",class:"nav-item"},{default:d(()=>[...t[3]||(t[3]=[s("i",{class:"bi bi-music-note-list"},null,-1),s("span",null,"Pilih Lagu",-1)])]),_:1}),o(e,{to:"/favorites",class:"nav-item"},{default:d(()=>[...t[4]||(t[4]=[s("i",{class:"bi bi-heart-fill"},null,-1),s("span",null,"Lagu Favorit",-1)])]),_:1}),o(e,{to:"/playlists",class:"nav-item"},{default:d(()=>[...t[5]||(t[5]=[s("i",{class:"bi bi-collection-play-fill"},null,-1),s("span",null,"Playlist Saya",-1)])]),_:1}),o(e,{to:"/upload",class:"nav-item"},{default:d(()=>[...t[6]||(t[6]=[s("i",{class:"bi bi-cloud-upload-fill"},null,-1),s("span",null,"Upload Lagu",-1)])]),_:1}),o(e,{to:"/history",class:"nav-item active"},{default:d(()=>[...t[7]||(t[7]=[s("i",{class:"bi bi-clock-history"},null,-1),s("span",null,"Riwayat & Score",-1)])]),_:1}),o(e,{to:"/request",class:"nav-item"},{default:d(()=>[...t[8]||(t[8]=[s("i",{class:"bi bi-plus-circle-fill"},null,-1),s("span",null,"Request Lagu",-1)])]),_:1}),o(e,{to:"/donation",class:"nav-item"},{default:d(()=>[...t[9]||(t[9]=[s("i",{class:"bi bi-heart-fill"},null,-1),s("span",null,"Donasi",-1)])]),_:1}),t[11]||(t[11]=s("div",{class:"nav-divider"},null,-1)),o(e,{to:"/settings",class:"nav-item"},{default:d(()=>[...t[10]||(t[10]=[s("i",{class:"bi bi-gear-fill"},null,-1),s("span",null,"Pengaturan",-1)])]),_:1})])]),s("main",V,[s("div",F,[t[24]||(t[24]=s("div",{class:"page-header"},[s("h1",null,[s("i",{class:"bi bi-clock-history me-2"}),p("Riwayat & Score")]),s("p",{class:"text-muted"},"Lihat riwayat karaoke dan pencapaian Anda")],-1)),s("div",I,[s("div",q,[t[13]||(t[13]=s("div",{class:"stat-icon"},[s("i",{class:"bi bi-music-note-list"})],-1)),s("div",A,[s("span",E,n(r.value.totalSongsPlayed||0),1),t[12]||(t[12]=s("span",{class:"stat-label"},"Total Lagu",-1))])]),s("div",W,[t[15]||(t[15]=s("div",{class:"stat-icon secondary"},[s("i",{class:"bi bi-trophy-fill"})],-1)),s("div",j,[s("span",z,n(r.value.averageScore||0),1),t[14]||(t[14]=s("span",{class:"stat-label"},"Rata-rata Score",-1))])]),s("div",G,[t[17]||(t[17]=s("div",{class:"stat-icon accent"},[s("i",{class:"bi bi-clock-fill"})],-1)),s("div",J,[s("span",O,n(r.value.totalDurationMinutes||0)+"m",1),t[16]||(t[16]=s("span",{class:"stat-label"},"Total Waktu",-1))])]),s("div",Q,[t[19]||(t[19]=s("div",{class:"stat-icon success"},[s("i",{class:"bi bi-star-fill"})],-1)),s("div",X,[s("span",Y,n(r.value.badge)+" "+n(r.value.level),1),t[18]||(t[18]=s("span",{class:"stat-label"},"Level Kamu",-1))])])]),s("div",Z,[t[21]||(t[21]=s("h3",null,[s("i",{class:"bi bi-trophy me-2"}),p("High Scores")],-1)),((x=r.value.highScores)==null?void 0:x.length)>0?(l(),a("div",$,[(l(!0),a(w,null,S(r.value.highScores,i=>{var c,v;return l(),a("div",{key:i.id,class:"history-item"},[t[20]||(t[20]=s("div",{class:"item-rank"},"ðŸ†",-1)),s("div",ss,[y(g)(i.song)?(l(),a("img",{key:0,src:y(g)(i.song),alt:""},null,8,ts)):(l(),a("i",as))]),s("div",ls,[s("h4",null,n(((c=i.song)==null?void 0:c.title)||"Unknown"),1),s("p",null,n(((v=i.song)==null?void 0:v.artist)||"-"),1)]),s("div",is,n(i.score)+" pts",1)])}),128))])):(l(),a("div",es,"Belum ada high score"))]),s("div",os,[t[23]||(t[23]=s("h3",null,[s("i",{class:"bi bi-clock-history me-2"}),p("Riwayat Terakhir")],-1)),_.value?(l(),a("div",ns,[...t[22]||(t[22]=[s("div",{class:"spinner-border text-primary"},null,-1)])])):b.value.length>0?(l(),a("div",ds,[(l(!0),a(w,null,S(b.value,i=>{var c,v;return l(),a("div",{key:i.id,class:"history-item"},[s("div",rs,n(M(i.created_at)),1),s("div",us,[y(g)(i.song)?(l(),a("img",{key:0,src:y(g)(i.song),alt:""},null,8,cs)):(l(),a("i",vs))]),s("div",ms,[s("h4",null,n(((c=i.song)==null?void 0:c.title)||"Unknown"),1),s("p",null,n(((v=i.song)==null?void 0:v.artist)||"-"),1)]),i.score?(l(),a("div",bs,n(i.score)+" pts",1)):L("",!0)])}),128))])):(l(),a("div",ps,"Belum ada riwayat")),h.value?(l(),a("div",ys,[s("button",{class:"btn btn-outline-primary",onClick:D},"Muat Lebih Banyak")])):L("",!0)])])]),o(H)])}}},xs=N(gs,[["__scopeId","data-v-56594306"]]);export{xs as default};
