import{x as Bt,r as i,c as E,p as ze,_ as Ht,y as ie,o as Gt,z as Kt,a as u,b as Qt,d as t,e as h,w as k,f as z,g as jt,i as g,t as v,j as a,A as Se,n as _,m as rt,B as De,C as Wt,D as ut,F as Be,k as He,T as ct,s as re,E as W,G as Xt,v as c}from"./index-Btw_uZyE.js";import{M as Yt}from"./MobileNav-CceEoPrP.js";import{g as Zt,a as dt}from"./media-BmRio5iY.js";const Jt="/assets/video_intro.mp4",es=Bt("player",()=>{const X=i(null),T=i(null),l=i(!1),r=i(!1),p=i(0),L=i(0),S=i(.8),G=i(0),R=i(!1),P=i(!1),w=i([]),D=i(!1);let Y=0;const B=E(()=>L.value===0?0:p.value/L.value*100),K=E(()=>X.value?R.value?X.value.video_url_full:X.value.video_url_instrumental:null),Pe=E(()=>H(p.value)),Z=E(()=>H(L.value)),ue=async b=>{const y=++Y;D.value=!0;const N=T.value,C=Math.round(p.value);X.value=b,T.value=null,l.value=!0,r.value=!1,p.value=0,L.value=0,P.value=!1,D.value=!1,N&&ze.end(N,C).catch(M=>{console.error("Error ending previous session:",M)}),ze.start(b.id).then(M=>{y===Y&&(T.value=M.data.data.historyId)}).catch(M=>{y===Y&&console.error("Error starting playback session:",M)})},Ce=()=>{l.value=!1,r.value=!0},Me=()=>{l.value=!0,r.value=!1},se=async()=>{T.value&&await ce(),l.value=!1,r.value=!1,p.value=0},ce=async()=>{if(!T.value)return null;try{const y=(await ze.end(T.value,Math.round(p.value))).data.data;return T.value=null,y}catch(b){return console.error("Error ending session:",b),null}},xe=b=>{p.value=b},Te=b=>{L.value=b},A=b=>{S.value=Math.max(0,Math.min(1,b))},V=b=>{G.value=Math.max(-6,Math.min(6,b))},$=()=>{R.value=!R.value},q=()=>{P.value=!P.value},de=b=>{w.value.push(b)},ve=async()=>{if(w.value.length>0){const b=w.value.shift();await ue(b)}},Q=()=>{w.value=[]},H=b=>{if(!b||isNaN(b))return"0:00";const y=Math.floor(b/60),N=Math.floor(b%60);return`${y}:${N.toString().padStart(2,"0")}`};return{currentSong:X,historyId:T,isPlaying:l,isPaused:r,currentTime:p,duration:L,volume:S,pitch:G,vocalOn:R,showOverlay:P,queue:w,loading:D,progress:B,currentVideoUrl:K,formattedCurrentTime:Pe,formattedDuration:Z,playSong:ue,pause:Ce,resume:Me,stop:se,endCurrentSession:ce,updateTime:xe,setDuration:Te,setVolume:A,setPitch:V,toggleVocal:$,toggleOverlay:q,addToQueue:de,playNext:ve,clearQueue:Q}}),ts={class:"karaoke-layout"},ss={class:"dashboard-sidebar"},ls={class:"sidebar-header"},as={class:"sidebar-nav"},os={class:"karaoke-main"},ns={class:"mobile-topbar"},is={class:"mobile-now"},rs={class:"now-title"},us={class:"now-sub"},cs={key:0,class:"icon-badge"},ds={class:"player-wrapper"},vs={class:"video-container"},ps={key:0,class:"video-placeholder"},bs={class:"placeholder-content"},gs=["src"],fs={key:1,class:"lyrics-overlay"},ms={class:"lyric-text"},hs={key:2,class:"song-info-overlay"},ys={class:"song-info-row"},ks={class:"song-info-text"},ws={key:3,class:"song-info-badges song-info-badges--corner"},_s={key:0,class:"song-pill song-pill--soft"},Ss={class:"controls-bar"},Ps={key:0,class:"control-popup-content"},Cs={class:"popup-header"},Ms={class:"popup-body"},xs={class:"popup-row"},Ts=["disabled"],Ls=["disabled"],Rs={class:"progress-container"},Os={class:"time-display"},Es={class:"time-display"},As={class:"controls-main"},Vs={class:"controls-left"},$s={key:0,class:"icon-badge"},qs={class:"controls-center"},Ns=["disabled"],Fs={class:"controls-right"},Is=["disabled"],Us={class:"desktop-only"},zs=["disabled"],Ds={class:"pitch-control desktop-only"},Bs=["disabled"],Hs=["disabled"],Gs={class:"tempo-control desktop-only"},Ks=["disabled"],Qs={class:"control-value"},js=["disabled"],Ws={class:"volume-control desktop-only"},Xs=["value"],Ys={class:"overlay-content",role:"dialog","aria-modal":"true","aria-label":"Pilih Lagu"},Zs={class:"overlay-header"},Js={class:"overlay-title"},el={class:"overlay-subtitle"},tl={class:"overlay-count"},sl={key:0,class:"overlay-chip"},ll={key:1,class:"overlay-chip"},al={key:2,class:"overlay-chip"},ol={class:"overlay-actions"},nl={class:"overlay-toolbar"},il={class:"overlay-search"},rl={class:"overlay-filters"},ul=["value"],cl=["value"],dl={class:"song-thumbnail"},vl=["src","alt"],pl={key:1,class:"bi bi-music-note"},bl={class:"song-details"},gl={class:"song-meta"},fl={key:0},ml={key:1},hl={class:"song-actions"},yl=["onClick"],kl=["onClick"],wl={key:0,class:"empty-songs"},_l={key:1,class:"loading-songs"},Sl={key:2,class:"loading-songs loading-songs--more"},Pl={key:0,class:"score-modal",role:"dialog","aria-modal":"true","aria-label":"Hasil skor karaoke"},Cl={class:"score-header"},Ml=["aria-label"],xl={class:"score-mood-copy"},Tl={class:"score-mood-title"},Ll={class:"score-mood-subtitle"},Rl={class:"score-body"},Ol={class:"score-value-line"},El={class:"score-value"},Al={class:"score-meter","aria-hidden":"true"},Vl={key:0,class:"high-score-badge"},$l={key:0,class:"kp-toast-notification",role:"status","aria-live":"polite"},ql=30,Nl=220,Fl={__name:"KaraokePage",setup(X){const T=Xt(),l=es(),r=i(null);let p=null,L=null,S=null,G=null,R=null,P=null,w=null;const D=E(()=>l.currentSong),Y=E(()=>D.value?Zt(D.value):""),B=i(!1),K=i(""),Pe=()=>{if(typeof navigator>"u")return!1;const s=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!s)return!1;if(s.saveData)return!0;const e=(s.effectiveType||"").toLowerCase();return["slow-2g","2g","3g"].includes(e)},Z=i(!1);ie(D,()=>{B.value=!1,Z.value=Pe(),K.value=""},{immediate:!0}),ie(()=>l.vocalOn,()=>{K.value=""});const ue=s=>s?s.includes("localhost")?s.replace(/^http(s)?:\/\/localhost(:\d+)?/,""):s:"",Ce=s=>{if(!s||s.includes("/videos/low/"))return s;const e="/videos/",o=s.indexOf(e);return o===-1?s:`${s.slice(0,o)}${e}low/${s.slice(o+e.length)}`},Me=s=>{if(!s)return"";const[e,o]=s.split("?"),d=e.split("/"),f=d.pop()||"",I=`${d.join("/")}/${encodeURIComponent(f)}`;return o?`${I}?${o}`:I},se=E(()=>{var d;let s=K.value||l.currentVideoUrl||((d=D.value)==null?void 0:d.video_url_full);if(s=ue(s),!s)return"";const e=s.includes("/videos/")&&!s.includes("youtu"),o=Z.value&&!B.value;return e&&o?Ce(s):s}),ce=E(()=>Me(se.value)),xe=s=>{if(!s)return"";const[e,o]=s.split("?");if(!e.toLowerCase().endsWith(".mpg"))return s;const d=e.replace(/\.mpg$/i,".mp4");return o?`${d}?${o}`:d},Te=()=>{if(Z.value&&!B.value){B.value=!0,W(()=>{r.value&&r.value.play().catch(()=>{})});return}!K.value&&se.value.toLowerCase().endsWith(".mpg")&&(K.value=xe(se.value),B.value=!0,W(()=>{r.value&&r.value.play().catch(()=>{})}))},A=i(""),V=i(""),$=i(""),q=i([]),de=i([]),ve=i([]),Q=i(!1),H=i(!1),b=i(""),y=i(!1),N=i(0),C=i(!1),M=i(0),Le=i(null),Re=i(.8),x=i(1),pe=i(!1),F=i(null),Oe=i(!1),Ge=i("");let le=null,be=null;const vt=s=>{Ge.value=s,Oe.value=!0,le&&clearTimeout(le),le=setTimeout(()=>{Oe.value=!1},1700)},Ee=()=>{be&&(clearTimeout(be),be=null)},pt=E(()=>l.volume===0?"bi bi-volume-mute-fill":l.volume<.5?"bi bi-volume-down-fill":"bi bi-volume-up-fill"),bt=E(()=>Math.max(0,Math.min(100,Number(M.value)||0))),ae=E(()=>{const s=Math.max(0,Math.min(100,Number(N.value)||0));return s>=95?{tone:"legend",icon:"bi bi-emoji-heart-eyes-fill",title:"Luar Biasa!",subtitle:"Nyaris sempurna â€” pertahankan!",aria:"Ekspresi sangat senang"}:s>=80?{tone:"great",icon:"bi bi-emoji-laughing-fill",title:"Keren!",subtitle:"Sudah sangat bagus!",aria:"Ekspresi senang"}:s>=60?{tone:"good",icon:"bi bi-emoji-smile-fill",title:"Bagus!",subtitle:"Dikit lagi makin mantap.",aria:"Ekspresi tersenyum"}:s>=40?{tone:"okay",icon:"bi bi-emoji-neutral-fill",title:"Lumayan!",subtitle:"Yuk coba lagi biar lebih tinggi.",aria:"Ekspresi netral"}:{tone:"low",icon:"bi bi-emoji-frown-fill",title:"Coba Lagi!",subtitle:"Santai, latihan dulu ya.",aria:"Ekspresi sedih"}}),Ke=()=>typeof window>"u"||!window.matchMedia?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches;let J=null,ee=null,ge=null;const te=[],Ae=()=>{var o;J&&(cancelAnimationFrame(J),J=null),ee&&(cancelAnimationFrame(ee),ee=null),typeof ge=="function"&&(ge(),ge=null),te.length=0;const s=Le.value,e=(o=s==null?void 0:s.getContext)==null?void 0:o.call(s,"2d");s&&e&&e.clearRect(0,0,s.width,s.height)},Qe=()=>{const s=Math.max(0,Math.min(100,Number(N.value)||0));if(Ke()){M.value=s;return}const e=900,o=performance.now();M.value=0;const d=f=>{const n=Math.min(1,(f-o)/e),I=1-Math.pow(1-n,3);M.value=Math.round(s*I),n<1?J=requestAnimationFrame(d):(J=null,M.value=s)};J=requestAnimationFrame(d)},je=()=>{if(Ke())return;const s=Le.value;if(!s)return;const e=s.getContext("2d");if(!e)return;const o=()=>{const U=Math.max(1,Math.min(2,window.devicePixelRatio||1)),O=s.getBoundingClientRect();s.width=Math.floor(O.width*U),s.height=Math.floor(O.height*U),e.setTransform(U,0,0,U,0,0)};o();const d=()=>o();window.addEventListener("resize",d,{passive:!0}),ge=()=>window.removeEventListener("resize",d);const f=C.value?["#22c55e","#06b6d4","#3b82f6","#a7f3d0","#67e8f9"]:["#22c55e","#06b6d4","#3b82f6","#a7f3d0","#67e8f9"],n=C.value?8:5,I=performance.now()+(C.value?3200:2400);let Fe=0;const Dt=()=>{if(Fe>=n)return;Fe+=1;const U=s.clientWidth,O=s.clientHeight,m=U*(.18+Math.random()*.64),Ie=O*(.18+Math.random()*.46),ne=C.value?46:34;for(let Ue=0;Ue<ne;Ue++){const nt=Math.PI*2*Ue/ne+(Math.random()-.5)*.25,it=(C.value?2.8:2.2)+Math.random()*(C.value?3:2.4);te.push({x:m,y:Ie,vx:Math.cos(nt)*it,vy:Math.sin(nt)*it,life:0,ttl:52+Math.random()*18,size:1.1+Math.random()*1.8,color:f[Math.floor(Math.random()*f.length)]})}},ot=U=>{if(e.clearRect(0,0,s.clientWidth,s.clientHeight),e.save(),e.globalCompositeOperation="lighter",U<I&&Fe<n){const O=C.value?.13:.095;Math.random()<O&&Dt()}for(let O=te.length-1;O>=0;O--){const m=te[O];m.life+=1,m.vx*=.985,m.vy=m.vy*.985+.028,m.x+=m.vx,m.y+=m.vy;const Ie=m.life/m.ttl,ne=Math.max(0,1-Ie);e.fillStyle=m.color,e.globalAlpha=ne*.9,e.beginPath(),e.arc(m.x,m.y,m.size,0,Math.PI*2),e.fill(),(m.life>=m.ttl||ne<=.01)&&te.splice(O,1)}e.restore(),U<I||te.length>0?ee=requestAnimationFrame(ot):ee=null};ee=requestAnimationFrame(ot)};ie(()=>y.value,async s=>{Ae(),s&&(await W(),Qe(),je())}),ie(()=>N.value,async()=>{y.value&&(Ae(),await W(),Qe(),je())});const We=()=>{if(!(pe.value||!r.value))try{p=new(window.AudioContext||window.webkitAudioContext),L=p.createMediaElementSource(r.value),G=p.createChannelSplitter(2),P=p.createGain(),w=p.createGain(),R=p.createChannelMerger(2),S=p.createGain(),L.connect(G),G.connect(P,0),G.connect(w,1),P.connect(R,0,0),P.connect(R,0,1),w.connect(R,0,0),w.connect(R,0,1),R.connect(S),S.connect(p.destination),pe.value=!0,Xe()}catch(s){console.error("Error initializing Web Audio API:",s),L&&L.connect(p.destination)}},Xe=()=>{!P||!w||(l.vocalOn?(P.gain.value=.5,w.gain.value=.5):(P.gain.value=1,w.gain.value=0))},gt=()=>{l.currentSong&&(l.toggleVocal(),Xe())},ft=()=>{r.value&&(pe.value||(We(),(p==null?void 0:p.state)==="suspended"&&p.resume()),l.isPlaying?(r.value.pause(),l.pause()):(r.value.play(),l.resume()))},mt=s=>{const e=s.target.currentTime;l.updateTime(e),Ot(e)},Ve=i(!1),ht=s=>{l.setDuration(s.target.duration)},yt=()=>{l.resume(),(p==null?void 0:p.state)==="suspended"&&p.resume()},kt=()=>{l.pause()},wt=async()=>{if(Ve.value)return;Ve.value=!0,r.value&&r.value.pause();const s=await l.endCurrentSession();s&&(N.value=s.score,C.value=s.isHighScore,y.value=!0),l.queue.length>0&&(Ee(),be=setTimeout(()=>{Ye().catch(e=>console.error("Error playing next song:",e))},2e3))},_t=async()=>{r.value&&(r.value.pause(),r.value.currentTime=0),await l.stop()},St=s=>{if(!r.value||!l.duration)return;const e=s.currentTarget.getBoundingClientRect(),d=(s.clientX-e.left)/e.width*l.duration;r.value.currentTime=d,l.updateTime(d)},Pt=()=>{r.value&&(r.value.currentTime=0),l.updateTime(0)},Ye=async()=>{if(l.queue.length===0)return;const s=l.queue.shift();s&&(y.value=!1,await _e(s))},Ct=async()=>{l.queue.length>0&&await Ye()},Mt=s=>{const e=parseFloat(s.target.value);l.setVolume(e),S&&(S.gain.value=e)},xt=()=>{l.volume>0?(Re.value=l.volume,l.setVolume(0),S&&(S.gain.value=0)):(l.setVolume(Re.value),S&&(S.gain.value=Re.value))},Ze=i(1),$e=i(!1),Je=s=>Math.pow(2,s/12),et=()=>{l.pitch<6&&(l.setPitch(l.pitch+1),qe())},tt=()=>{l.pitch>-6&&(l.setPitch(l.pitch-1),qe())},st=()=>{l.setPitch(0),qe()},qe=()=>{if(r.value){Ze.value=Je(l.pitch),r.value.playbackRate=Ze.value;try{r.value.preservesPitch=$e.value,r.value.mozPreservesPitch=$e.value,r.value.webkitPreservesPitch=$e.value}catch{console.log("preservesPitch not supported")}}},Tt=()=>{x.value<2&&(x.value=Math.min(2,Math.round((x.value+.1)*10)/10),fe())},Lt=()=>{x.value>.5&&(x.value=Math.max(.5,Math.round((x.value-.1)*10)/10),fe())},Rt=()=>{x.value=1,fe()},fe=()=>{if(!r.value)return;const e=Je(l.pitch)*x.value;r.value.playbackRate=e;try{r.value.preservesPitch=!0,r.value.mozPreservesPitch=!0,r.value.webkitPreservesPitch=!0}catch{}},Ot=s=>{var d;if(!((d=l.currentSong)!=null&&d.lyrics_data)){b.value="";return}const e=l.currentSong.lyrics_data;if(!Array.isArray(e))return;let o="";for(let f=e.length-1;f>=0;f--)if(e[f].time<=s){o=e[f].text;break}b.value=o},Et=s=>{F.value===s?F.value=null:F.value=s},At=()=>{Ne()},Vt=()=>{A.value&&(A.value="",Ne(0))},$t=()=>{A.value="",V.value="",$.value="",Ne(0)},me=i(null),he=i(1),ye=i(!1),j=i(0);let oe=null;const Ne=(s=250)=>{oe&&clearTimeout(oe),oe=setTimeout(()=>{ke()},s)},lt=s=>({search:(A.value||"").trim(),genre:V.value,language:$.value,page:s,limit:ql}),at=()=>!Q.value&&!H.value&&ye.value,ke=async()=>{var e,o;j.value+=1;const s=j.value;Q.value=!0,H.value=!1,q.value=[],he.value=1,ye.value=!1;try{const d=await re.getAll(lt(1));if(s!==j.value)return;const f=d.data.data||[],n=d.data.meta||{};q.value=f,he.value=n.page||1,ye.value=!!n.hasNextPage}catch(d){console.error("Error fetching songs:",d)}finally{s===j.value&&(await W(),(o=(e=me.value)==null?void 0:e.scrollTo)==null||o.call(e,{top:0}),Q.value=!1,we())}},qt=async()=>{if(!at())return;const s=j.value,e=he.value+1;H.value=!0;try{const o=await re.getAll(lt(e));if(s!==j.value)return;const d=o.data.data||[],f=o.data.meta||{};q.value=[...q.value,...d],he.value=f.page||e,ye.value=!!f.hasNextPage}catch(o){console.error("Error fetching more songs:",o)}finally{s===j.value&&(await W(),H.value=!1,we())}},we=()=>{if(!me.value||!at())return;const s=me.value;s.scrollHeight-(s.scrollTop+s.clientHeight)<=Nl&&qt()},Nt=async()=>{try{const[s,e]=await Promise.all([re.getGenres(),re.getLanguages()]);de.value=s.data.data||[],ve.value=e.data.data||[]}catch(s){console.error("Error fetching filters:",s)}},_e=async s=>{Ee(),Ve.value=!1,y.value=!1,await l.playSong(s),setTimeout(()=>{r.value&&(pe.value||We(),r.value.play().catch(()=>{}),fe())},100)},Ft=s=>{l.addToQueue(s),vt(`Ditambahkan ke antrian: ${s.title}`)},It=()=>{y.value=!1},Ut=async()=>{l.currentSong&&await _e(l.currentSong)},zt=async()=>{if(T.params.songId)try{const s=await re.getById(T.params.songId);s.data.data&&await _e(s.data.data)}catch(s){console.error("Error loading song:",s)}};return Gt(()=>{ke(),Nt(),zt()}),Kt(()=>{oe&&clearTimeout(oe),r.value&&r.value.pause(),Ee(),le&&clearTimeout(le),Ae(),p&&p.close()}),ie(()=>l.showOverlay,async s=>{s&&(await W(),we())}),(s,e)=>{var d,f;const o=jt("router-link");return c(),u("div",ts,[e[68]||(e[68]=Qt('<div class="karaoke-bg" aria-hidden="true" data-v-9c4724ac><div class="bg-mesh" data-v-9c4724ac></div><div class="bg-particles" data-v-9c4724ac></div><div class="bg-orb orb-1" data-v-9c4724ac></div><div class="bg-orb orb-2" data-v-9c4724ac></div><div class="bg-orb orb-3" data-v-9c4724ac></div></div>',1)),t("aside",ss,[t("div",ls,[h(o,{to:"/dashboard",class:"brand"},{default:k(()=>[...e[11]||(e[11]=[t("i",{class:"bi bi-music-note-beamed"},null,-1),t("span",null,[z("Karaoke"),t("span",{class:"text-gradient"},"Ku")],-1)])]),_:1})]),t("nav",as,[h(o,{to:"/dashboard",class:"nav-item"},{default:k(()=>[...e[12]||(e[12]=[t("i",{class:"bi bi-grid-1x2-fill"},null,-1),t("span",null,"Dashboard",-1)])]),_:1}),h(o,{to:"/karaoke",class:"nav-item active"},{default:k(()=>[...e[13]||(e[13]=[t("i",{class:"bi bi-mic-fill"},null,-1),t("span",null,"Karaoke",-1)])]),_:1}),h(o,{to:"/songs",class:"nav-item"},{default:k(()=>[...e[14]||(e[14]=[t("i",{class:"bi bi-music-note-list"},null,-1),t("span",null,"Pilih Lagu",-1)])]),_:1}),h(o,{to:"/favorites",class:"nav-item"},{default:k(()=>[...e[15]||(e[15]=[t("i",{class:"bi bi-heart-fill"},null,-1),t("span",null,"Lagu Favorit",-1)])]),_:1}),h(o,{to:"/playlists",class:"nav-item"},{default:k(()=>[...e[16]||(e[16]=[t("i",{class:"bi bi-collection-play-fill"},null,-1),t("span",null,"Playlist Saya",-1)])]),_:1}),h(o,{to:"/upload",class:"nav-item"},{default:k(()=>[...e[17]||(e[17]=[t("i",{class:"bi bi-cloud-upload-fill"},null,-1),t("span",null,"Upload Lagu",-1)])]),_:1}),h(o,{to:"/history",class:"nav-item"},{default:k(()=>[...e[18]||(e[18]=[t("i",{class:"bi bi-clock-history"},null,-1),t("span",null,"Riwayat & Score",-1)])]),_:1}),h(o,{to:"/request",class:"nav-item"},{default:k(()=>[...e[19]||(e[19]=[t("i",{class:"bi bi-plus-circle-fill"},null,-1),t("span",null,"Request Lagu",-1)])]),_:1}),h(o,{to:"/donation",class:"nav-item"},{default:k(()=>[...e[20]||(e[20]=[t("i",{class:"bi bi-heart-fill"},null,-1),t("span",null,"Donasi",-1)])]),_:1}),e[22]||(e[22]=t("div",{class:"nav-divider"},null,-1)),h(o,{to:"/settings",class:"nav-item"},{default:k(()=>[...e[21]||(e[21]=[t("i",{class:"bi bi-gear-fill"},null,-1),t("span",null,"Pengaturan",-1)])]),_:1})])]),t("main",os,[t("div",ns,[h(o,{to:"/dashboard",class:"brand brand--compact"},{default:k(()=>[...e[23]||(e[23]=[t("i",{class:"bi bi-music-note-beamed"},null,-1),t("span",null,[z("Karaoke"),t("span",{class:"text-gradient"},"Ku")],-1)])]),_:1}),t("div",is,[t("div",rs,v(((d=a(l).currentSong)==null?void 0:d.title)||"Pilih Lagu"),1),t("div",us,v(((f=a(l).currentSong)==null?void 0:f.artist)||"Mulai karaoke dengan memilih lagu"),1)]),t("button",{class:"icon-btn",type:"button",onClick:e[0]||(e[0]=n=>a(l).toggleOverlay()),"aria-label":"Pilih Lagu"},[a(l).queue.length>0?(c(),u("span",cs,v(a(l).queue.length),1)):g("",!0),e[24]||(e[24]=t("i",{class:"bi bi-music-note-list"},null,-1))])]),t("div",ds,[t("div",{class:"video-glow",style:Se({backgroundImage:Y.value?`var(--gradient-glow), url(${Y.value})`:"var(--gradient-glow)"})},null,4),t("div",vs,[a(l).currentSong?g("",!0):(c(),u("div",ps,[e[26]||(e[26]=t("video",{class:"video-intro",autoplay:"",loop:"",muted:"",playsinline:""},[t("source",{src:Jt,type:"video/mp4"})],-1)),t("div",bs,[t("button",{class:"btn btn-primary btn-lg",onClick:e[1]||(e[1]=n=>a(l).toggleOverlay())},[...e[25]||(e[25]=[t("i",{class:"bi bi-search me-2"},null,-1),z(" Pilih Lagu ",-1)])])])])),t("video",{ref_key:"videoRef",ref:r,class:"video-player",src:ce.value,onTimeupdate:mt,onLoadedmetadata:ht,onEnded:wt,onPlay:yt,onPause:kt,onError:Te,crossorigin:"anonymous",preload:"auto",playsinline:""},null,40,gs),a(l).currentSong&&b.value?(c(),u("div",fs,[t("p",{class:_(["lyric-line",{active:!0}])},[t("span",ms,v(b.value),1)])])):g("",!0),a(l).currentSong?(c(),u("div",hs,[t("div",ys,[t("div",ks,[t("h3",null,v(a(l).currentSong.title),1),t("p",null,v(a(l).currentSong.artist),1)])])])):g("",!0),a(l).currentSong?(c(),u("div",ws,[t("span",{class:_(["song-pill",{on:a(l).vocalOn}])},v(a(l).vocalOn?"VOCAL":"KARAOKE"),3),Z.value&&!B.value?(c(),u("span",_s," LOW ")):g("",!0)])):g("",!0)])]),t("div",Ss,[F.value?(c(),u("div",{key:0,class:"mobile-control-overlay",onClick:e[3]||(e[3]=rt(n=>F.value=null,["self"]))},[t("div",{class:_(["mobile-control-popup",F.value])},[F.value==="pitch"?(c(),u("div",Ps,[t("div",Cs,[e[28]||(e[28]=t("i",{class:"bi bi-music-note"},null,-1)),e[29]||(e[29]=t("span",null,"Pitch Control",-1)),t("button",{class:"btn-close-popup",onClick:e[2]||(e[2]=n=>F.value=null)},[...e[27]||(e[27]=[t("i",{class:"bi bi-x"},null,-1)])])]),t("div",Ms,[t("div",xs,[t("button",{class:"btn-popup-control",onClick:tt,disabled:a(l).pitch<=-12},[...e[30]||(e[30]=[t("i",{class:"bi bi-dash"},null,-1)])],8,Ts),t("div",{class:_(["popup-value",{positive:a(l).pitch>0,negative:a(l).pitch<0}])},v(a(l).pitch>0?"+":"")+v(a(l).pitch),3),t("button",{class:"btn-popup-control",onClick:et,disabled:a(l).pitch>=12},[...e[31]||(e[31]=[t("i",{class:"bi bi-plus"},null,-1)])],8,Ls)]),a(l).pitch!==0?(c(),u("button",{key:0,class:"btn-popup-reset",onClick:st}," Reset ")):g("",!0)])])):g("",!0)],2)])):g("",!0),t("div",Rs,[t("span",Os,v(a(l).formattedCurrentTime),1),t("div",{class:"progress-bar",onClick:St},[t("div",{class:"progress-fill",style:Se({width:a(l).progress+"%"})},null,4),t("div",{class:"progress-thumb",style:Se({left:a(l).progress+"%"})},null,4)]),t("span",Es,v(a(l).formattedDuration),1)]),t("div",As,[t("div",Vs,[t("button",{class:"btn-control",type:"button",onClick:e[4]||(e[4]=n=>a(l).toggleOverlay()),title:"Pilih Lagu"},[a(l).queue.length>0?(c(),u("span",$s,v(a(l).queue.length),1)):g("",!0),e[32]||(e[32]=t("i",{class:"bi bi-music-note-list"},null,-1))])]),t("div",qs,[t("button",{class:"btn-control",onClick:Pt,title:"Sebelumnya"},[...e[33]||(e[33]=[t("i",{class:"bi bi-skip-start-fill"},null,-1)])]),t("button",{class:"btn-play",onClick:ft,disabled:!a(l).currentSong},[t("i",{class:_(a(l).isPlaying?"bi bi-pause-fill":"bi bi-play-fill")},null,2)],8,Ns),t("button",{class:"btn-control",onClick:Ct,title:"Selanjutnya"},[...e[34]||(e[34]=[t("i",{class:"bi bi-skip-end-fill"},null,-1)])]),t("button",{class:"btn-control desktop-only",onClick:_t,title:"Stop"},[...e[35]||(e[35]=[t("i",{class:"bi bi-stop-fill"},null,-1)])])]),t("div",Fs,[t("button",{class:_(["btn-control btn-channel",{on:a(l).vocalOn,off:!a(l).vocalOn}]),onClick:gt,title:"Toggle Audio Channel",disabled:!a(l).currentSong},[t("i",{class:_((a(l).vocalOn,"bi bi-mic-fill"))},null,2),t("span",Us,v(a(l).vocalOn?"ON":"OFF"),1)],10,Is),t("button",{class:_(["btn-control mobile-only",{active:F.value==="pitch"}]),onClick:e[5]||(e[5]=n=>Et("pitch")),title:"Pitch",disabled:!a(l).currentSong},[...e[36]||(e[36]=[t("i",{class:"bi bi-music-note"},null,-1)])],10,zs),t("div",Ds,[e[40]||(e[40]=t("span",{class:"control-label"},"Pitch:",-1)),t("button",{class:"btn-sm-control",onClick:tt,disabled:a(l).pitch<=-12,title:"-1"},[...e[37]||(e[37]=[t("i",{class:"bi bi-dash"},null,-1)])],8,Bs),t("span",{class:_(["control-value",{positive:a(l).pitch>0,negative:a(l).pitch<0}])},v(a(l).pitch>0?"+":"")+v(a(l).pitch),3),t("button",{class:"btn-sm-control",onClick:et,disabled:a(l).pitch>=12,title:"+1"},[...e[38]||(e[38]=[t("i",{class:"bi bi-plus"},null,-1)])],8,Hs),a(l).pitch!==0?(c(),u("button",{key:0,class:"btn-sm-control btn-reset",onClick:st,title:"Reset"},[...e[39]||(e[39]=[t("i",{class:"bi bi-arrow-counterclockwise"},null,-1)])])):g("",!0)]),t("div",Gs,[e[44]||(e[44]=t("span",{class:"control-label"},"Tempo:",-1)),t("button",{class:"btn-sm-control",onClick:Lt,disabled:x.value<=.5,title:"Slower"},[...e[41]||(e[41]=[t("i",{class:"bi bi-dash"},null,-1)])],8,Ks),t("span",Qs,v(Math.round(x.value*100))+"% ",1),t("button",{class:"btn-sm-control",onClick:Tt,disabled:x.value>=2,title:"Faster"},[...e[42]||(e[42]=[t("i",{class:"bi bi-plus"},null,-1)])],8,js),x.value!==1?(c(),u("button",{key:0,class:"btn-sm-control btn-reset",onClick:Rt,title:"Reset"},[...e[43]||(e[43]=[t("i",{class:"bi bi-arrow-counterclockwise"},null,-1)])])):g("",!0)]),t("div",Ws,[t("button",{class:"btn-control",onClick:xt},[t("i",{class:_(pt.value)},null,2)]),t("input",{type:"range",min:"0",max:"1",step:"0.1",value:a(l).volume,onInput:Mt,class:"volume-slider"},null,40,Xs)])])])]),a(l).showOverlay?(c(),u("div",{key:0,class:"song-overlay",onClick:e[10]||(e[10]=rt(n=>a(l).toggleOverlay(),["self"]))},[t("div",Ys,[t("div",Zs,[t("div",Js,[e[48]||(e[48]=t("h2",{class:"text-gradient"},"Pilih Lagu",-1)),t("div",el,[t("span",tl,v(q.value.length)+" lagu",1),V.value?(c(),u("span",sl,[e[45]||(e[45]=t("i",{class:"bi bi-tag"},null,-1)),z(v(V.value),1)])):g("",!0),$.value?(c(),u("span",ll,[e[46]||(e[46]=t("i",{class:"bi bi-globe2"},null,-1)),z(v($.value),1)])):g("",!0),a(l).queue.length>0?(c(),u("span",al,[e[47]||(e[47]=t("i",{class:"bi bi-list-ul"},null,-1)),z(v(a(l).queue.length)+" antrian ",1)])):g("",!0)])]),t("div",ol,[A.value||V.value||$.value?(c(),u("button",{key:0,class:"btn btn-ghost btn-sm overlay-reset",type:"button",onClick:$t},[...e[49]||(e[49]=[t("i",{class:"bi bi-arrow-counterclockwise"},null,-1),t("span",{class:"overlay-reset-text"},"Reset",-1)])])):g("",!0),t("button",{class:"btn-close-overlay",type:"button",onClick:e[6]||(e[6]=n=>a(l).toggleOverlay()),"aria-label":"Tutup"},[...e[50]||(e[50]=[t("i",{class:"bi bi-x-lg"},null,-1)])])])]),t("div",nl,[t("div",il,[e[52]||(e[52]=t("i",{class:"bi bi-search"},null,-1)),De(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=n=>A.value=n),onInput:At,placeholder:"Cari judul atau artis...",class:"form-control"},null,544),[[Wt,A.value]]),A.value?(c(),u("button",{key:0,class:"search-clear",type:"button",onClick:Vt,"aria-label":"Hapus pencarian"},[...e[51]||(e[51]=[t("i",{class:"bi bi-x"},null,-1)])])):g("",!0)]),t("div",rl,[De(t("select",{"onUpdate:modelValue":e[8]||(e[8]=n=>V.value=n),onChange:ke,class:"form-select"},[e[53]||(e[53]=t("option",{value:""},"Semua Genre",-1)),(c(!0),u(Be,null,He(de.value,n=>(c(),u("option",{key:n,value:n},v(n),9,ul))),128))],544),[[ut,V.value]]),De(t("select",{"onUpdate:modelValue":e[9]||(e[9]=n=>$.value=n),onChange:ke,class:"form-select"},[e[54]||(e[54]=t("option",{value:""},"Semua Bahasa",-1)),(c(!0),u(Be,null,He(ve.value,n=>(c(),u("option",{key:n,value:n},v(n),9,cl))),128))],544),[[ut,$.value]])])]),t("div",{ref_key:"overlaySongsRef",ref:me,class:"overlay-songs",onScrollPassive:we},[(c(!0),u(Be,null,He(q.value,n=>(c(),u("div",{key:n.id,class:"overlay-song-item"},[t("div",dl,[a(dt)(n)?(c(),u("img",{key:0,src:a(dt)(n),alt:n.title,loading:"lazy"},null,8,vl)):(c(),u("i",pl))]),t("div",bl,[t("h4",null,v(n.title),1),t("p",null,v(n.artist),1),t("div",gl,[n.genre?(c(),u("span",fl,[e[55]||(e[55]=t("i",{class:"bi bi-tag"},null,-1)),z(" "+v(n.genre),1)])):g("",!0),n.language?(c(),u("span",ml,[e[56]||(e[56]=t("i",{class:"bi bi-globe"},null,-1)),z(" "+v(n.language),1)])):g("",!0)])]),t("div",hl,[t("button",{class:"btn btn-primary btn-sm btn-play-song",type:"button",onClick:I=>_e(n),"aria-label":"Play"},[...e[57]||(e[57]=[t("i",{class:"bi bi-play-fill"},null,-1),t("span",{class:"btn-label"},"Play",-1)])],8,yl),t("button",{class:"btn btn-ghost btn-sm btn-queue-song",type:"button",onClick:I=>Ft(n),"aria-label":"Tambah ke antrian"},[...e[58]||(e[58]=[t("i",{class:"bi bi-plus-lg"},null,-1)])],8,kl)])]))),128)),q.value.length===0&&!Q.value?(c(),u("div",wl,[...e[59]||(e[59]=[t("i",{class:"bi bi-music-note-beamed"},null,-1),t("p",null,"Tidak ada lagu ditemukan",-1)])])):g("",!0),Q.value?(c(),u("div",_l,[...e[60]||(e[60]=[t("div",{class:"spinner-border text-primary"},null,-1)])])):g("",!0),H.value?(c(),u("div",Sl,[...e[61]||(e[61]=[t("div",{class:"spinner-border text-primary"},null,-1)])])):g("",!0)],544)])])):g("",!0),h(ct,{name:"kp-score-modal",appear:""},{default:k(()=>[y.value?(c(),u("div",Pl,[t("canvas",{ref_key:"scoreFireworksCanvas",ref:Le,class:"score-fireworks","aria-hidden":"true"},null,512),t("div",{class:_(["score-content",{"is-high-score":C.value}])},[t("div",Cl,[e[62]||(e[62]=t("div",{class:"score-header-top"},[t("i",{class:"bi bi-stars","aria-hidden":"true"}),t("h2",null,"Selesai!")],-1)),t("div",{class:_(["score-mood",`score-mood--${ae.value.tone}`])},[t("div",{class:"score-mood-ring",role:"img","aria-label":ae.value.aria},[t("i",{class:_(ae.value.icon),"aria-hidden":"true"},null,2)],8,Ml),t("div",xl,[t("div",Tl,v(ae.value.title),1),t("div",Ll,v(ae.value.subtitle),1)])],2)]),t("div",Rl,[t("div",Ol,[t("div",El,v(M.value),1),e[63]||(e[63]=t("span",{class:"score-max"},"/100",-1))]),e[65]||(e[65]=t("p",{class:"score-label"},"Score Kamu",-1)),t("div",Al,[t("div",{class:"score-meter-bar",style:Se({width:`${bt.value}%`})},null,4)]),C.value?(c(),u("div",Vl,[...e[64]||(e[64]=[t("i",{class:"bi bi-trophy-fill","aria-hidden":"true"},null,-1),t("span",null,"High Score Baru!",-1)])])):g("",!0)]),t("div",{class:"score-footer"},[t("button",{class:"btn btn-ghost",onClick:It},"Tutup"),t("button",{class:"btn btn-primary",onClick:Ut},[...e[66]||(e[66]=[t("i",{class:"bi bi-arrow-repeat me-2","aria-hidden":"true"},null,-1),z(" Main Lagi ",-1)])])])],2)])):g("",!0)]),_:1})]),h(ct,{name:"kp-toast"},{default:k(()=>[Oe.value?(c(),u("div",$l,[e[67]||(e[67]=t("i",{class:"bi bi-check-circle-fill","aria-hidden":"true"},null,-1)),t("span",null,v(Ge.value),1)])):g("",!0)]),_:1}),h(Yt)])}}},Dl=Ht(Fl,[["__scopeId","data-v-9c4724ac"]]);export{Dl as default};
