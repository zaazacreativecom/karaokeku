import{_ as X,r as b,c as V,o as Y,a as d,b as $,d as l,e as n,w as o,f as i,g as Z,i as k,t as u,F as E,k as q,l as F,A as ll,m as C,B as U,C as G,T as H,q as sl,v as r}from"./index-Btw_uZyE.js";import{u as tl}from"./playlist-BkIy8OiS.js";import{M as al}from"./MobileNav-CceEoPrP.js";const il={class:"page-layout"},el={class:"dashboard-sidebar"},nl={class:"sidebar-header"},ol={class:"sidebar-nav"},dl={class:"page-main"},rl={class:"page-content"},ul={class:"mobile-topbar"},bl={class:"hero reveal",style:{"--d":"0ms"}},vl={class:"hero__content"},cl={class:"hero__stats"},pl={class:"stat-pill"},ml={class:"stat-pill stat-pill--soft"},yl={key:0,class:"stat-pill stat-pill--soft","aria-live":"polite"},kl={class:"hero__art"},gl={class:"hero-card hero-card--soft"},fl={key:0,class:"alert-card reveal",style:{"--d":"90ms"},role:"status"},_l={class:"alert-body"},Cl={class:"alert-text text-muted"},Pl={key:1,class:"playlists-grid playlists-grid--skeleton","aria-hidden":"true"},xl={key:2,class:"empty-state empty-state--error reveal",style:{"--d":"120ms"}},wl={class:"text-muted"},hl={class:"empty-actions"},Bl={key:3,class:"empty-state reveal",style:{"--d":"120ms"}},Sl={key:4,class:"playlists-grid"},Ml=["onClick","onKeydown"],Kl={class:"playlist-cover","aria-hidden":"true"},Dl={class:"playlist-cover__inner"},Tl={class:"playlist-cover__letter"},Ll={class:"playlist-info"},Nl=["title"],Vl=["title"],$l={class:"playlist-meta"},El={class:"meta-pill"},ql=["onClick"],Fl=["onClick"],Ul=["onClick"],Gl={class:"modal-content"},Hl={class:"modal-header"},Rl={class:"modal-title"},jl={class:"modal-title__copy"},Al={class:"text-white"},zl={class:"modal-body"},Il={key:0,class:"form-alert",role:"status"},Jl={class:"mb-3"},Ol={class:"mb-3"},Ql={class:"modal-footer"},Wl=["disabled"],Xl={key:0,class:"spinner-border spinner-border-sm me-2","aria-hidden":"true"},Yl={class:"modal-content modal-sm"},Zl={class:"modal-body modal-body--center"},ls={class:"text-muted"},ss={key:0,class:"form-alert form-alert--center",role:"status"},ts={__name:"PlaylistPage",setup(as){const N=sl(),g=tl(),v=b([]),f=b(!0),p=b(""),B=b(!1),D=b(!1),m=b(null),_=b(null),P=b(!1),c=b({name:"",description:""}),y=b(""),x=b(""),R=V(()=>v.value.length),j=V(()=>v.value.reduce((t,s)=>t+(Number(s.songCount)||0),0)),A=()=>{const t=g.error;return t&&typeof t=="object"&&"value"in t?t.value:t},w=async()=>{f.value=!0,p.value="",await g.fetchPlaylists(),v.value=g.playlists||[],p.value=A()||"",f.value=!1},z=t=>{const s=String((t==null?void 0:t.name)||"").trim();return s?s.charAt(0).toUpperCase():"P"},T=()=>{N.push("/songs")},S=t=>{N.push("/karaoke")},M=()=>{y.value="",m.value=null,c.value={name:"",description:""},B.value=!0},I=t=>{y.value="",m.value=t,c.value={name:t.name,description:t.description||""},B.value=!0},K=()=>{B.value=!1,m.value=null,c.value={name:"",description:""},y.value=""},J=async()=>{P.value=!0,y.value="";const t=m.value?await g.updatePlaylist(m.value.id,c.value):await g.createPlaylist(c.value);if(P.value=!1,!(t!=null&&t.success)){y.value=(t==null?void 0:t.error)||"Gagal menyimpan playlist";return}await w(),K()},O=t=>{x.value="",_.value=t,D.value=!0},L=()=>{D.value=!1,_.value=null,x.value=""},Q=async()=>{if(!_.value)return;const t=await g.deletePlaylist(_.value.id);if(!(t!=null&&t.success)){x.value=(t==null?void 0:t.error)||"Gagal hapus playlist";return}v.value=v.value.filter(s=>{var e;return s.id!==((e=_.value)==null?void 0:e.id)}),await w(),L()};return Y(w),(t,s)=>{const e=Z("router-link");return r(),d("div",il,[s[62]||(s[62]=$('<div class="page-bg" aria-hidden="true" data-v-1b72c2c5><div class="bg-mesh" data-v-1b72c2c5></div><div class="bg-particles" data-v-1b72c2c5></div><div class="bg-orb orb-1" data-v-1b72c2c5></div><div class="bg-orb orb-2" data-v-1b72c2c5></div><div class="bg-orb orb-3" data-v-1b72c2c5></div></div>',1)),l("aside",el,[l("div",nl,[n(e,{to:"/dashboard",class:"brand"},{default:o(()=>[...s[3]||(s[3]=[l("i",{class:"bi bi-music-note-beamed"},null,-1),l("span",null,[i("Karaoke"),l("span",{class:"text-gradient"},"Ku")],-1)])]),_:1})]),l("nav",ol,[n(e,{to:"/dashboard",class:"nav-item"},{default:o(()=>[...s[4]||(s[4]=[l("i",{class:"bi bi-grid-1x2-fill"},null,-1),l("span",null,"Dashboard",-1)])]),_:1}),n(e,{to:"/karaoke",class:"nav-item"},{default:o(()=>[...s[5]||(s[5]=[l("i",{class:"bi bi-mic-fill"},null,-1),l("span",null,"Karaoke",-1)])]),_:1}),n(e,{to:"/songs",class:"nav-item"},{default:o(()=>[...s[6]||(s[6]=[l("i",{class:"bi bi-music-note-list"},null,-1),l("span",null,"Pilih Lagu",-1)])]),_:1}),n(e,{to:"/favorites",class:"nav-item"},{default:o(()=>[...s[7]||(s[7]=[l("i",{class:"bi bi-heart-fill"},null,-1),l("span",null,"Lagu Favorit",-1)])]),_:1}),n(e,{to:"/playlists",class:"nav-item active"},{default:o(()=>[...s[8]||(s[8]=[l("i",{class:"bi bi-collection-play-fill"},null,-1),l("span",null,"Playlist Saya",-1)])]),_:1}),n(e,{to:"/upload",class:"nav-item"},{default:o(()=>[...s[9]||(s[9]=[l("i",{class:"bi bi-cloud-upload-fill"},null,-1),l("span",null,"Upload Lagu",-1)])]),_:1}),n(e,{to:"/history",class:"nav-item"},{default:o(()=>[...s[10]||(s[10]=[l("i",{class:"bi bi-clock-history"},null,-1),l("span",null,"Riwayat & Score",-1)])]),_:1}),n(e,{to:"/request",class:"nav-item"},{default:o(()=>[...s[11]||(s[11]=[l("i",{class:"bi bi-plus-circle-fill"},null,-1),l("span",null,"Request Lagu",-1)])]),_:1}),n(e,{to:"/donation",class:"nav-item"},{default:o(()=>[...s[12]||(s[12]=[l("i",{class:"bi bi-heart-fill"},null,-1),l("span",null,"Donasi",-1)])]),_:1}),s[14]||(s[14]=l("div",{class:"nav-divider"},null,-1)),n(e,{to:"/settings",class:"nav-item"},{default:o(()=>[...s[13]||(s[13]=[l("i",{class:"bi bi-gear-fill"},null,-1),l("span",null,"Pengaturan",-1)])]),_:1})])]),l("main",dl,[l("div",rl,[l("div",ul,[n(e,{to:"/dashboard",class:"brand brand--compact"},{default:o(()=>[...s[15]||(s[15]=[l("i",{class:"bi bi-music-note-beamed"},null,-1),l("span",null,[i("Karaoke"),l("span",{class:"text-gradient"},"Ku")],-1)])]),_:1}),l("div",{class:"mobile-topbar__actions"},[l("button",{class:"icon-btn",type:"button",onClick:M,"aria-label":"Buat playlist"},[...s[16]||(s[16]=[l("i",{class:"bi bi-plus-lg"},null,-1)])]),l("button",{class:"icon-btn",type:"button",onClick:T,"aria-label":"Tambah lagu"},[...s[17]||(s[17]=[l("i",{class:"bi bi-music-note-list"},null,-1)])])])]),l("section",bl,[l("div",vl,[s[23]||(s[23]=l("div",{class:"hero__badge"},[l("i",{class:"bi bi-collection-play-fill"}),l("span",null,"Playlist Saya")],-1)),s[24]||(s[24]=l("h1",null,[i(" Kelola playlist "),l("span",{class:"text-gradient"},"karaoke"),i(" kamu ")],-1)),s[25]||(s[25]=l("p",{class:"hero__sub text-white"}," Buat playlist untuk mengelompokkan lagu favorit. Play langsung atau rapikan koleksimu kapan saja. ",-1)),l("div",cl,[l("div",pl,[s[18]||(s[18]=l("i",{class:"bi bi-collection-play"},null,-1)),l("span",null,u(R.value)+" playlist",1)]),l("div",ml,[s[19]||(s[19]=l("i",{class:"bi bi-music-note"},null,-1)),l("span",null,u(j.value)+" lagu",1)]),f.value?(r(),d("div",yl,[...s[20]||(s[20]=[l("span",{class:"spinner-border spinner-border-sm","aria-hidden":"true"},null,-1),l("span",null,"Memuat...",-1)])])):k("",!0),l("button",{class:"btn btn-primary btn-sm",type:"button",onClick:M},[...s[21]||(s[21]=[l("i",{class:"bi bi-plus-lg me-1"},null,-1),i(" Buat Playlist ",-1)])]),l("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:T},[...s[22]||(s[22]=[l("i",{class:"bi bi-music-note-list me-1"},null,-1),i(" Tambah Lagu ",-1)])])])]),l("div",kl,[l("div",{class:"hero-card hero-card--primary"},[s[27]||(s[27]=l("div",{class:"hero-card__icon"},[l("i",{class:"bi bi-stars"})],-1)),s[28]||(s[28]=l("div",{class:"hero-card__title"},"Tips cepat",-1)),s[29]||(s[29]=l("div",{class:"hero-card__text"},"Buat playlist berdasarkan mood, genre, atau acara.",-1)),l("button",{class:"btn btn-primary btn-sm hero-card__btn",type:"button",onClick:M},[...s[26]||(s[26]=[l("i",{class:"bi bi-plus-lg"},null,-1),i(" Buat sekarang ",-1)])])]),l("div",gl,[s[31]||(s[31]=l("div",{class:"hero-card__icon"},[l("i",{class:"bi bi-play-circle-fill"})],-1)),s[32]||(s[32]=l("div",{class:"hero-card__title"},"Siap karaoke",-1)),s[33]||(s[33]=l("div",{class:"hero-card__text"},"Klik Play pada playlist untuk mulai karaoke lebih cepat.",-1)),n(e,{to:"/karaoke",class:"btn btn-ghost btn-sm hero-card__btn"},{default:o(()=>[...s[30]||(s[30]=[l("i",{class:"bi bi-mic-fill"},null,-1),i(" Karaoke ",-1)])]),_:1})])])]),p.value&&v.value.length>0?(r(),d("div",fl,[s[36]||(s[36]=l("div",{class:"alert-icon","aria-hidden":"true"},[l("i",{class:"bi bi-exclamation-triangle-fill"})],-1)),l("div",_l,[s[34]||(s[34]=l("div",{class:"alert-title"},"Gagal memuat playlist",-1)),l("div",Cl,u(p.value),1)]),l("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:w},[...s[35]||(s[35]=[l("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),i(" Coba lagi ",-1)])])])):k("",!0),f.value&&v.value.length===0?(r(),d("div",Pl,[(r(),d(E,null,q(10,a=>l("div",{key:a,class:"playlist-card playlist-card--skeleton"},[...s[37]||(s[37]=[$('<div class="playlist-cover" data-v-1b72c2c5><div class="skeleton-cover loading-skeleton" data-v-1b72c2c5></div></div><div class="playlist-info" data-v-1b72c2c5><div class="skeleton-line loading-skeleton" data-v-1b72c2c5></div><div class="skeleton-line skeleton-line--sm loading-skeleton" data-v-1b72c2c5></div><div class="skeleton-row" data-v-1b72c2c5><div class="skeleton-pill loading-skeleton" data-v-1b72c2c5></div><div class="skeleton-pill loading-skeleton" data-v-1b72c2c5></div></div></div><div class="playlist-actions" data-v-1b72c2c5><div class="skeleton-btn loading-skeleton" data-v-1b72c2c5></div><div class="skeleton-btn skeleton-btn--icon loading-skeleton" data-v-1b72c2c5></div><div class="skeleton-btn skeleton-btn--icon loading-skeleton" data-v-1b72c2c5></div></div>',3)])])),64))])):!f.value&&p.value&&v.value.length===0?(r(),d("div",xl,[s[40]||(s[40]=l("div",{class:"empty-icon","aria-hidden":"true"},[l("i",{class:"bi bi-cloud-slash"})],-1)),s[41]||(s[41]=l("h2",null,"Playlist tidak bisa dimuat",-1)),l("p",wl,u(p.value),1),l("div",hl,[l("button",{class:"btn btn-primary",type:"button",onClick:w},[...s[38]||(s[38]=[l("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),i(" Coba lagi ",-1)])]),n(e,{to:"/dashboard",class:"btn btn-ghost"},{default:o(()=>[...s[39]||(s[39]=[l("i",{class:"bi bi-grid-1x2-fill me-1"},null,-1),i(" Dashboard ",-1)])]),_:1})])])):!f.value&&!p.value&&v.value.length===0?(r(),d("div",Bl,[s[44]||(s[44]=l("div",{class:"empty-icon"},[l("i",{class:"bi bi-collection-play"})],-1)),s[45]||(s[45]=l("h2",null,"Belum ada playlist",-1)),s[46]||(s[46]=l("p",{class:"text-white"},"Buat playlist untuk mengelompokkan lagu dan mulai karaoke lebih cepat.",-1)),l("div",{class:"empty-actions"},[l("button",{class:"btn btn-primary",type:"button",onClick:M},[...s[42]||(s[42]=[l("i",{class:"bi bi-plus-lg me-1"},null,-1),i(" Buat Playlist Pertama ",-1)])]),l("button",{class:"btn btn-ghost",type:"button",onClick:T},[...s[43]||(s[43]=[l("i",{class:"bi bi-music-note-list me-1"},null,-1),i(" Cari Lagu ",-1)])])])])):(r(),d("div",Sl,[(r(!0),d(E,null,q(v.value,(a,W)=>(r(),d("article",{key:a.id,class:"playlist-card reveal",style:ll({"--d":`${Math.min(W*35,280)}ms`}),role:"button",tabindex:"0",onClick:h=>S(),onKeydown:[F(C(h=>S(),["prevent"]),["enter"]),F(C(h=>S(),["prevent"]),["space"])]},[l("div",Kl,[l("div",Dl,[s[47]||(s[47]=l("div",{class:"playlist-cover__icon"},[l("i",{class:"bi bi-collection-play-fill"})],-1)),l("div",Tl,u(z(a)),1)])]),l("div",Ll,[l("h3",{title:a.name},u(a.name),9,Nl),l("p",{class:"playlist-desc",title:a.description||""},u(a.description||"Tanpa deskripsi"),9,Vl),l("div",$l,[l("span",El,[s[48]||(s[48]=l("i",{class:"bi bi-music-note-list"},null,-1)),i(" "+u(a.songCount||0)+" lagu ",1)])])]),l("div",{class:"playlist-actions",onClick:s[0]||(s[0]=C(()=>{},["stop"]))},[l("button",{class:"btn btn-primary btn-sm",type:"button",onClick:h=>S()},[...s[49]||(s[49]=[l("i",{class:"bi bi-play-fill"},null,-1),i(" Play ",-1)])],8,ql),l("button",{class:"btn btn-ghost btn-sm btn-icon",type:"button",onClick:h=>I(a),"aria-label":"Edit playlist"},[...s[50]||(s[50]=[l("i",{class:"bi bi-pencil"},null,-1)])],8,Fl),l("button",{class:"btn btn-ghost btn-sm btn-icon btn-danger-soft",type:"button",onClick:h=>O(a),"aria-label":"Hapus playlist"},[...s[51]||(s[51]=[l("i",{class:"bi bi-trash"},null,-1)])],8,Ul)])],44,Ml))),128))]))])]),n(H,{name:"pp-modal"},{default:o(()=>[B.value?(r(),d("div",{key:0,class:"modal-overlay",onClick:C(K,["self"]),role:"dialog","aria-modal":"true","aria-label":"Buat atau edit playlist"},[l("div",Gl,[l("div",Hl,[l("div",Rl,[s[52]||(s[52]=l("div",{class:"modal-icon","aria-hidden":"true"},[l("i",{class:"bi bi-collection-play-fill"})],-1)),l("div",jl,[l("h3",null,u(m.value?"Edit Playlist":"Buat Playlist Baru"),1),l("p",Al,u(m.value?"Perbarui nama dan deskripsi playlist.":"Buat playlist untuk menyimpan lagu favoritmu."),1)])]),l("button",{class:"btn-close-modal",type:"button",onClick:K,"aria-label":"Tutup"},[...s[53]||(s[53]=[l("i",{class:"bi bi-x-lg"},null,-1)])])]),l("form",{onSubmit:C(J,["prevent"])},[l("div",zl,[y.value?(r(),d("div",Il,[s[54]||(s[54]=l("i",{class:"bi bi-exclamation-triangle-fill","aria-hidden":"true"},null,-1)),l("span",null,u(y.value),1)])):k("",!0),l("div",Jl,[s[55]||(s[55]=l("label",{class:"form-label"},"Nama Playlist",-1)),U(l("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=a=>c.value.name=a),required:"",placeholder:"Contoh: Lagu Favorit"},null,512),[[G,c.value.name]])]),l("div",Ol,[s[56]||(s[56]=l("label",{class:"form-label"},"Deskripsi (opsional)",-1)),U(l("textarea",{class:"form-control","onUpdate:modelValue":s[2]||(s[2]=a=>c.value.description=a),rows:"3",placeholder:"Deskripsi playlist..."},null,512),[[G,c.value.description]])])]),l("div",Ql,[l("button",{type:"button",class:"btn btn-ghost",onClick:K},"Batal"),l("button",{type:"submit",class:"btn btn-primary",disabled:P.value},[P.value?(r(),d("span",Xl)):k("",!0),i(" "+u(P.value?"Menyimpan...":"Simpan"),1)],8,Wl)])],32)])])):k("",!0)]),_:1}),n(H,{name:"pp-modal"},{default:o(()=>{var a;return[D.value?(r(),d("div",{key:0,class:"modal-overlay",onClick:C(L,["self"]),role:"dialog","aria-modal":"true","aria-label":"Konfirmasi hapus playlist"},[l("div",Yl,[l("div",Zl,[s[60]||(s[60]=l("div",{class:"danger-icon","aria-hidden":"true"},[l("i",{class:"bi bi-exclamation-triangle-fill"})],-1)),s[61]||(s[61]=l("h3",null,"Hapus Playlist?",-1)),l("p",ls,[s[57]||(s[57]=i(' Playlist "',-1)),l("strong",null,u((a=_.value)==null?void 0:a.name),1),s[58]||(s[58]=i('" akan dihapus permanen. ',-1))]),x.value?(r(),d("div",ss,[s[59]||(s[59]=l("i",{class:"bi bi-x-octagon-fill","aria-hidden":"true"},null,-1)),l("span",null,u(x.value),1)])):k("",!0)]),l("div",{class:"modal-footer"},[l("button",{class:"btn btn-ghost",type:"button",onClick:L},"Batal"),l("button",{class:"btn btn-danger",type:"button",onClick:Q},"Hapus")])])])):k("",!0)]}),_:1}),n(al)])}}},os=X(ts,[["__scopeId","data-v-1b72c2c5"]]);export{os as default};
