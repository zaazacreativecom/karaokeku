import{_ as z,I as T,r as b,l as M,o as $,c as d,a as t,g as f,b as i,w as o,d as r,e as E,D as R,v as S,x as m,y as k,z as D,t as p,F as P,i as V,n as A,H as _,k as u}from"./index-DY9xsVSO.js";import{M as J}from"./MobileNav-B55vU6H0.js";const W={class:"request-layout"},j={class:"dashboard-sidebar"},F={class:"sidebar-header"},G={class:"sidebar-nav"},H={class:"request-main"},Y={class:"request-container"},O={class:"request-form-card"},Q={class:"row"},X={class:"col-md-6 mb-3"},Z={class:"col-md-6 mb-3"},aa={class:"row"},ta={class:"col-md-6 mb-3"},sa={class:"col-md-6 mb-3"},ea={class:"mb-3"},la={class:"mb-3"},ia={class:"form-actions"},na=["disabled"],oa={class:"modal-content modal-lg"},ra={class:"modal-body"},da={class:"success-message"},ua={class:"donation-methods"},pa={key:0,class:"text-center w-100 py-3"},ma={key:0,class:"qr-section"},va=["src","alt"],ba={key:1,class:"wallet-section"},ca={class:"wallet-quick"},ga={key:2,class:"bank-section"},fa={class:"bank-quick"},ka={class:"modal-footer"},ya={__name:"RequestPage",setup(ha){const v="/api",s=T({title:"",artist:"",genre:"",language:"",link:"",notes:""}),y=b(!1),h=b({}),q=b(!1),c=b([]),w=b(!0),K=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),U=async()=>{try{const e=await _.get(`${v}/payment-methods`);c.value=e.data.data||[]}catch(e){console.error("Error fetching payment methods:",e)}finally{w.value=!1}},B=e=>{if(!e)return"";if(e.includes("localhost")&&(e=e.replace(/^http(s)?:\/\/localhost(:\d+)?/,"")),e.startsWith("http"))return e;const a=v.endsWith("/api")?v.replace("/api",""):v;return a.includes("localhost")?e.startsWith("/")?e:`/${e}`:`${a}${e.startsWith("/")?"":"/"}${e}`},I=e=>{const a=e.toLowerCase().replace(/\s/g,"");return a.includes("bca")?"bca":a.includes("bni")?"bni":a.includes("mandiri")?"mandiri":a.includes("bri")?"bri":a.includes("cimb")?"cimb":a.includes("gopay")?"gopay":a.includes("ovo")?"ovo":a.includes("dana")?"dana":a.includes("shopee")?"shopee":a},g=M(()=>c.value.find(e=>e.type==="qris")),L=M(()=>c.value.filter(e=>e.type==="ewallet")),C=M(()=>c.value.filter(e=>e.type==="bank")),N=async()=>{if(!q.value){q.value=!0;try{await _.post(`${v}/requests`,{title:s.title,artist:s.artist,genre:s.genre,language:s.language,link:s.link,notes:s.notes},K()),h.value={title:s.title,artist:s.artist},y.value=!0,s.title="",s.artist="",s.genre="",s.language="",s.link="",s.notes=""}catch(e){console.error("Error submitting request:",e),alert("Gagal mengirim request. Silakan coba lagi.")}finally{q.value=!1}}},x=()=>{y.value=!1};return $(()=>{U()}),(e,a)=>{const n=E("router-link");return u(),d("div",W,[t("aside",j,[t("div",F,[i(n,{to:"/dashboard",class:"brand"},{default:o(()=>[...a[6]||(a[6]=[t("i",{class:"bi bi-music-note-beamed"},null,-1),t("span",null,[r("Karaoke"),t("span",{class:"text-gradient"},"Ku")],-1)])]),_:1})]),t("nav",G,[i(n,{to:"/dashboard",class:"nav-item"},{default:o(()=>[...a[7]||(a[7]=[t("i",{class:"bi bi-grid-1x2-fill"},null,-1),t("span",null,"Dashboard",-1)])]),_:1}),i(n,{to:"/karaoke",class:"nav-item"},{default:o(()=>[...a[8]||(a[8]=[t("i",{class:"bi bi-mic-fill"},null,-1),t("span",null,"Karaoke",-1)])]),_:1}),i(n,{to:"/songs",class:"nav-item"},{default:o(()=>[...a[9]||(a[9]=[t("i",{class:"bi bi-music-note-list"},null,-1),t("span",null,"Pilih Lagu",-1)])]),_:1}),i(n,{to:"/favorites",class:"nav-item"},{default:o(()=>[...a[10]||(a[10]=[t("i",{class:"bi bi-heart-fill"},null,-1),t("span",null,"Lagu Favorit",-1)])]),_:1}),i(n,{to:"/playlists",class:"nav-item"},{default:o(()=>[...a[11]||(a[11]=[t("i",{class:"bi bi-collection-play-fill"},null,-1),t("span",null,"Playlist Saya",-1)])]),_:1}),i(n,{to:"/upload",class:"nav-item"},{default:o(()=>[...a[12]||(a[12]=[t("i",{class:"bi bi-cloud-upload-fill"},null,-1),t("span",null,"Upload Lagu",-1)])]),_:1}),i(n,{to:"/history",class:"nav-item"},{default:o(()=>[...a[13]||(a[13]=[t("i",{class:"bi bi-clock-history"},null,-1),t("span",null,"Riwayat & Score",-1)])]),_:1}),i(n,{to:"/request",class:"nav-item active"},{default:o(()=>[...a[14]||(a[14]=[t("i",{class:"bi bi-plus-circle-fill"},null,-1),t("span",null,"Request Lagu",-1)])]),_:1}),i(n,{to:"/donation",class:"nav-item"},{default:o(()=>[...a[15]||(a[15]=[t("i",{class:"bi bi-heart-fill"},null,-1),t("span",null,"Donasi",-1)])]),_:1}),a[17]||(a[17]=t("div",{class:"nav-divider"},null,-1)),i(n,{to:"/settings",class:"nav-item"},{default:o(()=>[...a[16]||(a[16]=[t("i",{class:"bi bi-gear-fill"},null,-1),t("span",null,"Pengaturan",-1)])]),_:1})])]),t("main",H,[t("div",Y,[a[28]||(a[28]=t("div",{class:"page-header"},[t("h1",null,[t("i",{class:"bi bi-plus-circle-fill"}),r(" Request Lagu")]),t("p",{class:"lead"},"Mau lagu favorit kamu ditambahkan? Request sekarang!")],-1)),t("div",O,[t("form",{onSubmit:S(N,["prevent"])},[t("div",Q,[t("div",X,[a[18]||(a[18]=t("label",{class:"form-label"},[r("Judul Lagu "),t("span",{class:"text-danger"},"*")],-1)),m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=l=>s.title=l),placeholder:"Contoh: Laskar Pelangi",required:""},null,512),[[k,s.title]])]),t("div",Z,[a[19]||(a[19]=t("label",{class:"form-label"},[r("Artis / Penyanyi "),t("span",{class:"text-danger"},"*")],-1)),m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=l=>s.artist=l),placeholder:"Contoh: Nidji",required:""},null,512),[[k,s.artist]])])]),t("div",aa,[t("div",ta,[a[21]||(a[21]=t("label",{class:"form-label"},"Genre",-1)),m(t("select",{class:"form-select","onUpdate:modelValue":a[2]||(a[2]=l=>s.genre=l)},[...a[20]||(a[20]=[R('<option value="" data-v-44e50387>Pilih Genre</option><option value="Pop" data-v-44e50387>Pop</option><option value="Rock" data-v-44e50387>Rock</option><option value="Dangdut" data-v-44e50387>Dangdut</option><option value="Jazz" data-v-44e50387>Jazz</option><option value="R&amp;B" data-v-44e50387>R&amp;B</option><option value="K-Pop" data-v-44e50387>K-Pop</option><option value="Indie" data-v-44e50387>Indie</option><option value="Lainnya" data-v-44e50387>Lainnya</option>',9)])],512),[[D,s.genre]])]),t("div",sa,[a[23]||(a[23]=t("label",{class:"form-label"},"Bahasa",-1)),m(t("select",{class:"form-select","onUpdate:modelValue":a[3]||(a[3]=l=>s.language=l)},[...a[22]||(a[22]=[R('<option value="" data-v-44e50387>Pilih Bahasa</option><option value="Indonesia" data-v-44e50387>Indonesia</option><option value="English" data-v-44e50387>English</option><option value="Korea" data-v-44e50387>Korea</option><option value="Jepang" data-v-44e50387>Jepang</option><option value="Mandarin" data-v-44e50387>Mandarin</option><option value="Lainnya" data-v-44e50387>Lainnya</option>',7)])],512),[[D,s.language]])])]),t("div",ea,[a[24]||(a[24]=t("label",{class:"form-label"},"Link YouTube / Spotify (opsional)",-1)),m(t("input",{type:"url",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=l=>s.link=l),placeholder:"https://youtube.com/watch?v=..."},null,512),[[k,s.link]]),a[25]||(a[25]=t("small",{class:"text-muted"},"Tambahkan link untuk mempermudah kami menemukan lagu",-1))]),t("div",la,[a[26]||(a[26]=t("label",{class:"form-label"},"Catatan Tambahan",-1)),m(t("textarea",{class:"form-control","onUpdate:modelValue":a[5]||(a[5]=l=>s.notes=l),rows:"3",placeholder:"Ceritakan kenapa kamu ingin lagu ini ditambahkan..."},null,512),[[k,s.notes]])]),t("div",ia,[t("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:!s.title||!s.artist},[...a[27]||(a[27]=[t("i",{class:"bi bi-send-fill me-2"},null,-1),r(" Kirim Request ",-1)])],8,na)])],32)]),a[29]||(a[29]=R('<div class="info-section" data-v-44e50387><div class="info-card" data-v-44e50387><i class="bi bi-clock" data-v-44e50387></i><h4 data-v-44e50387>Proses Request</h4><p data-v-44e50387>Request akan ditinjau dalam 1-3 hari kerja</p></div><div class="info-card" data-v-44e50387><i class="bi bi-check-circle" data-v-44e50387></i><h4 data-v-44e50387>Prioritas</h4><p data-v-44e50387>Request dengan donasi akan diprioritaskan</p></div><div class="info-card" data-v-44e50387><i class="bi bi-bell" data-v-44e50387></i><h4 data-v-44e50387>Notifikasi</h4><p data-v-44e50387>Kami akan memberitahu saat lagu sudah tersedia</p></div></div>',1))])]),y.value?(u(),d("div",{key:0,class:"modal-overlay",onClick:S(x,["self"])},[t("div",oa,[t("div",{class:"modal-header"},[a[31]||(a[31]=t("h3",null,[t("i",{class:"bi bi-check-circle-fill text-success me-2"}),r("Request Terkirim!")],-1)),t("button",{onClick:x},[...a[30]||(a[30]=[t("i",{class:"bi bi-x-lg"},null,-1)])])]),t("div",ra,[t("div",da,[t("p",null,[a[32]||(a[32]=r("Request lagu ",-1)),t("strong",null,'"'+p(h.value.title)+'"',1),a[33]||(a[33]=r(" oleh ",-1)),t("strong",null,p(h.value.artist),1),a[34]||(a[34]=r(" berhasil dikirim!",-1))])]),a[38]||(a[38]=t("div",{class:"donation-prompt"},[t("i",{class:"bi bi-heart-fill"}),t("h4",null,"Dukung Kami!"),t("p",null,[r("Dengan berdonasi, request Anda akan "),t("strong",null,"diprioritaskan"),r(" dan membantu kami terus menambahkan lagu-lagu baru.")])],-1)),t("div",ua,[w.value?(u(),d("div",pa,[...a[35]||(a[35]=[t("div",{class:"spinner-border spinner-border-sm text-primary"},null,-1)])])):(u(),d(P,{key:1},[g.value?(u(),d("div",ma,[t("img",{src:B(g.value.qr_code_url),alt:g.value.name,class:"qr-small"},null,8,va),t("span",null,p(g.value.name),1)])):f("",!0),L.value.length?(u(),d("div",ba,[a[36]||(a[36]=t("h5",null,"E-Wallet",-1)),t("div",ca,[(u(!0),d(P,null,V(L.value.slice(0,3),l=>(u(),d("span",{key:l.id,class:A(["wallet-badge",I(l.name)])},p(l.name)+": "+p(l.account_number),3))),128))])])):f("",!0),C.value.length?(u(),d("div",ga,[a[37]||(a[37]=t("h5",null,"Transfer Bank",-1)),t("div",fa,[(u(!0),d(P,null,V(C.value.slice(0,3),l=>(u(),d("span",{key:l.id,class:"bank-badge"},p(l.name)+": "+p(l.account_number),1))),128))])])):f("",!0)],64))])]),t("div",ka,[t("button",{class:"btn btn-ghost",onClick:x},"Nanti Saja"),i(n,{to:"/donation",class:"btn btn-primary"},{default:o(()=>[...a[39]||(a[39]=[t("i",{class:"bi bi-heart-fill me-2"},null,-1),r(" Lihat Semua Metode ",-1)])]),_:1})])])])):f("",!0),i(J)])}}},Ma=z(ya,[["__scopeId","data-v-44e50387"]]);export{Ma as default};
