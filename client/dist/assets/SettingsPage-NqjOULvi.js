import{_ as h,u as B,r,o as C,c as P,a as s,b as e,w as o,d as y,e as K,v as x,g as S,x as v,y as b,n as N,t as g,j as A,k,G as D}from"./index-DY9xsVSO.js";import{M as R}from"./MobileNav-B55vU6H0.js";const E={class:"page-layout"},F={class:"dashboard-sidebar"},G={class:"sidebar-header"},I={class:"sidebar-nav"},T={class:"page-main"},j={class:"page-content"},z={class:"settings-card card"},H={class:"card-body"},J={class:"row"},O={class:"col-md-6"},Q={class:"mb-3"},W={class:"col-md-6"},X={class:"mb-3"},Y={class:"mb-3"},Z=["disabled"],$={class:"settings-card card mt-4"},ss={class:"card-body"},as={class:"mb-3"},ls={class:"row"},es={class:"col-md-6"},ts={class:"mb-3"},os={class:"col-md-6"},ns={class:"mb-3"},is=["disabled"],rs={__name:"SettingsPage",setup(us){const U=A(),d=B(),i=r({name:"",username:"",email:""}),n=r({currentPassword:"",newPassword:"",confirmNewPassword:""}),p=r(!1),c=r(!1),f=r(""),_=r(!1),m=r(""),w=r(!1),V=()=>{d.user&&(i.value={name:d.user.name,username:d.user.username,email:d.user.email})},M=async()=>{p.value=!0,f.value="";const u=await d.updateProfile(i.value);_.value=u.success,f.value=u.success?"Profil berhasil diupdate!":u.error,p.value=!1},q=async()=>{var u,a;if(m.value="",n.value.newPassword!==n.value.confirmNewPassword){m.value="Password baru tidak cocok",w.value=!1;return}c.value=!0;try{await D.changePassword(n.value),w.value=!0,m.value="Password berhasil diubah!",n.value={currentPassword:"",newPassword:"",confirmNewPassword:""}}catch(l){w.value=!1,m.value=((a=(u=l.response)==null?void 0:u.data)==null?void 0:a.message)||"Gagal mengubah password"}finally{c.value=!1}},L=()=>{d.logout(),U.push("/")};return C(V),(u,a)=>{const l=K("router-link");return k(),P("div",E,[s("aside",F,[s("div",G,[e(l,{to:"/dashboard",class:"brand"},{default:o(()=>[...a[6]||(a[6]=[s("i",{class:"bi bi-music-note-beamed"},null,-1),s("span",null,[y("Karaoke"),s("span",{class:"text-gradient"},"Ku")],-1)])]),_:1})]),s("nav",I,[e(l,{to:"/dashboard",class:"nav-item"},{default:o(()=>[...a[7]||(a[7]=[s("i",{class:"bi bi-grid-1x2-fill"},null,-1),s("span",null,"Dashboard",-1)])]),_:1}),e(l,{to:"/karaoke",class:"nav-item"},{default:o(()=>[...a[8]||(a[8]=[s("i",{class:"bi bi-mic-fill"},null,-1),s("span",null,"Karaoke",-1)])]),_:1}),e(l,{to:"/songs",class:"nav-item"},{default:o(()=>[...a[9]||(a[9]=[s("i",{class:"bi bi-music-note-list"},null,-1),s("span",null,"Pilih Lagu",-1)])]),_:1}),e(l,{to:"/favorites",class:"nav-item"},{default:o(()=>[...a[10]||(a[10]=[s("i",{class:"bi bi-heart-fill"},null,-1),s("span",null,"Lagu Favorit",-1)])]),_:1}),e(l,{to:"/playlists",class:"nav-item"},{default:o(()=>[...a[11]||(a[11]=[s("i",{class:"bi bi-collection-play-fill"},null,-1),s("span",null,"Playlist Saya",-1)])]),_:1}),e(l,{to:"/upload",class:"nav-item"},{default:o(()=>[...a[12]||(a[12]=[s("i",{class:"bi bi-cloud-upload-fill"},null,-1),s("span",null,"Upload Lagu",-1)])]),_:1}),e(l,{to:"/history",class:"nav-item"},{default:o(()=>[...a[13]||(a[13]=[s("i",{class:"bi bi-clock-history"},null,-1),s("span",null,"Riwayat & Score",-1)])]),_:1}),e(l,{to:"/request",class:"nav-item"},{default:o(()=>[...a[14]||(a[14]=[s("i",{class:"bi bi-plus-circle-fill"},null,-1),s("span",null,"Request Lagu",-1)])]),_:1}),e(l,{to:"/donation",class:"nav-item"},{default:o(()=>[...a[15]||(a[15]=[s("i",{class:"bi bi-heart-fill"},null,-1),s("span",null,"Donasi",-1)])]),_:1}),a[17]||(a[17]=s("div",{class:"nav-divider"},null,-1)),e(l,{to:"/settings",class:"nav-item active"},{default:o(()=>[...a[16]||(a[16]=[s("i",{class:"bi bi-gear-fill"},null,-1),s("span",null,"Pengaturan",-1)])]),_:1})])]),s("main",T,[s("div",j,[a[27]||(a[27]=s("div",{class:"page-header"},[s("h1",null,[s("i",{class:"bi bi-gear-fill me-2"}),y("Pengaturan Akun")]),s("p",{class:"text-muted"},"Kelola profil dan keamanan akun Anda")],-1)),s("div",z,[a[21]||(a[21]=s("div",{class:"card-header"},[s("h3",null,"Profil")],-1)),s("div",H,[s("form",{onSubmit:x(M,["prevent"])},[s("div",J,[s("div",O,[s("div",Q,[a[18]||(a[18]=s("label",{class:"form-label"},"Nama Lengkap",-1)),v(s("input",{type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=t=>i.value.name=t),required:""},null,512),[[b,i.value.name]])])]),s("div",W,[s("div",X,[a[19]||(a[19]=s("label",{class:"form-label"},"Username",-1)),v(s("input",{type:"text",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=t=>i.value.username=t),required:""},null,512),[[b,i.value.username]])])])]),s("div",Y,[a[20]||(a[20]=s("label",{class:"form-label"},"Email",-1)),v(s("input",{type:"email",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=t=>i.value.email=t),required:""},null,512),[[b,i.value.email]])]),f.value?(k(),P("div",{key:0,class:N(["alert",_.value?"alert-success":"alert-danger"])},g(f.value),3)):S("",!0),s("button",{type:"submit",class:"btn btn-primary",disabled:p.value},g(p.value?"Menyimpan...":"Simpan Perubahan"),9,Z)],32)])]),s("div",$,[a[25]||(a[25]=s("div",{class:"card-header"},[s("h3",null,"Ubah Password")],-1)),s("div",ss,[s("form",{onSubmit:x(q,["prevent"])},[s("div",as,[a[22]||(a[22]=s("label",{class:"form-label"},"Password Lama",-1)),v(s("input",{type:"password",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=t=>n.value.currentPassword=t),required:""},null,512),[[b,n.value.currentPassword]])]),s("div",ls,[s("div",es,[s("div",ts,[a[23]||(a[23]=s("label",{class:"form-label"},"Password Baru",-1)),v(s("input",{type:"password",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=t=>n.value.newPassword=t),required:"",minlength:"6"},null,512),[[b,n.value.newPassword]])])]),s("div",os,[s("div",ns,[a[24]||(a[24]=s("label",{class:"form-label"},"Konfirmasi Password Baru",-1)),v(s("input",{type:"password",class:"form-control","onUpdate:modelValue":a[5]||(a[5]=t=>n.value.confirmNewPassword=t),required:""},null,512),[[b,n.value.confirmNewPassword]])])])]),m.value?(k(),P("div",{key:0,class:N(["alert",w.value?"alert-success":"alert-danger"])},g(m.value),3)):S("",!0),s("button",{type:"submit",class:"btn btn-primary",disabled:c.value},g(c.value?"Menyimpan...":"Ubah Password"),9,is)],32)])]),s("div",{class:"mt-4"},[s("button",{class:"btn btn-outline-danger",onClick:L},[...a[26]||(a[26]=[s("i",{class:"bi bi-box-arrow-right me-2"},null,-1),y("Logout ",-1)])])])])]),e(R)])}}},vs=h(rs,[["__scopeId","data-v-25148616"]]);export{vs as default};
