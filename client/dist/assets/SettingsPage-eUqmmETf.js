import{_ as W,u as X,r as o,c as N,o as Y,a as b,b as C,d as a,e as r,w as u,f as n,g as aa,i as f,t as c,n as w,m as G,B as h,C as R,J as q,A as sa,q as ea,v as m,K as la}from"./index-Btw_uZyE.js";import{M as ia}from"./MobileNav-CceEoPrP.js";const ta={class:"page-layout"},na={class:"dashboard-sidebar"},da={class:"sidebar-header"},oa={class:"sidebar-nav"},ra={class:"page-main"},ua={class:"page-content"},ca={class:"mobile-topbar"},va={class:"hero reveal",style:{"--d":"0ms"}},pa={class:"hero__content"},ba={class:"hero__stats","aria-label":"Ringkasan akun"},ma={class:"stat-pill"},fa={class:"stat-pill stat-pill--soft"},wa={key:0,class:"stat-pill stat-pill--soft","aria-live":"polite"},ga={class:"hero__art","aria-hidden":"true"},ka={class:"hero-card hero-card--account"},ha={class:"account-avatar"},ya={class:"account-name"},_a={class:"account-meta"},Pa={class:"account-chips"},xa={class:"pill pill--soft"},Sa={class:"content-grid"},Ca={class:"panel-header"},Ma={class:"panel-actions"},Ka={key:0,class:"pill pill--soft","aria-live":"polite"},Na=["disabled"],Ua={class:"panel-body"},Va={class:"form-grid"},La={class:"field"},Ra=["disabled"],qa={class:"field"},Aa=["disabled"],Ta={class:"field field--full"},Ba=["disabled"],Da={class:"form-actions"},$a=["disabled"],ja={class:"side-panel"},Ga={class:"panel-header"},za={class:"panel-actions"},Fa={key:0,class:"pill pill--soft","aria-live":"polite"},Ia=["disabled"],Ea={class:"panel-body"},Za={class:"field"},Ja={class:"field-control"},Ha=["type","disabled"],Oa=["aria-label"],Qa={class:"form-grid form-grid--2"},Wa={class:"field"},Xa={class:"field-control"},Ya=["type","disabled"],as=["aria-label"],ss={key:1,class:"field-hint text-muted"},es={class:"field"},ls={class:"field-control"},is=["type","disabled"],ts=["aria-label"],ns={key:0,class:"field-hint field-hint--danger",role:"status","aria-live":"polite"},ds={class:"form-actions form-actions--stack"},os=["disabled"],rs={__name:"SettingsPage",setup(us){const z=ea(),k=X(),i=o({name:"",username:"",email:""}),M=o({name:"",username:"",email:""}),d=o({currentPassword:"",newPassword:"",confirmNewPassword:""}),v=o(!1),p=o(!1),y=o(""),K=o(!1),g=o(""),_=o(!1),A=o(null),T=o(null),P=o(!1),x=o(!1),S=o(!1),F=()=>{var e,s;return typeof window>"u"?!0:((s=(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-reduced-motion: reduce)"))==null?void 0:s.matches)??!0},B=e=>{var s;(s=e==null?void 0:e.scrollIntoView)==null||s.call(e,{behavior:F()?"auto":"smooth",block:"start"})},I=()=>B(A.value),U=()=>B(T.value),D=()=>{k.user&&(i.value={name:k.user.name||"",username:k.user.username||"",email:k.user.email||""},M.value={...i.value})},E=()=>{i.value={...M.value},y.value=""},Z=()=>{d.value={currentPassword:"",newPassword:"",confirmNewPassword:""},g.value=""},V=N(()=>["name","username","email"].some(e=>i.value[e]!==M.value[e])),$=N(()=>{const{newPassword:e,confirmNewPassword:s}=d.value;return!e||!s?!1:e!==s}),L=N(()=>{const e=d.value.newPassword||"";let s=0;e.length>=6&&(s+=25),e.length>=10&&(s+=25),/[A-Z]/.test(e)&&(s+=15),/[0-9]/.test(e)&&(s+=15),/[^A-Za-z0-9]/.test(e)&&(s+=20),s=Math.min(s,100);let t="Lemah",l="weak";return s>=80?(t="Kuat",l="strong"):s>=50&&(t="Sedang",l="ok"),{score:s,label:t,tone:l}}),J=N(()=>{const e=String(i.value.name||i.value.username||"User").trim();return e?e.split(/\s+/).filter(Boolean).slice(0,2).map(l=>{var j;return(j=l[0])==null?void 0:j.toUpperCase()}).join("")||e.slice(0,1).toUpperCase():"U"}),H=async()=>{v.value=!0,y.value="",K.value=!1;const e=await k.updateProfile(i.value);K.value=e.success,y.value=e.success?"Profil berhasil diupdate!":e.error||"Gagal mengupdate profil",v.value=!1,e.success&&(M.value={...i.value})},O=async()=>{var e,s;if(g.value="",_.value=!1,d.value.newPassword!==d.value.confirmNewPassword){g.value="Password baru tidak cocok";return}p.value=!0;try{await la.changePassword(d.value),_.value=!0,g.value="Password berhasil diubah!",d.value={currentPassword:"",newPassword:"",confirmNewPassword:""}}catch(t){_.value=!1,g.value=((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||"Gagal mengubah password"}finally{p.value=!1}},Q=()=>{k.logout(),z.push("/")};return Y(D),(e,s)=>{const t=aa("router-link");return m(),b("div",ta,[s[56]||(s[56]=C('<div class="page-bg" aria-hidden="true" data-v-346c160d><div class="bg-mesh" data-v-346c160d></div><div class="bg-particles" data-v-346c160d></div><div class="bg-orb orb-1" data-v-346c160d></div><div class="bg-orb orb-2" data-v-346c160d></div><div class="bg-orb orb-3" data-v-346c160d></div></div>',1)),a("aside",na,[a("div",da,[r(t,{to:"/dashboard",class:"brand"},{default:u(()=>[...s[9]||(s[9]=[a("i",{class:"bi bi-music-note-beamed","aria-hidden":"true"},null,-1),a("span",null,[n("Karaoke"),a("span",{class:"text-gradient"},"Ku")],-1)])]),_:1})]),a("nav",oa,[r(t,{to:"/dashboard",class:"nav-item"},{default:u(()=>[...s[10]||(s[10]=[a("i",{class:"bi bi-grid-1x2-fill","aria-hidden":"true"},null,-1),a("span",null,"Dashboard",-1)])]),_:1}),r(t,{to:"/karaoke",class:"nav-item"},{default:u(()=>[...s[11]||(s[11]=[a("i",{class:"bi bi-mic-fill","aria-hidden":"true"},null,-1),a("span",null,"Karaoke",-1)])]),_:1}),r(t,{to:"/songs",class:"nav-item"},{default:u(()=>[...s[12]||(s[12]=[a("i",{class:"bi bi-music-note-list","aria-hidden":"true"},null,-1),a("span",null,"Pilih Lagu",-1)])]),_:1}),r(t,{to:"/favorites",class:"nav-item"},{default:u(()=>[...s[13]||(s[13]=[a("i",{class:"bi bi-heart-fill","aria-hidden":"true"},null,-1),a("span",null,"Lagu Favorit",-1)])]),_:1}),r(t,{to:"/playlists",class:"nav-item"},{default:u(()=>[...s[14]||(s[14]=[a("i",{class:"bi bi-collection-play-fill","aria-hidden":"true"},null,-1),a("span",null,"Playlist Saya",-1)])]),_:1}),r(t,{to:"/upload",class:"nav-item"},{default:u(()=>[...s[15]||(s[15]=[a("i",{class:"bi bi-cloud-upload-fill","aria-hidden":"true"},null,-1),a("span",null,"Upload Lagu",-1)])]),_:1}),r(t,{to:"/history",class:"nav-item"},{default:u(()=>[...s[16]||(s[16]=[a("i",{class:"bi bi-clock-history","aria-hidden":"true"},null,-1),a("span",null,"Riwayat & Score",-1)])]),_:1}),r(t,{to:"/request",class:"nav-item"},{default:u(()=>[...s[17]||(s[17]=[a("i",{class:"bi bi-plus-circle-fill","aria-hidden":"true"},null,-1),a("span",null,"Request Lagu",-1)])]),_:1}),r(t,{to:"/donation",class:"nav-item"},{default:u(()=>[...s[18]||(s[18]=[a("i",{class:"bi bi-heart-fill","aria-hidden":"true"},null,-1),a("span",null,"Donasi",-1)])]),_:1}),s[20]||(s[20]=a("div",{class:"nav-divider"},null,-1)),r(t,{to:"/settings",class:"nav-item active"},{default:u(()=>[...s[19]||(s[19]=[a("i",{class:"bi bi-gear-fill","aria-hidden":"true"},null,-1),a("span",null,"Pengaturan",-1)])]),_:1})])]),a("main",ra,[a("div",ua,[a("div",ca,[r(t,{to:"/dashboard",class:"brand brand--compact"},{default:u(()=>[...s[21]||(s[21]=[a("i",{class:"bi bi-music-note-beamed","aria-hidden":"true"},null,-1),a("span",null,[n("Karaoke"),a("span",{class:"text-gradient"},"Ku")],-1)])]),_:1}),a("div",{class:"mobile-topbar__actions"},[a("button",{class:"icon-btn",type:"button",onClick:D,"aria-label":"Refresh profil"},[...s[22]||(s[22]=[a("i",{class:"bi bi-arrow-clockwise","aria-hidden":"true"},null,-1)])]),a("button",{class:"icon-btn",type:"button",onClick:U,"aria-label":"Buka pengaturan keamanan"},[...s[23]||(s[23]=[a("i",{class:"bi bi-shield-lock-fill","aria-hidden":"true"},null,-1)])])])]),a("section",va,[a("div",pa,[s[29]||(s[29]=a("div",{class:"hero__badge"},[a("i",{class:"bi bi-gear-fill","aria-hidden":"true"}),a("span",null,"Pengaturan Akun")],-1)),s[30]||(s[30]=a("h1",null,[n(" Kelola akun dengan "),a("span",{class:"text-gradient"},"aman"),n(" dan nyaman ")],-1)),s[31]||(s[31]=a("p",{class:"hero__sub text-white"}," Perbarui profil, ganti password, dan atur keamanan akun Anda. ",-1)),a("div",ba,[a("div",ma,[s[24]||(s[24]=a("i",{class:"bi bi-person-fill","aria-hidden":"true"},null,-1)),a("span",null,c(i.value.username||"username"),1)]),a("div",fa,[s[25]||(s[25]=a("i",{class:"bi bi-envelope-fill","aria-hidden":"true"},null,-1)),a("span",null,c(i.value.email||"email"),1)]),V.value?(m(),b("div",wa,[...s[26]||(s[26]=[a("i",{class:"bi bi-pencil-square","aria-hidden":"true"},null,-1),a("span",null,"Ada perubahan belum disimpan",-1)])])):f("",!0),a("button",{class:"btn btn-primary btn-sm",type:"button",onClick:I},[...s[27]||(s[27]=[a("i",{class:"bi bi-person-lines-fill","aria-hidden":"true"},null,-1),n(" Profil ",-1)])]),a("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:U},[...s[28]||(s[28]=[a("i",{class:"bi bi-shield-lock-fill","aria-hidden":"true"},null,-1),n(" Keamanan ",-1)])])])]),a("div",ga,[a("div",ka,[a("div",ha,c(J.value),1),a("div",ya,c(i.value.name||"Pengguna KaraokeKu"),1),a("div",_a,c(i.value.email||"—"),1),a("div",Pa,[a("span",xa,[s[32]||(s[32]=a("i",{class:"bi bi-at","aria-hidden":"true"},null,-1)),n(" "+c(i.value.username||"—"),1)]),s[33]||(s[33]=a("span",{class:"pill"},[a("i",{class:"bi bi-shield-check","aria-hidden":"true"}),n(" Tips aman")],-1))])]),s[34]||(s[34]=C('<div class="hero-card hero-card--soft" data-v-346c160d><div class="hero-card__icon" aria-hidden="true" data-v-346c160d><i class="bi bi-lightning-charge-fill" data-v-346c160d></i></div><div class="hero-card__title" data-v-346c160d>Saran cepat</div><div class="hero-card__text" data-v-346c160d> Gunakan password kuat dan jangan bagikan informasi akun. </div><div class="hero-card__mini" data-v-346c160d><div class="mini-item" data-v-346c160d><i class="bi bi-check2-circle" aria-hidden="true" data-v-346c160d></i><span data-v-346c160d>Min. 6 karakter</span></div><div class="mini-item" data-v-346c160d><i class="bi bi-check2-circle" aria-hidden="true" data-v-346c160d></i><span data-v-346c160d>Kombinasi angka &amp; simbol</span></div></div></div>',1))])]),a("section",Sa,[a("div",{ref_key:"profileSectionRef",ref:A,class:"panel profile-panel reveal",style:{"--d":"90ms"}},[a("div",Ca,[s[37]||(s[37]=C('<div class="panel-title" data-v-346c160d><div class="panel-icon" aria-hidden="true" data-v-346c160d><i class="bi bi-person-lines-fill" data-v-346c160d></i></div><div class="panel-title__copy" data-v-346c160d><h2 data-v-346c160d>Profil</h2><p class="text-white" data-v-346c160d>Perbarui nama, username, dan email.</p></div></div>',1)),a("div",Ma,[v.value?(m(),b("span",Ka,[...s[35]||(s[35]=[a("span",{class:"spinner","aria-hidden":"true"},null,-1),n(" Menyimpan… ",-1)])])):f("",!0),a("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:E,disabled:v.value||!V.value},[...s[36]||(s[36]=[a("i",{class:"bi bi-arrow-counterclockwise","aria-hidden":"true"},null,-1),n(" Reset ",-1)])],8,Na)])]),a("div",Ua,[y.value?(m(),b("div",{key:0,class:w(["status-banner",K.value?"is-success":"is-danger"]),role:"status","aria-live":"polite"},[a("i",{class:w(K.value?"bi bi-check-circle-fill":"bi bi-exclamation-triangle-fill"),"aria-hidden":"true"},null,2),a("span",null,c(y.value),1)],2)):f("",!0),a("form",{class:"settings-form",onSubmit:G(H,["prevent"])},[a("div",Va,[a("div",La,[s[38]||(s[38]=a("label",{class:"field-label",for:"sp-name"},"Nama Lengkap",-1)),h(a("input",{id:"sp-name",class:"form-control",type:"text","onUpdate:modelValue":s[0]||(s[0]=l=>i.value.name=l),disabled:v.value,required:"",autocomplete:"name"},null,8,Ra),[[R,i.value.name]])]),a("div",qa,[s[39]||(s[39]=a("label",{class:"field-label",for:"sp-username"},"Username",-1)),h(a("input",{id:"sp-username",class:"form-control",type:"text","onUpdate:modelValue":s[1]||(s[1]=l=>i.value.username=l),disabled:v.value,required:"",autocomplete:"username"},null,8,Aa),[[R,i.value.username]]),s[40]||(s[40]=a("div",{class:"field-hint text-white"},"Digunakan untuk identitas di beberapa fitur.",-1))]),a("div",Ta,[s[41]||(s[41]=a("label",{class:"field-label",for:"sp-email"},"Email",-1)),h(a("input",{id:"sp-email",class:"form-control",type:"email","onUpdate:modelValue":s[2]||(s[2]=l=>i.value.email=l),disabled:v.value,required:"",autocomplete:"email"},null,8,Ba),[[R,i.value.email]])])]),a("div",Da,[a("button",{class:"btn btn-primary",type:"submit",disabled:v.value||!V.value},[s[42]||(s[42]=a("i",{class:"bi bi-save2-fill","aria-hidden":"true"},null,-1)),n(" "+c(v.value?"Menyimpan…":"Simpan Perubahan"),1)],8,$a),a("button",{class:"btn btn-ghost",type:"button",onClick:U},[...s[43]||(s[43]=[a("i",{class:"bi bi-shield-lock-fill","aria-hidden":"true"},null,-1),n(" Lanjut ke keamanan ",-1)])])])],32)])],512),a("aside",ja,[a("div",{ref_key:"securitySectionRef",ref:T,class:"panel security-panel reveal",style:{"--d":"120ms"}},[a("div",Ga,[s[46]||(s[46]=C('<div class="panel-title" data-v-346c160d><div class="panel-icon panel-icon--soft" aria-hidden="true" data-v-346c160d><i class="bi bi-shield-lock-fill" data-v-346c160d></i></div><div class="panel-title__copy" data-v-346c160d><h2 data-v-346c160d>Keamanan</h2><p class="text-muted" data-v-346c160d>Ganti password untuk menjaga akun tetap aman.</p></div></div>',1)),a("div",za,[p.value?(m(),b("span",Fa,[...s[44]||(s[44]=[a("span",{class:"spinner","aria-hidden":"true"},null,-1),n(" Memproses… ",-1)])])):f("",!0),a("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:Z,disabled:p.value},[...s[45]||(s[45]=[a("i",{class:"bi bi-eraser-fill","aria-hidden":"true"},null,-1),n(" Bersihkan ",-1)])],8,Ia)])]),a("div",Ea,[g.value?(m(),b("div",{key:0,class:w(["status-banner",_.value?"is-success":"is-danger"]),role:"status","aria-live":"polite"},[a("i",{class:w(_.value?"bi bi-check-circle-fill":"bi bi-exclamation-triangle-fill"),"aria-hidden":"true"},null,2),a("span",null,c(g.value),1)],2)):f("",!0),a("form",{class:"settings-form",onSubmit:G(O,["prevent"])},[a("div",Za,[s[47]||(s[47]=a("label",{class:"field-label",for:"sp-current"},"Password Lama",-1)),a("div",Ja,[h(a("input",{id:"sp-current",class:"form-control",type:P.value?"text":"password","onUpdate:modelValue":s[3]||(s[3]=l=>d.value.currentPassword=l),disabled:p.value,required:"",autocomplete:"current-password"},null,8,Ha),[[q,d.value.currentPassword]]),a("button",{class:"field-action",type:"button",onClick:s[4]||(s[4]=l=>P.value=!P.value),"aria-label":P.value?"Sembunyikan password lama":"Tampilkan password lama"},[a("i",{class:w(P.value?"bi bi-eye-slash":"bi bi-eye"),"aria-hidden":"true"},null,2)],8,Oa)])]),a("div",Qa,[a("div",Wa,[s[49]||(s[49]=a("label",{class:"field-label",for:"sp-new"},"Password Baru",-1)),a("div",Xa,[h(a("input",{id:"sp-new",class:"form-control",type:x.value?"text":"password","onUpdate:modelValue":s[5]||(s[5]=l=>d.value.newPassword=l),disabled:p.value,minlength:"6",required:"",autocomplete:"new-password"},null,8,Ya),[[q,d.value.newPassword]]),a("button",{class:"field-action",type:"button",onClick:s[6]||(s[6]=l=>x.value=!x.value),"aria-label":x.value?"Sembunyikan password baru":"Tampilkan password baru"},[a("i",{class:w(x.value?"bi bi-eye-slash":"bi bi-eye"),"aria-hidden":"true"},null,2)],8,as)]),d.value.newPassword?(m(),b("div",{key:0,class:w(["password-meter",`is-${L.value.tone}`]),"aria-hidden":"true"},[a("div",{class:"password-meter__bar",style:sa({width:`${L.value.score}%`})},null,4)],2)):f("",!0),d.value.newPassword?(m(),b("div",ss,[s[48]||(s[48]=n(" Kekuatan: ",-1)),a("strong",null,c(L.value.label),1)])):f("",!0)]),a("div",es,[s[50]||(s[50]=a("label",{class:"field-label",for:"sp-confirm"},"Konfirmasi Password Baru",-1)),a("div",ls,[h(a("input",{id:"sp-confirm",class:"form-control",type:S.value?"text":"password","onUpdate:modelValue":s[7]||(s[7]=l=>d.value.confirmNewPassword=l),disabled:p.value,required:"",autocomplete:"new-password"},null,8,is),[[q,d.value.confirmNewPassword]]),a("button",{class:"field-action",type:"button",onClick:s[8]||(s[8]=l=>S.value=!S.value),"aria-label":S.value?"Sembunyikan konfirmasi password":"Tampilkan konfirmasi password"},[a("i",{class:w(S.value?"bi bi-eye-slash":"bi bi-eye"),"aria-hidden":"true"},null,2)],8,ts)]),$.value?(m(),b("div",ns," Password baru tidak cocok. ")):f("",!0)])]),a("div",ds,[a("button",{class:"btn btn-primary",type:"submit",disabled:p.value||$.value},[s[51]||(s[51]=a("i",{class:"bi bi-shield-check","aria-hidden":"true"},null,-1)),n(" "+c(p.value?"Menyimpan…":"Ubah Password"),1)],8,os),s[52]||(s[52]=a("div",{class:"security-note text-muted"}," Demi keamanan, gunakan password unik yang tidak dipakai di akun lain. ",-1))])],32)])],512),a("div",{class:"panel danger-panel reveal",style:{"--d":"150ms"}},[s[55]||(s[55]=C('<div class="panel-header panel-header--compact" data-v-346c160d><div class="panel-title" data-v-346c160d><div class="panel-icon panel-icon--danger" aria-hidden="true" data-v-346c160d><i class="bi bi-box-arrow-right" data-v-346c160d></i></div><div class="panel-title__copy" data-v-346c160d><h2 data-v-346c160d>Aksi Akun</h2><p class="text-muted" data-v-346c160d>Keluar dari akun pada perangkat ini.</p></div></div></div>',1)),a("div",{class:"panel-body"},[a("div",{class:"danger-card"},[s[54]||(s[54]=a("div",{class:"danger-card__copy"},[a("div",{class:"danger-card__title"},"Logout"),a("div",{class:"danger-card__text text-muted"}," Pastikan kamu sudah menyimpan perubahan profil sebelum keluar. ")],-1)),a("button",{class:"btn btn-danger",type:"button",onClick:Q},[...s[53]||(s[53]=[a("i",{class:"bi bi-box-arrow-right","aria-hidden":"true"},null,-1),n(" Logout ",-1)])])])])])])])])]),r(ia)])}}},ps=W(rs,[["__scopeId","data-v-346c160d"]]);export{ps as default};
