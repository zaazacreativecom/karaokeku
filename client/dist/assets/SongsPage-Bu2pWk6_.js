import{_ as H,r as u,o as J,c as e,a as s,g as m,b as o,w as r,e as O,d as v,x as M,y as W,z as D,F as k,i as _,v as I,s as L,j as X,k as i,t as d,h as C,n as z}from"./index-DY9xsVSO.js";import{u as Y}from"./player-C2Xs0NwX.js";import{u as Z}from"./playlist-DeqAx3Ty.js";import{u as ss}from"./favorite-BU8y8E4R.js";import{M as ls}from"./MobileNav-B55vU6H0.js";import{a as A}from"./media-BmRio5iY.js";const ts={class:"page-layout"},as={class:"dashboard-sidebar"},es={class:"sidebar-header"},is={class:"sidebar-nav"},ns={class:"page-main"},os={class:"page-content"},us={class:"filters-bar"},rs={class:"search-box"},ds=["value"],vs=["value"],bs={class:"songs-grid"},cs={class:"song-thumbnail"},ps=["src","alt"],ms={key:1,class:"thumbnail-placeholder"},fs={class:"song-overlay"},ys=["onClick"],gs=["onClick"],ks={class:"song-info"},_s={class:"song-meta"},Cs={key:0},hs={class:"song-actions"},Ps=["onClick"],Ss=["onClick"],xs={key:0,class:"loading-state"},ws={key:1,class:"empty-state"},Ts={key:2,class:"load-more"},Fs={class:"modal-content"},Ms={class:"modal-header"},Ls={class:"modal-body"},$s={key:0},Bs=["onClick"],Vs={class:"song-count"},Ns={key:1,class:"empty-playlists"},Us={__name:"SongsPage",setup(Ds){const G=X();Y();const h=Z(),f=ss(),y=u([]),$=u([]),B=u([]),b=u(!1),P=u(""),S=u(""),x=u(""),w=u(1),V=u(!1),c=u(!1),T=u(null),F=u([]);let N=null;const p=async(n=!0)=>{var l;b.value=!0,n&&(w.value=1);try{const a=await L.getAll({search:P.value,genre:S.value,language:x.value,page:w.value,limit:20});n?y.value=a.data.data||[]:y.value.push(...a.data.data||[]),V.value=((l=a.data.meta)==null?void 0:l.hasNextPage)||!1}catch(a){console.error("Error fetching songs:",a)}finally{b.value=!1}},K=()=>{clearTimeout(N),N=setTimeout(()=>p(),300)},R=()=>{w.value++,p(!1)},j=async()=>{try{const[n,l]=await Promise.all([L.getGenres(),L.getLanguages()]);$.value=n.data.data||[],B.value=l.data.data||[]}catch(n){console.error(n)}},U=n=>{G.push(`/karaoke/${n.id}`)},q=async n=>{T.value=n,await h.fetchPlaylists(),F.value=h.playlists,c.value=!0},E=async n=>{if(!T.value)return;(await h.addSongToPlaylist(n,T.value.id)).success&&(c.value=!1)},Q=async n=>{n&&await f.toggleFavorite(n.id)};return J(()=>{p(),f.fetchFavoriteIds(),j()}),(n,l)=>{const a=O("router-link");return i(),e("div",ts,[s("aside",as,[s("div",es,[o(a,{to:"/dashboard",class:"brand"},{default:r(()=>[...l[5]||(l[5]=[s("i",{class:"bi bi-music-note-beamed"},null,-1),s("span",null,[v("Karaoke"),s("span",{class:"text-gradient"},"Ku")],-1)])]),_:1})]),s("nav",is,[o(a,{to:"/dashboard",class:"nav-item"},{default:r(()=>[...l[6]||(l[6]=[s("i",{class:"bi bi-grid-1x2-fill"},null,-1),s("span",null,"Dashboard",-1)])]),_:1}),o(a,{to:"/karaoke",class:"nav-item"},{default:r(()=>[...l[7]||(l[7]=[s("i",{class:"bi bi-mic-fill"},null,-1),s("span",null,"Karaoke",-1)])]),_:1}),o(a,{to:"/songs",class:"nav-item active"},{default:r(()=>[...l[8]||(l[8]=[s("i",{class:"bi bi-music-note-list"},null,-1),s("span",null,"Pilih Lagu",-1)])]),_:1}),o(a,{to:"/favorites",class:"nav-item"},{default:r(()=>[...l[9]||(l[9]=[s("i",{class:"bi bi-heart-fill"},null,-1),s("span",null,"Lagu Favorit",-1)])]),_:1}),o(a,{to:"/playlists",class:"nav-item"},{default:r(()=>[...l[10]||(l[10]=[s("i",{class:"bi bi-collection-play-fill"},null,-1),s("span",null,"Playlist Saya",-1)])]),_:1}),o(a,{to:"/upload",class:"nav-item"},{default:r(()=>[...l[11]||(l[11]=[s("i",{class:"bi bi-cloud-upload-fill"},null,-1),s("span",null,"Upload Lagu",-1)])]),_:1}),o(a,{to:"/history",class:"nav-item"},{default:r(()=>[...l[12]||(l[12]=[s("i",{class:"bi bi-clock-history"},null,-1),s("span",null,"Riwayat & Score",-1)])]),_:1}),o(a,{to:"/request",class:"nav-item"},{default:r(()=>[...l[13]||(l[13]=[s("i",{class:"bi bi-plus-circle-fill"},null,-1),s("span",null,"Request Lagu",-1)])]),_:1}),o(a,{to:"/donation",class:"nav-item"},{default:r(()=>[...l[14]||(l[14]=[s("i",{class:"bi bi-heart-fill"},null,-1),s("span",null,"Donasi",-1)])]),_:1}),l[16]||(l[16]=s("div",{class:"nav-divider"},null,-1)),o(a,{to:"/settings",class:"nav-item"},{default:r(()=>[...l[15]||(l[15]=[s("i",{class:"bi bi-gear-fill"},null,-1),s("span",null,"Pengaturan",-1)])]),_:1})])]),s("main",ns,[s("div",os,[l[28]||(l[28]=s("div",{class:"page-header"},[s("h1",null,[s("i",{class:"bi bi-music-note-list me-2"}),v("Pilih Lagu")]),s("p",{class:"text-muted"},"Cari dan pilih lagu untuk karaoke")],-1)),s("div",us,[s("div",rs,[l[17]||(l[17]=s("i",{class:"bi bi-search"},null,-1)),M(s("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=t=>P.value=t),onInput:K,placeholder:"Cari judul atau artis...",class:"form-control"},null,544),[[W,P.value]])]),M(s("select",{"onUpdate:modelValue":l[1]||(l[1]=t=>S.value=t),onChange:p,class:"form-select"},[l[18]||(l[18]=s("option",{value:""},"Semua Genre",-1)),(i(!0),e(k,null,_($.value,t=>(i(),e("option",{key:t,value:t},d(t),9,ds))),128))],544),[[D,S.value]]),M(s("select",{"onUpdate:modelValue":l[2]||(l[2]=t=>x.value=t),onChange:p,class:"form-select"},[l[19]||(l[19]=s("option",{value:""},"Semua Bahasa",-1)),(i(!0),e(k,null,_(B.value,t=>(i(),e("option",{key:t,value:t},d(t),9,vs))),128))],544),[[D,x.value]])]),s("div",bs,[(i(!0),e(k,null,_(y.value,t=>(i(),e("div",{key:t.id,class:"song-card"},[s("div",cs,[C(A)(t)?(i(),e("img",{key:0,src:C(A)(t),alt:t.title,loading:"lazy"},null,8,ps)):(i(),e("div",ms,[...l[20]||(l[20]=[s("i",{class:"bi bi-music-note-beamed"},null,-1)])])),s("div",fs,[s("button",{class:"btn-play-song",onClick:g=>U(t)},[...l[21]||(l[21]=[s("i",{class:"bi bi-play-fill"},null,-1)])],8,ys)]),s("button",{class:z(["btn-favorite",{active:C(f).isFavorite(t.id)}]),onClick:I(g=>Q(t),["stop"])},[s("i",{class:z(C(f).isFavorite(t.id)?"bi bi-heart-fill":"bi bi-heart")},null,2)],10,gs)]),s("div",ks,[s("h4",null,d(t.title),1),s("p",null,d(t.artist),1),s("div",_s,[t.genre?(i(),e("span",Cs,[l[22]||(l[22]=s("i",{class:"bi bi-tag"},null,-1)),v(" "+d(t.genre),1)])):m("",!0),s("span",null,[l[23]||(l[23]=s("i",{class:"bi bi-play-fill"},null,-1)),v(" "+d(t.play_count||0),1)])])]),s("div",hs,[s("button",{class:"btn btn-primary btn-sm",onClick:g=>U(t)},[...l[24]||(l[24]=[s("i",{class:"bi bi-play-fill"},null,-1),v(" Play ",-1)])],8,Ps),s("button",{class:"btn btn-ghost btn-sm",onClick:g=>q(t)},[...l[25]||(l[25]=[s("i",{class:"bi bi-plus-lg"},null,-1)])],8,Ss)])]))),128))]),b.value?(i(),e("div",xs,[...l[26]||(l[26]=[s("div",{class:"spinner-border text-primary"},null,-1)])])):m("",!0),!b.value&&y.value.length===0?(i(),e("div",ws,[...l[27]||(l[27]=[s("i",{class:"bi bi-music-note"},null,-1),s("p",null,"Tidak ada lagu ditemukan",-1)])])):m("",!0),V.value&&!b.value?(i(),e("div",Ts,[s("button",{class:"btn btn-outline-primary",onClick:R}," Muat Lebih Banyak ")])):m("",!0)])]),c.value?(i(),e("div",{key:0,class:"modal-overlay",onClick:l[4]||(l[4]=I(t=>c.value=!1,["self"]))},[s("div",Fs,[s("div",Ms,[l[30]||(l[30]=s("h3",null,"Tambah ke Playlist",-1)),s("button",{onClick:l[3]||(l[3]=t=>c.value=!1)},[...l[29]||(l[29]=[s("i",{class:"bi bi-x-lg"},null,-1)])])]),s("div",Ls,[F.value.length>0?(i(),e("div",$s,[(i(!0),e(k,null,_(F.value,t=>(i(),e("div",{key:t.id,class:"playlist-option",onClick:g=>E(t.id)},[l[31]||(l[31]=s("i",{class:"bi bi-collection-play"},null,-1)),s("span",null,d(t.name),1),s("span",Vs,d(t.songCount||0)+" lagu",1)],8,Bs))),128))])):(i(),e("div",Ns,[l[33]||(l[33]=s("p",null,"Belum ada playlist",-1)),o(a,{to:"/playlists",class:"btn btn-primary btn-sm"},{default:r(()=>[...l[32]||(l[32]=[v("Buat Playlist",-1)])]),_:1})]))])])])):m("",!0),o(ls)])}}},js=H(Us,[["__scopeId","data-v-959fa4ab"]]);export{js as default};
