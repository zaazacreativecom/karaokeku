import{_ as S,r as v,o as h,c as n,a,b as i,w as d,d as _,e as K,v as c,g,x as y,y as w,z as D,D as x,n as U,t as r,q as N,F as C,i as R,E as B,k as u}from"./index-DY9xsVSO.js";import{M as E}from"./MobileNav-B55vU6H0.js";const I={class:"page-layout"},J={class:"dashboard-sidebar"},q={class:"sidebar-header"},H={class:"sidebar-nav"},A={class:"page-main"},T={class:"page-content"},j={class:"upload-section"},G={class:"card-body"},W={class:"row"},$={class:"col-md-6"},O={class:"mb-3"},Q={class:"col-md-6"},X={class:"mb-3"},Y={class:"row"},Z={class:"col-md-6"},aa={class:"mb-3"},la={class:"col-md-6"},sa={class:"mb-3"},ea={class:"mb-3"},ta={key:0,class:"dropzone-content"},oa={key:1,class:"file-preview"},ia={key:0,class:"upload-progress"},na={class:"progress"},da={key:1,class:"alert alert-danger"},ua={key:2,class:"alert alert-success"},ra=["disabled"],pa={key:0,class:"spinner-border spinner-border-sm me-2"},va={class:"my-uploads mt-4"},ba={key:0,class:"text-muted"},ma={key:1,class:"uploads-list"},fa={class:"upload-info"},ca={__name:"UploadPage",setup(ga){const s=v({title:"",artist:"",genre:"",language:"",file:null}),b=v(!1),p=v(0),m=v(""),f=v(""),k=v([]),V=t=>{const l=t.target.files[0];l&&(s.value.file=l)},P=t=>{const l=t.dataTransfer.files[0];l&&l.type.startsWith("video/")&&(s.value.file=l)},z=()=>{s.value.file=null},F=t=>t<1024?t+" B":t<1024*1024?(t/1024).toFixed(1)+" KB":(t/(1024*1024)).toFixed(1)+" MB",L=async()=>{var t,l;if(s.value.file){b.value=!0,m.value="",f.value="",p.value=0;try{const e=new FormData;e.append("title",s.value.title),e.append("artist",s.value.artist),e.append("genre",s.value.genre),e.append("language",s.value.language),e.append("video",s.value.file),await B.upload(e,o=>{p.value=o}),f.value="Video berhasil diupload! Menunggu review admin.",s.value={title:"",artist:"",genre:"",language:"",file:null},p.value=0,M()}catch(e){m.value=((l=(t=e.response)==null?void 0:t.data)==null?void 0:l.message)||"Gagal mengupload video"}finally{b.value=!1}}},M=async()=>{try{const t=await B.getMyUploads();k.value=t.data.data||[]}catch(t){console.error(t)}};return h(M),(t,l)=>{const e=K("router-link");return u(),n("div",I,[a("aside",J,[a("div",q,[i(e,{to:"/dashboard",class:"brand"},{default:d(()=>[...l[6]||(l[6]=[a("i",{class:"bi bi-music-note-beamed"},null,-1),a("span",null,[_("Karaoke"),a("span",{class:"text-gradient"},"Ku")],-1)])]),_:1})]),a("nav",H,[i(e,{to:"/dashboard",class:"nav-item"},{default:d(()=>[...l[7]||(l[7]=[a("i",{class:"bi bi-grid-1x2-fill"},null,-1),a("span",null,"Dashboard",-1)])]),_:1}),i(e,{to:"/karaoke",class:"nav-item"},{default:d(()=>[...l[8]||(l[8]=[a("i",{class:"bi bi-mic-fill"},null,-1),a("span",null,"Karaoke",-1)])]),_:1}),i(e,{to:"/songs",class:"nav-item"},{default:d(()=>[...l[9]||(l[9]=[a("i",{class:"bi bi-music-note-list"},null,-1),a("span",null,"Pilih Lagu",-1)])]),_:1}),i(e,{to:"/favorites",class:"nav-item"},{default:d(()=>[...l[10]||(l[10]=[a("i",{class:"bi bi-heart-fill"},null,-1),a("span",null,"Lagu Favorit",-1)])]),_:1}),i(e,{to:"/playlists",class:"nav-item"},{default:d(()=>[...l[11]||(l[11]=[a("i",{class:"bi bi-collection-play-fill"},null,-1),a("span",null,"Playlist Saya",-1)])]),_:1}),i(e,{to:"/upload",class:"nav-item active"},{default:d(()=>[...l[12]||(l[12]=[a("i",{class:"bi bi-cloud-upload-fill"},null,-1),a("span",null,"Upload Lagu",-1)])]),_:1}),i(e,{to:"/history",class:"nav-item"},{default:d(()=>[...l[13]||(l[13]=[a("i",{class:"bi bi-clock-history"},null,-1),a("span",null,"Riwayat & Score",-1)])]),_:1}),i(e,{to:"/request",class:"nav-item"},{default:d(()=>[...l[14]||(l[14]=[a("i",{class:"bi bi-plus-circle-fill"},null,-1),a("span",null,"Request Lagu",-1)])]),_:1}),i(e,{to:"/donation",class:"nav-item"},{default:d(()=>[...l[15]||(l[15]=[a("i",{class:"bi bi-heart-fill"},null,-1),a("span",null,"Donasi",-1)])]),_:1}),l[17]||(l[17]=a("div",{class:"nav-divider"},null,-1)),i(e,{to:"/settings",class:"nav-item"},{default:d(()=>[...l[16]||(l[16]=[a("i",{class:"bi bi-gear-fill"},null,-1),a("span",null,"Pengaturan",-1)])]),_:1})])]),a("main",A,[a("div",T,[l[30]||(l[30]=a("div",{class:"page-header"},[a("h1",null,[a("i",{class:"bi bi-cloud-upload-fill me-2"}),_("Upload Lagu Karaoke")]),a("p",{class:"text-muted"},"Upload video karaoke Anda untuk direview admin")],-1)),a("div",j,[a("form",{onSubmit:c(L,["prevent"]),class:"upload-form card"},[a("div",G,[a("div",W,[a("div",$,[a("div",O,[l[18]||(l[18]=a("label",{class:"form-label"},"Judul Lagu *",-1)),y(a("input",{type:"text",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=o=>s.value.title=o),required:"",placeholder:"Masukkan judul lagu"},null,512),[[w,s.value.title]])])]),a("div",Q,[a("div",X,[l[19]||(l[19]=a("label",{class:"form-label"},"Artis",-1)),y(a("input",{type:"text",class:"form-control","onUpdate:modelValue":l[1]||(l[1]=o=>s.value.artist=o),placeholder:"Nama artis/penyanyi"},null,512),[[w,s.value.artist]])])])]),a("div",Y,[a("div",Z,[a("div",aa,[l[21]||(l[21]=a("label",{class:"form-label"},"Genre",-1)),y(a("select",{class:"form-select","onUpdate:modelValue":l[2]||(l[2]=o=>s.value.genre=o)},[...l[20]||(l[20]=[x('<option value="" data-v-7b6b7701>Pilih genre</option><option value="Pop" data-v-7b6b7701>Pop</option><option value="Rock" data-v-7b6b7701>Rock</option><option value="Dangdut" data-v-7b6b7701>Dangdut</option><option value="Jazz" data-v-7b6b7701>Jazz</option><option value="R&amp;B" data-v-7b6b7701>R&amp;B</option><option value="Hip Hop" data-v-7b6b7701>Hip Hop</option><option value="EDM" data-v-7b6b7701>EDM</option><option value="Ballad" data-v-7b6b7701>Ballad</option><option value="Lainnya" data-v-7b6b7701>Lainnya</option>',10)])],512),[[D,s.value.genre]])])]),a("div",la,[a("div",sa,[l[23]||(l[23]=a("label",{class:"form-label"},"Bahasa/Negara",-1)),y(a("select",{class:"form-select","onUpdate:modelValue":l[3]||(l[3]=o=>s.value.language=o)},[...l[22]||(l[22]=[x('<option value="" data-v-7b6b7701>Pilih bahasa</option><option value="Indonesia" data-v-7b6b7701>Indonesia</option><option value="English" data-v-7b6b7701>English</option><option value="Korean" data-v-7b6b7701>Korean</option><option value="Japanese" data-v-7b6b7701>Japanese</option><option value="Mandarin" data-v-7b6b7701>Mandarin</option><option value="Lainnya" data-v-7b6b7701>Lainnya</option>',7)])],512),[[D,s.value.language]])])])]),a("div",ea,[l[27]||(l[27]=a("label",{class:"form-label"},"File Video *",-1)),a("div",{class:U(["upload-dropzone",{"has-file":s.value.file}]),onClick:l[4]||(l[4]=o=>t.$refs.fileInput.click()),onDragover:l[5]||(l[5]=c(()=>{},["prevent"])),onDrop:c(P,["prevent"])},[a("input",{type:"file",ref:"fileInput",onChange:V,accept:"video/*",hidden:""},null,544),s.value.file?(u(),n("div",oa,[l[26]||(l[26]=a("i",{class:"bi bi-file-earmark-play-fill"},null,-1)),a("div",null,[a("p",null,r(s.value.file.name),1),a("span",null,r(F(s.value.file.size)),1)]),a("button",{type:"button",class:"btn-remove",onClick:c(z,["stop"])},[...l[25]||(l[25]=[a("i",{class:"bi bi-x-lg"},null,-1)])])])):(u(),n("div",ta,[...l[24]||(l[24]=[a("i",{class:"bi bi-cloud-upload"},null,-1),a("p",null,"Klik atau drag & drop file video",-1),a("span",null,"Format: MP4, MKV, WebM (Maks. 500MB)",-1)])]))],34)]),p.value>0?(u(),n("div",ia,[a("div",na,[a("div",{class:"progress-bar",style:N({width:p.value+"%"})},null,4)]),a("span",null,r(p.value)+"%",1)])):g("",!0),m.value?(u(),n("div",da,r(m.value),1)):g("",!0),f.value?(u(),n("div",ua,r(f.value),1)):g("",!0),a("button",{type:"submit",class:"btn btn-primary btn-lg w-100",disabled:b.value||!s.value.file},[b.value?(u(),n("span",pa)):g("",!0),_(" "+r(b.value?"Mengupload...":"Upload Video"),1)],8,ra)])],32)]),a("div",va,[l[29]||(l[29]=a("h3",null,"Upload Saya",-1)),k.value.length===0?(u(),n("div",ba,"Belum ada upload")):(u(),n("div",ma,[(u(!0),n(C,null,R(k.value,o=>(u(),n("div",{key:o.id,class:"upload-item"},[l[28]||(l[28]=a("div",{class:"upload-thumb"},[a("i",{class:"bi bi-music-note-beamed"})],-1)),a("div",fa,[a("h4",null,r(o.title),1),a("p",null,r(o.artist||"-"),1)]),a("span",{class:U(["upload-status",o.status])},r(o.status==="pending"?"Menunggu Review":o.status==="approved"?"Disetujui":"Ditolak"),3)]))),128))]))])])]),i(E)])}}},_a=S(ca,[["__scopeId","data-v-7b6b7701"]]);export{_a as default};
