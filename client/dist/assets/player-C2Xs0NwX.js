import{B as q,r as a,l as f,p as S}from"./index-DY9xsVSO.js";const B=q("player",()=>{const n=a(null),t=a(null),r=a(!1),s=a(!1),l=a(0),o=a(0),p=a(.8),y=a(0),v=a(!1),i=a(!1),c=a([]),d=a(!1),M=f(()=>o.value===0?0:l.value/o.value*100),w=f(()=>n.value?v.value?n.value.video_url_full:n.value.video_url_instrumental:null),x=f(()=>g(l.value)),P=f(()=>g(o.value)),h=async e=>{d.value=!0;try{t.value&&n.value&&await m(),n.value=e;const u=await S.start(e.id);t.value=u.data.data.historyId,r.value=!0,s.value=!1,l.value=0,i.value=!1}catch(u){console.error("Error playing song:",u)}finally{d.value=!1}},T=()=>{r.value=!1,s.value=!0},_=()=>{r.value=!0,s.value=!1},I=async()=>{t.value&&await m(),r.value=!1,s.value=!1,l.value=0},m=async()=>{if(!t.value)return null;try{const u=(await S.end(t.value,Math.round(l.value))).data.data;return t.value=null,u}catch(e){return console.error("Error ending session:",e),null}},N=e=>{l.value=e},O=e=>{o.value=e},V=e=>{p.value=Math.max(0,Math.min(1,e))},C=e=>{y.value=Math.max(-6,Math.min(6,e))},D=()=>{v.value=!v.value},E=()=>{i.value=!i.value},Q=e=>{c.value.push(e)},$=async()=>{if(c.value.length>0){const e=c.value.shift();await h(e)}},b=()=>{c.value=[]},g=e=>{if(!e||isNaN(e))return"0:00";const u=Math.floor(e/60),k=Math.floor(e%60);return`${u}:${k.toString().padStart(2,"0")}`};return{currentSong:n,historyId:t,isPlaying:r,isPaused:s,currentTime:l,duration:o,volume:p,pitch:y,vocalOn:v,showOverlay:i,queue:c,loading:d,progress:M,currentVideoUrl:w,formattedCurrentTime:x,formattedDuration:P,playSong:h,pause:T,resume:_,stop:I,endCurrentSession:m,updateTime:N,setDuration:O,setVolume:V,setPitch:C,toggleVocal:D,toggleOverlay:E,addToQueue:Q,playNext:$,clearQueue:b}});export{B as u};
