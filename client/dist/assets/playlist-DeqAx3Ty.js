import{B as f,r as y,C as c}from"./index-DY9xsVSO.js";const x=f("playlist",()=>{const n=y([]),i=y(null),r=y(!1),t=y(null),p=async()=>{var e,l;r.value=!0,t.value=null;try{const a=await c.getAll();n.value=a.data.data}catch(a){t.value=((l=(e=a.response)==null?void 0:e.data)==null?void 0:l.message)||"Gagal memuat playlist"}finally{r.value=!1}},v=async e=>{var l,a;r.value=!0,t.value=null;try{const s=await c.getById(e);return i.value=s.data.data,i.value}catch(s){return t.value=((a=(l=s.response)==null?void 0:l.data)==null?void 0:a.message)||"Gagal memuat playlist",null}finally{r.value=!1}};return{playlists:n,currentPlaylist:i,loading:r,error:t,fetchPlaylists:p,getPlaylist:v,createPlaylist:async e=>{var l,a;r.value=!0,t.value=null;try{const u=(await c.create(e)).data.data;return n.value.unshift(u),{success:!0,playlist:u}}catch(s){return t.value=((a=(l=s.response)==null?void 0:l.data)==null?void 0:a.message)||"Gagal membuat playlist",{success:!1,error:t.value}}finally{r.value=!1}},updatePlaylist:async(e,l)=>{var a,s;r.value=!0,t.value=null;try{const o=(await c.update(e,l)).data.data,d=n.value.findIndex(g=>g.id===e);return d!==-1&&(n.value[d]=o),{success:!0,playlist:o}}catch(u){return t.value=((s=(a=u.response)==null?void 0:a.data)==null?void 0:s.message)||"Gagal update playlist",{success:!1,error:t.value}}finally{r.value=!1}},deletePlaylist:async e=>{var l,a;r.value=!0,t.value=null;try{return await c.delete(e),n.value=n.value.filter(s=>s.id!==e),{success:!0}}catch(s){return t.value=((a=(l=s.response)==null?void 0:l.data)==null?void 0:a.message)||"Gagal hapus playlist",{success:!1,error:t.value}}finally{r.value=!1}},addSongToPlaylist:async(e,l)=>{var a,s,u;try{return await c.addSong(e,l),((a=i.value)==null?void 0:a.id)===e&&await v(e),{success:!0}}catch(o){return{success:!1,error:((u=(s=o.response)==null?void 0:s.data)==null?void 0:u.message)||"Gagal menambahkan lagu"}}},removeSongFromPlaylist:async(e,l)=>{var a,s,u;try{return await c.removeSong(e,l),((a=i.value)==null?void 0:a.id)===e&&await v(e),{success:!0}}catch(o){return{success:!1,error:((u=(s=o.response)==null?void 0:s.data)==null?void 0:u.message)||"Gagal menghapus lagu"}}}}});export{x as u};
